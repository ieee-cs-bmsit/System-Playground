(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function nm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rm={exports:{}},Uo={},sm={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=Symbol.for("react.element"),z0=Symbol.for("react.portal"),L0=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),F0=Symbol.for("react.provider"),O0=Symbol.for("react.context"),$0=Symbol.for("react.forward_ref"),B0=Symbol.for("react.suspense"),H0=Symbol.for("react.memo"),U0=Symbol.for("react.lazy"),Yu=Symbol.iterator;function V0(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},om=Object.assign,am={};function qr(e,t,n){this.props=e,this.context=t,this.refs=am,this.updater=n||im}qr.prototype.isReactComponent={};qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lm(){}lm.prototype=qr.prototype;function Rc(e,t,n){this.props=e,this.context=t,this.refs=am,this.updater=n||im}var Pc=Rc.prototype=new lm;Pc.constructor=Rc;om(Pc,qr.prototype);Pc.isPureReactComponent=!0;var Xu=Array.isArray,cm=Object.prototype.hasOwnProperty,Ac={current:null},um={key:!0,ref:!0,__self:!0,__source:!0};function dm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)cm.call(t,r)&&!um.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ii,type:e,key:i,ref:o,props:s,_owner:Ac.current}}function q0(e,t){return{$$typeof:ii,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ii}function W0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ku=/\/+/g;function Ia(e,t){return typeof e=="object"&&e!==null&&e.key!=null?W0(""+e.key):t.toString(36)}function qi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ii:case z0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ia(o,0):r,Xu(s)?(n="",e!=null&&(n=e.replace(Ku,"$&/")+"/"),qi(s,t,n,"",function(u){return u})):s!=null&&(zc(s)&&(s=q0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ku,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Xu(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ia(i,l);o+=qi(i,t,n,c,s)}else if(c=V0(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ia(i,l++),o+=qi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xi(e,t,n){if(e==null)return e;var r=[],s=0;return qi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Q0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},Wi={transition:null},G0={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Wi,ReactCurrentOwner:Ac};function fm(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:xi,forEach:function(e,t,n){xi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xi(e,function(){t++}),t},toArray:function(e){return xi(e,function(t){return t})||[]},only:function(e){if(!zc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=qr;ee.Fragment=L0;ee.Profiler=D0;ee.PureComponent=Rc;ee.StrictMode=I0;ee.Suspense=B0;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0;ee.act=fm;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=om({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ac.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)cm.call(t,c)&&!um.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ii,type:e.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(e){return e={$$typeof:O0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:F0,_context:e},e.Consumer=e};ee.createElement=dm;ee.createFactory=function(e){var t=dm.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:$0,render:e}};ee.isValidElement=zc;ee.lazy=function(e){return{$$typeof:U0,_payload:{_status:-1,_result:e},_init:Q0}};ee.memo=function(e,t){return{$$typeof:H0,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=Wi.transition;Wi.transition={};try{e()}finally{Wi.transition=t}};ee.unstable_act=fm;ee.useCallback=function(e,t){return Ve.current.useCallback(e,t)};ee.useContext=function(e){return Ve.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Ve.current.useEffect(e,t)};ee.useId=function(){return Ve.current.useId()};ee.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Ve.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};ee.useRef=function(e){return Ve.current.useRef(e)};ee.useState=function(e){return Ve.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return Ve.current.useTransition()};ee.version="18.3.1";sm.exports=ee;var N=sm.exports;const R=nm(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=N,X0=Symbol.for("react.element"),K0=Symbol.for("react.fragment"),Z0=Object.prototype.hasOwnProperty,J0=Y0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ey={key:!0,ref:!0,__self:!0,__source:!0};function mm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Z0.call(t,r)&&!ey.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:X0,type:e,key:i,ref:o,props:s,_owner:J0.current}}Uo.Fragment=K0;Uo.jsx=mm;Uo.jsxs=mm;rm.exports=Uo;var a=rm.exports,bl={},hm={exports:{}},st={},pm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,S){var P=T.length;T.push(S);e:for(;0<P;){var I=P-1>>>1,F=T[I];if(0<s(F,S))T[I]=S,T[P]=F,P=I;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var S=T[0],P=T.pop();if(P!==S){T[0]=P;e:for(var I=0,F=T.length,W=F>>>1;I<W;){var V=2*(I+1)-1,G=T[V],Y=V+1,K=T[Y];if(0>s(G,P))Y<F&&0>s(K,G)?(T[I]=K,T[Y]=P,I=Y):(T[I]=G,T[V]=P,I=V);else if(Y<F&&0>s(K,P))T[I]=K,T[Y]=P,I=Y;else break e}}return S}function s(T,S){var P=T.sortIndex-S.sortIndex;return P!==0?P:T.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var S=n(u);S!==null;){if(S.callback===null)r(u);else if(S.startTime<=T)r(u),S.sortIndex=S.expirationTime,t(c,S);else break;S=n(u)}}function w(T){if(y=!1,x(T),!v)if(n(c)!==null)v=!0,_(E);else{var S=n(u);S!==null&&D(w,S.startTime-T)}}function E(T,S){v=!1,y&&(y=!1,h(M),M=-1),g=!0;var P=m;try{for(x(S),f=n(c);f!==null&&(!(f.expirationTime>S)||T&&!$());){var I=f.callback;if(typeof I=="function"){f.callback=null,m=f.priorityLevel;var F=I(f.expirationTime<=S);S=e.unstable_now(),typeof F=="function"?f.callback=F:f===n(c)&&r(c),x(S)}else r(c);f=n(c)}if(f!==null)var W=!0;else{var V=n(u);V!==null&&D(w,V.startTime-S),W=!1}return W}finally{f=null,m=P,g=!1}}var j=!1,C=null,M=-1,A=5,L=-1;function $(){return!(e.unstable_now()-L<A)}function U(){if(C!==null){var T=e.unstable_now();L=T;var S=!0;try{S=C(!0,T)}finally{S?H():(j=!1,C=null)}}else j=!1}var H;if(typeof p=="function")H=function(){p(U)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,z=b.port2;b.port1.onmessage=U,H=function(){z.postMessage(null)}}else H=function(){k(U,0)};function _(T){C=T,j||(j=!0,H())}function D(T,S){M=k(function(){T(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,_(E))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var S=3;break;default:S=m}var P=m;m=S;try{return T()}finally{m=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,S){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var P=m;m=T;try{return S()}finally{m=P}},e.unstable_scheduleCallback=function(T,S,P){var I=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?I+P:I):P=I,T){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=P+F,T={id:d++,callback:S,priorityLevel:T,startTime:P,expirationTime:F,sortIndex:-1},P>I?(T.sortIndex=P,t(u,T),n(c)===null&&T===n(u)&&(y?(h(M),M=-1):y=!0,D(w,P-I))):(T.sortIndex=F,t(c,T),v||g||(v=!0,_(E))),T},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(T){var S=m;return function(){var P=m;m=S;try{return T.apply(this,arguments)}finally{m=P}}}})(gm);pm.exports=gm;var ty=pm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=N,nt=ty;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,Ps={};function Jn(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(Ps[e]=t,e=0;e<t.length;e++)ym.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=Object.prototype.hasOwnProperty,ry=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zu={},Ju={};function sy(e){return kl.call(Ju,e)?!0:kl.call(Zu,e)?!1:ry.test(e)?Ju[e]=!0:(Zu[e]=!0,!1)}function iy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oy(e,t,n,r){if(t===null||typeof t>"u"||iy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lc=/[\-:]([a-z])/g;function Ic(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lc,Ic);Re[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lc,Ic);Re[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lc,Ic);Re[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dc(e,t,n,r){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oy(t,n,s,r)&&(n=null),r||s===null?sy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Jt=ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vi=Symbol.for("react.element"),fr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),Fc=Symbol.for("react.strict_mode"),Nl=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),vm=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),Sl=Symbol.for("react.suspense"),Cl=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),wm=Symbol.for("react.offscreen"),ed=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=ed&&e[ed]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,Da;function ms(e){if(Da===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Da=t&&t[1]||""}return`
`+Da+e}var Fa=!1;function Oa(e,t){if(!e||Fa)return"";Fa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ms(e):""}function ay(e){switch(e.tag){case 5:return ms(e.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function El(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case fr:return"Portal";case Nl:return"Profiler";case Fc:return"StrictMode";case Sl:return"Suspense";case Cl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vm:return(e.displayName||"Context")+".Consumer";case xm:return(e._context.displayName||"Context")+".Provider";case Oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $c:return t=e.displayName||null,t!==null?t:El(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return El(e(t))}catch{}}return null}function ly(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return El(t);case 8:return t===Fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cy(e){var t=bm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){e._valueTracker||(e._valueTracker=cy(e))}function km(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function co(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jl(e,t){var n=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function td(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nm(e,t){t=t.checked,t!=null&&Dc(e,"checked",t,!1)}function _l(e,t){Nm(e,t);var n=kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tl(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tl(e,t,n){(t!=="number"||co(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var hs=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ml(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(hs(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kn(n)}}function Sm(e,t){var n=kn(t.value),r=kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bi,Em=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function As(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uy=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(e){uy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ks[t]=ks[e]})});function jm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ks.hasOwnProperty(e)&&ks[e]?(""+t).trim():t+"px"}function _m(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var dy=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(e,t){if(t){if(dy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function Al(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ll=null,Er=null,jr=null;function id(e){if(e=li(e)){if(typeof Ll!="function")throw Error(B(280));var t=e.stateNode;t&&(t=Go(t),Ll(e.stateNode,e.type,t))}}function Tm(e){Er?jr?jr.push(e):jr=[e]:Er=e}function Mm(){if(Er){var e=Er,t=jr;if(jr=Er=null,id(e),t)for(e=0;e<t.length;e++)id(t[e])}}function Rm(e,t){return e(t)}function Pm(){}var $a=!1;function Am(e,t,n){if($a)return e(t,n);$a=!0;try{return Rm(e,t,n)}finally{$a=!1,(Er!==null||jr!==null)&&(Pm(),Mm())}}function zs(e,t){var n=e.stateNode;if(n===null)return null;var r=Go(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var Il=!1;if(Qt)try{var es={};Object.defineProperty(es,"passive",{get:function(){Il=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Il=!1}function fy(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ns=!1,uo=null,fo=!1,Dl=null,my={onError:function(e){Ns=!0,uo=e}};function hy(e,t,n,r,s,i,o,l,c){Ns=!1,uo=null,fy.apply(my,arguments)}function py(e,t,n,r,s,i,o,l,c){if(hy.apply(this,arguments),Ns){if(Ns){var u=uo;Ns=!1,uo=null}else throw Error(B(198));fo||(fo=!0,Dl=u)}}function er(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function od(e){if(er(e)!==e)throw Error(B(188))}function gy(e){var t=e.alternate;if(!t){if(t=er(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return od(s),e;if(i===r)return od(s),t;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Lm(e){return e=gy(e),e!==null?Im(e):null}function Im(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Im(e);if(t!==null)return t;e=e.sibling}return null}var Dm=nt.unstable_scheduleCallback,ad=nt.unstable_cancelCallback,yy=nt.unstable_shouldYield,xy=nt.unstable_requestPaint,ve=nt.unstable_now,vy=nt.unstable_getCurrentPriorityLevel,Hc=nt.unstable_ImmediatePriority,Fm=nt.unstable_UserBlockingPriority,mo=nt.unstable_NormalPriority,wy=nt.unstable_LowPriority,Om=nt.unstable_IdlePriority,Vo=null,Pt=null;function by(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Vo,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Sy,ky=Math.log,Ny=Math.LN2;function Sy(e){return e>>>=0,e===0?32:31-(ky(e)/Ny|0)|0}var ki=64,Ni=4194304;function ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ho(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ps(l):(i&=o,i!==0&&(r=ps(i)))}else o=n&~s,o!==0?r=ps(o):i!==0&&(r=ps(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bt(t),s=1<<n,r|=e[n],t&=~s;return r}function Cy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ey(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-bt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Cy(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Fl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $m(){var e=ki;return ki<<=1,!(ki&4194240)&&(ki=64),e}function Ba(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=n}function jy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ie=0;function Bm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hm,Vc,Um,Vm,qm,Ol=!1,Si=[],fn=null,mn=null,hn=null,Ls=new Map,Is=new Map,an=[],_y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ld(e,t){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Ls.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function ts(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=li(t),t!==null&&Vc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ty(e,t,n,r,s){switch(t){case"focusin":return fn=ts(fn,e,t,n,r,s),!0;case"dragenter":return mn=ts(mn,e,t,n,r,s),!0;case"mouseover":return hn=ts(hn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ls.set(i,ts(Ls.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Is.set(i,ts(Is.get(i)||null,e,t,n,r,s)),!0}return!1}function Wm(e){var t=Dn(e.target);if(t!==null){var n=er(t);if(n!==null){if(t=n.tag,t===13){if(t=zm(n),t!==null){e.blockedOn=t,qm(e.priority,function(){Um(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$l(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zl=r,n.target.dispatchEvent(r),zl=null}else return t=li(n),t!==null&&Vc(t),e.blockedOn=n,!1;t.shift()}return!0}function cd(e,t,n){Qi(e)&&n.delete(t)}function My(){Ol=!1,fn!==null&&Qi(fn)&&(fn=null),mn!==null&&Qi(mn)&&(mn=null),hn!==null&&Qi(hn)&&(hn=null),Ls.forEach(cd),Is.forEach(cd)}function ns(e,t){e.blockedOn===t&&(e.blockedOn=null,Ol||(Ol=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,My)))}function Ds(e){function t(s){return ns(s,e)}if(0<Si.length){ns(Si[0],e);for(var n=1;n<Si.length;n++){var r=Si[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fn!==null&&ns(fn,e),mn!==null&&ns(mn,e),hn!==null&&ns(hn,e),Ls.forEach(t),Is.forEach(t),n=0;n<an.length;n++)r=an[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Wm(n),n.blockedOn===null&&an.shift()}var _r=Jt.ReactCurrentBatchConfig,po=!0;function Ry(e,t,n,r){var s=ie,i=_r.transition;_r.transition=null;try{ie=1,qc(e,t,n,r)}finally{ie=s,_r.transition=i}}function Py(e,t,n,r){var s=ie,i=_r.transition;_r.transition=null;try{ie=4,qc(e,t,n,r)}finally{ie=s,_r.transition=i}}function qc(e,t,n,r){if(po){var s=$l(e,t,n,r);if(s===null)Ka(e,t,r,go,n),ld(e,r);else if(Ty(s,e,t,n,r))r.stopPropagation();else if(ld(e,r),t&4&&-1<_y.indexOf(e)){for(;s!==null;){var i=li(s);if(i!==null&&Hm(i),i=$l(e,t,n,r),i===null&&Ka(e,t,r,go,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ka(e,t,r,null,n)}}var go=null;function $l(e,t,n,r){if(go=null,e=Bc(r),e=Dn(e),e!==null)if(t=er(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function Qm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vy()){case Hc:return 1;case Fm:return 4;case mo:case wy:return 16;case Om:return 536870912;default:return 16}default:return 16}}var un=null,Wc=null,Gi=null;function Gm(){if(Gi)return Gi;var e,t=Wc,n=t.length,r,s="value"in un?un.value:un.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Gi=s.slice(e,1<r?1-r:void 0)}function Yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ci(){return!0}function ud(){return!1}function it(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ci:ud,this.isPropagationStopped=ud,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qc=it(Wr),ai=pe({},Wr,{view:0,detail:0}),Ay=it(ai),Ha,Ua,rs,qo=pe({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rs&&(rs&&e.type==="mousemove"?(Ha=e.screenX-rs.screenX,Ua=e.screenY-rs.screenY):Ua=Ha=0,rs=e),Ha)},movementY:function(e){return"movementY"in e?e.movementY:Ua}}),dd=it(qo),zy=pe({},qo,{dataTransfer:0}),Ly=it(zy),Iy=pe({},ai,{relatedTarget:0}),Va=it(Iy),Dy=pe({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fy=it(Dy),Oy=pe({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$y=it(Oy),By=pe({},Wr,{data:0}),fd=it(By),Hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vy[e])?!!t[e]:!1}function Gc(){return qy}var Wy=pe({},ai,{key:function(e){if(e.key){var t=Hy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qy=it(Wy),Gy=pe({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=it(Gy),Yy=pe({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),Xy=it(Yy),Ky=pe({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zy=it(Ky),Jy=pe({},qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ex=it(Jy),tx=[9,13,27,32],Yc=Qt&&"CompositionEvent"in window,Ss=null;Qt&&"documentMode"in document&&(Ss=document.documentMode);var nx=Qt&&"TextEvent"in window&&!Ss,Ym=Qt&&(!Yc||Ss&&8<Ss&&11>=Ss),hd=" ",pd=!1;function Xm(e,t){switch(e){case"keyup":return tx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Km(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function rx(e,t){switch(e){case"compositionend":return Km(t);case"keypress":return t.which!==32?null:(pd=!0,hd);case"textInput":return e=t.data,e===hd&&pd?null:e;default:return null}}function sx(e,t){if(hr)return e==="compositionend"||!Yc&&Xm(e,t)?(e=Gm(),Gi=Wc=un=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ym&&t.locale!=="ko"?null:t.data;default:return null}}var ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ix[e.type]:t==="textarea"}function Zm(e,t,n,r){Tm(r),t=yo(t,"onChange"),0<t.length&&(n=new Qc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cs=null,Fs=null;function ox(e){ch(e,0)}function Wo(e){var t=yr(e);if(km(t))return e}function ax(e,t){if(e==="change")return t}var Jm=!1;if(Qt){var qa;if(Qt){var Wa="oninput"in document;if(!Wa){var yd=document.createElement("div");yd.setAttribute("oninput","return;"),Wa=typeof yd.oninput=="function"}qa=Wa}else qa=!1;Jm=qa&&(!document.documentMode||9<document.documentMode)}function xd(){Cs&&(Cs.detachEvent("onpropertychange",eh),Fs=Cs=null)}function eh(e){if(e.propertyName==="value"&&Wo(Fs)){var t=[];Zm(t,Fs,e,Bc(e)),Am(ox,t)}}function lx(e,t,n){e==="focusin"?(xd(),Cs=t,Fs=n,Cs.attachEvent("onpropertychange",eh)):e==="focusout"&&xd()}function cx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wo(Fs)}function ux(e,t){if(e==="click")return Wo(t)}function dx(e,t){if(e==="input"||e==="change")return Wo(t)}function fx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:fx;function Os(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kl.call(t,s)||!St(e[s],t[s]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wd(e,t){var n=vd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vd(n)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nh(){for(var e=window,t=co();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=co(e.document)}return t}function Xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mx(e){var t=nh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&th(n.ownerDocument.documentElement,n)){if(r!==null&&Xc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=wd(n,i);var o=wd(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hx=Qt&&"documentMode"in document&&11>=document.documentMode,pr=null,Bl=null,Es=null,Hl=!1;function bd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hl||pr==null||pr!==co(r)||(r=pr,"selectionStart"in r&&Xc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Es&&Os(Es,r)||(Es=r,r=yo(Bl,"onSelect"),0<r.length&&(t=new Qc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function Ei(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gr={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},Qa={},rh={};Qt&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Qo(e){if(Qa[e])return Qa[e];if(!gr[e])return e;var t=gr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rh)return Qa[e]=t[n];return e}var sh=Qo("animationend"),ih=Qo("animationiteration"),oh=Qo("animationstart"),ah=Qo("transitionend"),lh=new Map,kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){lh.set(e,t),Jn(t,[e])}for(var Ga=0;Ga<kd.length;Ga++){var Ya=kd[Ga],px=Ya.toLowerCase(),gx=Ya[0].toUpperCase()+Ya.slice(1);Sn(px,"on"+gx)}Sn(sh,"onAnimationEnd");Sn(ih,"onAnimationIteration");Sn(oh,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(ah,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yx=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function Nd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,py(r,t,void 0,e),e.currentTarget=null}function ch(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Nd(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Nd(s,l,u),i=c}}}if(fo)throw e=Dl,fo=!1,Dl=null,e}function ce(e,t){var n=t[Ql];n===void 0&&(n=t[Ql]=new Set);var r=e+"__bubble";n.has(r)||(uh(t,e,2,!1),n.add(r))}function Xa(e,t,n){var r=0;t&&(r|=4),uh(n,e,r,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[ji]){e[ji]=!0,ym.forEach(function(n){n!=="selectionchange"&&(yx.has(n)||Xa(n,!1,e),Xa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,Xa("selectionchange",!1,t))}}function uh(e,t,n,r){switch(Qm(t)){case 1:var s=Ry;break;case 4:s=Py;break;default:s=qc}n=s.bind(null,t,n,e),s=void 0,!Il||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ka(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Dn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Am(function(){var u=i,d=Bc(n),f=[];e:{var m=lh.get(e);if(m!==void 0){var g=Qc,v=e;switch(e){case"keypress":if(Yi(n)===0)break e;case"keydown":case"keyup":g=Qy;break;case"focusin":v="focus",g=Va;break;case"focusout":v="blur",g=Va;break;case"beforeblur":case"afterblur":g=Va;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Xy;break;case sh:case ih:case oh:g=Fy;break;case ah:g=Zy;break;case"scroll":g=Ay;break;case"wheel":g=ex;break;case"copy":case"cut":case"paste":g=$y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=md}var y=(t&4)!==0,k=!y&&e==="scroll",h=y?m!==null?m+"Capture":null:m;y=[];for(var p=u,x;p!==null;){x=p;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,h!==null&&(w=zs(p,h),w!=null&&y.push(Bs(p,w,x)))),k)break;p=p.return}0<y.length&&(m=new g(m,v,null,n,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==zl&&(v=n.relatedTarget||n.fromElement)&&(Dn(v)||v[Gt]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Dn(v):null,v!==null&&(k=er(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=dd,w="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=md,w="onPointerLeave",h="onPointerEnter",p="pointer"),k=g==null?m:yr(g),x=v==null?m:yr(v),m=new y(w,p+"leave",g,n,d),m.target=k,m.relatedTarget=x,w=null,Dn(d)===u&&(y=new y(h,p+"enter",v,n,d),y.target=x,y.relatedTarget=k,w=y),k=w,g&&v)t:{for(y=g,h=v,p=0,x=y;x;x=ar(x))p++;for(x=0,w=h;w;w=ar(w))x++;for(;0<p-x;)y=ar(y),p--;for(;0<x-p;)h=ar(h),x--;for(;p--;){if(y===h||h!==null&&y===h.alternate)break t;y=ar(y),h=ar(h)}y=null}else y=null;g!==null&&Sd(f,m,g,y,!1),v!==null&&k!==null&&Sd(f,k,v,y,!0)}}e:{if(m=u?yr(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var E=ax;else if(gd(m))if(Jm)E=dx;else{E=cx;var j=lx}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=ux);if(E&&(E=E(e,u))){Zm(f,E,n,d);break e}j&&j(e,m,u),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Tl(m,"number",m.value)}switch(j=u?yr(u):window,e){case"focusin":(gd(j)||j.contentEditable==="true")&&(pr=j,Bl=u,Es=null);break;case"focusout":Es=Bl=pr=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,bd(f,n,d);break;case"selectionchange":if(hx)break;case"keydown":case"keyup":bd(f,n,d)}var C;if(Yc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hr?Xm(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Ym&&n.locale!=="ko"&&(hr||M!=="onCompositionStart"?M==="onCompositionEnd"&&hr&&(C=Gm()):(un=d,Wc="value"in un?un.value:un.textContent,hr=!0)),j=yo(u,M),0<j.length&&(M=new fd(M,e,null,n,d),f.push({event:M,listeners:j}),C?M.data=C:(C=Km(n),C!==null&&(M.data=C)))),(C=nx?rx(e,n):sx(e,n))&&(u=yo(u,"onBeforeInput"),0<u.length&&(d=new fd("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}ch(f,t)})}function Bs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zs(e,n),i!=null&&r.unshift(Bs(e,i,s)),i=zs(e,t),i!=null&&r.push(Bs(e,i,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sd(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=zs(n,i),c!=null&&o.unshift(Bs(n,c,l))):s||(c=zs(n,i),c!=null&&o.push(Bs(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function Cd(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(vx,"")}function _i(e,t,n){if(t=Cd(t),Cd(e)!==t&&n)throw Error(B(425))}function xo(){}var Ul=null,Vl=null;function ql(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wl=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,Ed=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ed<"u"?function(e){return Ed.resolve(null).then(e).catch(kx)}:Wl;function kx(e){setTimeout(function(){throw e})}function Za(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ds(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ds(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Qr,Hs="__reactProps$"+Qr,Gt="__reactContainer$"+Qr,Ql="__reactEvents$"+Qr,Nx="__reactListeners$"+Qr,Sx="__reactHandles$"+Qr;function Dn(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gt]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jd(e);e!==null;){if(n=e[Rt])return n;e=jd(e)}return t}e=n,n=e.parentNode}return null}function li(e){return e=e[Rt]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function Go(e){return e[Hs]||null}var Gl=[],xr=-1;function Cn(e){return{current:e}}function ue(e){0>xr||(e.current=Gl[xr],Gl[xr]=null,xr--)}function ae(e,t){xr++,Gl[xr]=e.current,e.current=t}var Nn={},Fe=Cn(Nn),Ye=Cn(!1),Wn=Nn;function Lr(e,t){var n=e.type.contextTypes;if(!n)return Nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Xe(e){return e=e.childContextTypes,e!=null}function vo(){ue(Ye),ue(Fe)}function _d(e,t,n){if(Fe.current!==Nn)throw Error(B(168));ae(Fe,t),ae(Ye,n)}function dh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,ly(e)||"Unknown",s));return pe({},n,r)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nn,Wn=Fe.current,ae(Fe,e),ae(Ye,Ye.current),!0}function Td(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=dh(e,t,Wn),r.__reactInternalMemoizedMergedChildContext=e,ue(Ye),ue(Fe),ae(Fe,e)):ue(Ye),ae(Ye,n)}var $t=null,Yo=!1,Ja=!1;function fh(e){$t===null?$t=[e]:$t.push(e)}function Cx(e){Yo=!0,fh(e)}function En(){if(!Ja&&$t!==null){Ja=!0;var e=0,t=ie;try{var n=$t;for(ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}$t=null,Yo=!1}catch(s){throw $t!==null&&($t=$t.slice(e+1)),Dm(Hc,En),s}finally{ie=t,Ja=!1}}return null}var vr=[],wr=0,bo=null,ko=0,ot=[],at=0,Qn=null,Ht=1,Ut="";function An(e,t){vr[wr++]=ko,vr[wr++]=bo,bo=e,ko=t}function mh(e,t,n){ot[at++]=Ht,ot[at++]=Ut,ot[at++]=Qn,Qn=e;var r=Ht;e=Ut;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ht=1<<32-bt(t)+s|n<<s|r,Ut=i+e}else Ht=1<<i|n<<s|r,Ut=e}function Kc(e){e.return!==null&&(An(e,1),mh(e,1,0))}function Zc(e){for(;e===bo;)bo=vr[--wr],vr[wr]=null,ko=vr[--wr],vr[wr]=null;for(;e===Qn;)Qn=ot[--at],ot[at]=null,Ut=ot[--at],ot[at]=null,Ht=ot[--at],ot[at]=null}var tt=null,et=null,de=!1,vt=null;function hh(e,t){var n=ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Md(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,et=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Qn!==null?{id:Ht,overflow:Ut}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,et=null,!0):!1;default:return!1}}function Yl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xl(e){if(de){var t=et;if(t){var n=t;if(!Md(e,t)){if(Yl(e))throw Error(B(418));t=pn(n.nextSibling);var r=tt;t&&Md(e,t)?hh(r,n):(e.flags=e.flags&-4097|2,de=!1,tt=e)}}else{if(Yl(e))throw Error(B(418));e.flags=e.flags&-4097|2,de=!1,tt=e}}}function Rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Ti(e){if(e!==tt)return!1;if(!de)return Rd(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ql(e.type,e.memoizedProps)),t&&(t=et)){if(Yl(e))throw ph(),Error(B(418));for(;t;)hh(e,t),t=pn(t.nextSibling)}if(Rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){et=pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}et=null}}else et=tt?pn(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=et;e;)e=pn(e.nextSibling)}function Ir(){et=tt=null,de=!1}function Jc(e){vt===null?vt=[e]:vt.push(e)}var Ex=Jt.ReactCurrentBatchConfig;function ss(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Mi(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pd(e){var t=e._init;return t(e._payload)}function gh(e){function t(h,p){if(e){var x=h.deletions;x===null?(h.deletions=[p],h.flags|=16):x.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=vn(h,p),h.index=0,h.sibling=null,h}function i(h,p,x){return h.index=x,e?(x=h.alternate,x!==null?(x=x.index,x<p?(h.flags|=2,p):x):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,p,x,w){return p===null||p.tag!==6?(p=ol(x,h.mode,w),p.return=h,p):(p=s(p,x),p.return=h,p)}function c(h,p,x,w){var E=x.type;return E===mr?d(h,p,x.props.children,w,x.key):p!==null&&(p.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nn&&Pd(E)===p.type)?(w=s(p,x.props),w.ref=ss(h,p,x),w.return=h,w):(w=no(x.type,x.key,x.props,null,h.mode,w),w.ref=ss(h,p,x),w.return=h,w)}function u(h,p,x,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=al(x,h.mode,w),p.return=h,p):(p=s(p,x.children||[]),p.return=h,p)}function d(h,p,x,w,E){return p===null||p.tag!==7?(p=Un(x,h.mode,w,E),p.return=h,p):(p=s(p,x),p.return=h,p)}function f(h,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ol(""+p,h.mode,x),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case vi:return x=no(p.type,p.key,p.props,null,h.mode,x),x.ref=ss(h,null,p),x.return=h,x;case fr:return p=al(p,h.mode,x),p.return=h,p;case nn:var w=p._init;return f(h,w(p._payload),x)}if(hs(p)||Jr(p))return p=Un(p,h.mode,x,null),p.return=h,p;Mi(h,p)}return null}function m(h,p,x,w){var E=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(h,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vi:return x.key===E?c(h,p,x,w):null;case fr:return x.key===E?u(h,p,x,w):null;case nn:return E=x._init,m(h,p,E(x._payload),w)}if(hs(x)||Jr(x))return E!==null?null:d(h,p,x,w,null);Mi(h,x)}return null}function g(h,p,x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(x)||null,l(p,h,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vi:return h=h.get(w.key===null?x:w.key)||null,c(p,h,w,E);case fr:return h=h.get(w.key===null?x:w.key)||null,u(p,h,w,E);case nn:var j=w._init;return g(h,p,x,j(w._payload),E)}if(hs(w)||Jr(w))return h=h.get(x)||null,d(p,h,w,E,null);Mi(p,w)}return null}function v(h,p,x,w){for(var E=null,j=null,C=p,M=p=0,A=null;C!==null&&M<x.length;M++){C.index>M?(A=C,C=null):A=C.sibling;var L=m(h,C,x[M],w);if(L===null){C===null&&(C=A);break}e&&C&&L.alternate===null&&t(h,C),p=i(L,p,M),j===null?E=L:j.sibling=L,j=L,C=A}if(M===x.length)return n(h,C),de&&An(h,M),E;if(C===null){for(;M<x.length;M++)C=f(h,x[M],w),C!==null&&(p=i(C,p,M),j===null?E=C:j.sibling=C,j=C);return de&&An(h,M),E}for(C=r(h,C);M<x.length;M++)A=g(C,h,M,x[M],w),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?M:A.key),p=i(A,p,M),j===null?E=A:j.sibling=A,j=A);return e&&C.forEach(function($){return t(h,$)}),de&&An(h,M),E}function y(h,p,x,w){var E=Jr(x);if(typeof E!="function")throw Error(B(150));if(x=E.call(x),x==null)throw Error(B(151));for(var j=E=null,C=p,M=p=0,A=null,L=x.next();C!==null&&!L.done;M++,L=x.next()){C.index>M?(A=C,C=null):A=C.sibling;var $=m(h,C,L.value,w);if($===null){C===null&&(C=A);break}e&&C&&$.alternate===null&&t(h,C),p=i($,p,M),j===null?E=$:j.sibling=$,j=$,C=A}if(L.done)return n(h,C),de&&An(h,M),E;if(C===null){for(;!L.done;M++,L=x.next())L=f(h,L.value,w),L!==null&&(p=i(L,p,M),j===null?E=L:j.sibling=L,j=L);return de&&An(h,M),E}for(C=r(h,C);!L.done;M++,L=x.next())L=g(C,h,M,L.value,w),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?M:L.key),p=i(L,p,M),j===null?E=L:j.sibling=L,j=L);return e&&C.forEach(function(U){return t(h,U)}),de&&An(h,M),E}function k(h,p,x,w){if(typeof x=="object"&&x!==null&&x.type===mr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case vi:e:{for(var E=x.key,j=p;j!==null;){if(j.key===E){if(E=x.type,E===mr){if(j.tag===7){n(h,j.sibling),p=s(j,x.props.children),p.return=h,h=p;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nn&&Pd(E)===j.type){n(h,j.sibling),p=s(j,x.props),p.ref=ss(h,j,x),p.return=h,h=p;break e}n(h,j);break}else t(h,j);j=j.sibling}x.type===mr?(p=Un(x.props.children,h.mode,w,x.key),p.return=h,h=p):(w=no(x.type,x.key,x.props,null,h.mode,w),w.ref=ss(h,p,x),w.return=h,h=w)}return o(h);case fr:e:{for(j=x.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(h,p.sibling),p=s(p,x.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=al(x,h.mode,w),p.return=h,h=p}return o(h);case nn:return j=x._init,k(h,p,j(x._payload),w)}if(hs(x))return v(h,p,x,w);if(Jr(x))return y(h,p,x,w);Mi(h,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,x),p.return=h,h=p):(n(h,p),p=ol(x,h.mode,w),p.return=h,h=p),o(h)):n(h,p)}return k}var Dr=gh(!0),yh=gh(!1),No=Cn(null),So=null,br=null,eu=null;function tu(){eu=br=So=null}function nu(e){var t=No.current;ue(No),e._currentValue=t}function Kl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t){So=e,eu=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(eu!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(So===null)throw Error(B(308));br=e,So.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var Fn=null;function ru(e){Fn===null?Fn=[e]:Fn.push(e)}function xh(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ru(t)):(n.next=s.next,s.next=n),t.interleaved=n,Yt(e,r)}function Yt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function su(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Yt(e,n)}return s=r.interleaved,s===null?(t.next=t,ru(r)):(t.next=s.next,s.next=t),r.interleaved=t,Yt(e,n)}function Xi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uc(e,n)}}function Ad(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Co(e,t,n,r){var s=e.updateQueue;rn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,y=l;switch(m=t,g=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=pe({},f,m);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Yn|=o,e.lanes=o,e.memoizedState=f}}function zd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ci={},At=Cn(ci),Us=Cn(ci),Vs=Cn(ci);function On(e){if(e===ci)throw Error(B(174));return e}function iu(e,t){switch(ae(Vs,t),ae(Us,e),ae(At,ci),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rl(t,e)}ue(At),ae(At,t)}function Fr(){ue(At),ue(Us),ue(Vs)}function wh(e){On(Vs.current);var t=On(At.current),n=Rl(t,e.type);t!==n&&(ae(Us,e),ae(At,n))}function ou(e){Us.current===e&&(ue(At),ue(Us))}var me=Cn(0);function Eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var el=[];function au(){for(var e=0;e<el.length;e++)el[e]._workInProgressVersionPrimary=null;el.length=0}var Ki=Jt.ReactCurrentDispatcher,tl=Jt.ReactCurrentBatchConfig,Gn=0,he=null,ke=null,Ce=null,jo=!1,js=!1,qs=0,jx=0;function Le(){throw Error(B(321))}function lu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!St(e[n],t[n]))return!1;return!0}function cu(e,t,n,r,s,i){if(Gn=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ki.current=e===null||e.memoizedState===null?Rx:Px,e=n(r,s),js){i=0;do{if(js=!1,qs=0,25<=i)throw Error(B(301));i+=1,Ce=ke=null,t.updateQueue=null,Ki.current=Ax,e=n(r,s)}while(js)}if(Ki.current=_o,t=ke!==null&&ke.next!==null,Gn=0,Ce=ke=he=null,jo=!1,t)throw Error(B(300));return e}function uu(){var e=qs!==0;return qs=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?he.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function ht(){if(ke===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Ce===null?he.memoizedState:Ce.next;if(t!==null)Ce=t,ke=e;else{if(e===null)throw Error(B(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?he.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function Ws(e,t){return typeof t=="function"?t(e):t}function nl(e){var t=ht(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Gn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,he.lanes|=d,Yn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,St(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,he.lanes|=i,Yn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rl(e){var t=ht(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);St(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function bh(){}function kh(e,t){var n=he,r=ht(),s=t(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Qe=!0),r=r.queue,du(Ch.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Qs(9,Sh.bind(null,n,r,s,t),void 0,null),Ee===null)throw Error(B(349));Gn&30||Nh(n,t,s)}return s}function Nh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sh(e,t,n,r){t.value=n,t.getSnapshot=r,Eh(t)&&jh(e)}function Ch(e,t,n){return n(function(){Eh(t)&&jh(e)})}function Eh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!St(e,n)}catch{return!0}}function jh(e){var t=Yt(e,1);t!==null&&kt(t,e,1,-1)}function Ld(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Mx.bind(null,he,e),[t.memoizedState,e]}function Qs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function _h(){return ht().memoizedState}function Zi(e,t,n,r){var s=Tt();he.flags|=e,s.memoizedState=Qs(1|t,n,void 0,r===void 0?null:r)}function Xo(e,t,n,r){var s=ht();r=r===void 0?null:r;var i=void 0;if(ke!==null){var o=ke.memoizedState;if(i=o.destroy,r!==null&&lu(r,o.deps)){s.memoizedState=Qs(t,n,i,r);return}}he.flags|=e,s.memoizedState=Qs(1|t,n,i,r)}function Id(e,t){return Zi(8390656,8,e,t)}function du(e,t){return Xo(2048,8,e,t)}function Th(e,t){return Xo(4,2,e,t)}function Mh(e,t){return Xo(4,4,e,t)}function Rh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ph(e,t,n){return n=n!=null?n.concat([e]):null,Xo(4,4,Rh.bind(null,t,e),n)}function fu(){}function Ah(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zh(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Lh(e,t,n){return Gn&21?(St(n,t)||(n=$m(),he.lanes|=n,Yn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function _x(e,t){var n=ie;ie=n!==0&&4>n?n:4,e(!0);var r=tl.transition;tl.transition={};try{e(!1),t()}finally{ie=n,tl.transition=r}}function Ih(){return ht().memoizedState}function Tx(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dh(e))Fh(t,n);else if(n=xh(e,t,n,r),n!==null){var s=Ue();kt(n,e,r,s),Oh(n,t,r)}}function Mx(e,t,n){var r=xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))Fh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,St(l,o)){var c=t.interleaved;c===null?(s.next=s,ru(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=xh(e,t,s,r),n!==null&&(s=Ue(),kt(n,e,r,s),Oh(n,t,r))}}function Dh(e){var t=e.alternate;return e===he||t!==null&&t===he}function Fh(e,t){js=jo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Oh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uc(e,n)}}var _o={readContext:mt,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},Rx={readContext:mt,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Id,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zi(4194308,4,Rh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zi(4,2,e,t)},useMemo:function(e,t){var n=Tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Tx.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:Ld,useDebugValue:fu,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=Ld(!1),t=e[0];return e=_x.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,s=Tt();if(de){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Ee===null)throw Error(B(349));Gn&30||Nh(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Id(Ch.bind(null,r,i,e),[e]),r.flags|=2048,Qs(9,Sh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Tt(),t=Ee.identifierPrefix;if(de){var n=Ut,r=Ht;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Px={readContext:mt,useCallback:Ah,useContext:mt,useEffect:du,useImperativeHandle:Ph,useInsertionEffect:Th,useLayoutEffect:Mh,useMemo:zh,useReducer:nl,useRef:_h,useState:function(){return nl(Ws)},useDebugValue:fu,useDeferredValue:function(e){var t=ht();return Lh(t,ke.memoizedState,e)},useTransition:function(){var e=nl(Ws)[0],t=ht().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:kh,useId:Ih,unstable_isNewReconciler:!1},Ax={readContext:mt,useCallback:Ah,useContext:mt,useEffect:du,useImperativeHandle:Ph,useInsertionEffect:Th,useLayoutEffect:Mh,useMemo:zh,useReducer:rl,useRef:_h,useState:function(){return rl(Ws)},useDebugValue:fu,useDeferredValue:function(e){var t=ht();return ke===null?t.memoizedState=e:Lh(t,ke.memoizedState,e)},useTransition:function(){var e=rl(Ws)[0],t=ht().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:kh,useId:Ih,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return(e=e._reactInternals)?er(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ue(),s=xn(e),i=qt(r,s);i.payload=t,n!=null&&(i.callback=n),t=gn(e,i,s),t!==null&&(kt(t,e,s,r),Xi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ue(),s=xn(e),i=qt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=gn(e,i,s),t!==null&&(kt(t,e,s,r),Xi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ue(),r=xn(e),s=qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=gn(e,s,r),t!==null&&(kt(t,e,r,n),Xi(t,e,r))}};function Dd(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Os(n,r)||!Os(s,i):!0}function $h(e,t,n){var r=!1,s=Nn,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=Xe(t)?Wn:Fe.current,r=t.contextTypes,i=(r=r!=null)?Lr(e,s):Nn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Jl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},su(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=Xe(t)?Wn:Fe.current,s.context=Lr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ko.enqueueReplaceState(s,s.state,null),Co(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=ay(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ec(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zx=typeof WeakMap=="function"?WeakMap:Map;function Bh(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Mo||(Mo=!0,uc=r),ec(e,t)},n}function Hh(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ec(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ec(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new zx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Gx.bind(null,e,t,n),t.then(e,e))}function $d(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e)}var Lx=Jt.ReactCurrentOwner,Qe=!1;function Be(e,t,n,r){t.child=e===null?yh(t,null,n,r):Dr(t,e.child,n,r)}function Hd(e,t,n,r,s){n=n.render;var i=t.ref;return Tr(t,s),r=cu(e,t,n,r,i,s),n=uu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(de&&n&&Kc(t),t.flags|=1,Be(e,t,r,s),t.child)}function Ud(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!wu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Uh(e,t,i,r,s)):(e=no(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Os,n(o,r)&&e.ref===t.ref)return Xt(e,t,s)}return t.flags|=1,e=vn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Uh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Os(i,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Xt(e,t,s)}return tc(e,t,n,r,s)}function Vh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Nr,Je),Je|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(Nr,Je),Je|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(Nr,Je),Je|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ae(Nr,Je),Je|=r;return Be(e,t,s,n),t.child}function qh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tc(e,t,n,r,s){var i=Xe(n)?Wn:Fe.current;return i=Lr(t,i),Tr(t,s),n=cu(e,t,n,r,i,s),r=uu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(de&&r&&Kc(t),t.flags|=1,Be(e,t,n,s),t.child)}function Vd(e,t,n,r,s){if(Xe(n)){var i=!0;wo(t)}else i=!1;if(Tr(t,s),t.stateNode===null)Ji(e,t),$h(t,n,r),Jl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Xe(n)?Wn:Fe.current,u=Lr(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Fd(t,o,r,u),rn=!1;var m=t.memoizedState;o.state=m,Co(t,r,o,s),c=t.memoizedState,l!==r||m!==c||Ye.current||rn?(typeof d=="function"&&(Zl(t,n,d,r),c=t.memoizedState),(l=rn||Dd(t,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:gt(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Xe(n)?Wn:Fe.current,c=Lr(t,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Fd(t,o,r,c),rn=!1,m=t.memoizedState,o.state=m,Co(t,r,o,s);var v=t.memoizedState;l!==f||m!==v||Ye.current||rn?(typeof g=="function"&&(Zl(t,n,g,r),v=t.memoizedState),(u=rn||Dd(t,n,u,r,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return nc(e,t,n,r,i,s)}function nc(e,t,n,r,s,i){qh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Td(t,n,!1),Xt(e,t,i);r=t.stateNode,Lx.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Dr(t,e.child,null,i),t.child=Dr(t,null,l,i)):Be(e,t,l,i),t.memoizedState=r.state,s&&Td(t,n,!0),t.child}function Wh(e){var t=e.stateNode;t.pendingContext?_d(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_d(e,t.context,!1),iu(e,t.containerInfo)}function qd(e,t,n,r,s){return Ir(),Jc(s),t.flags|=256,Be(e,t,n,r),t.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qh(e,t,n){var r=t.pendingProps,s=me.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(me,s&1),e===null)return Xl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ea(o,r,0,null),e=Un(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sc(n),t.memoizedState=rc,e):mu(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ix(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=vn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vn(l,i):(i=Un(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=rc,r}return i=e.child,e=i.sibling,r=vn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mu(e,t){return t=ea({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ri(e,t,n,r){return r!==null&&Jc(r),Dr(t,e.child,null,n),e=mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ix(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=sl(Error(B(422))),Ri(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ea({mode:"visible",children:r.children},s,0,null),i=Un(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Dr(t,e.child,null,o),t.child.memoizedState=sc(o),t.memoizedState=rc,i);if(!(t.mode&1))return Ri(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=sl(i,r,void 0),Ri(e,t,o,r)}if(l=(o&e.childLanes)!==0,Qe||l){if(r=Ee,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yt(e,s),kt(r,e,s,-1))}return vu(),r=sl(Error(B(421))),Ri(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Yx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,et=pn(s.nextSibling),tt=t,de=!0,vt=null,e!==null&&(ot[at++]=Ht,ot[at++]=Ut,ot[at++]=Qn,Ht=e.id,Ut=e.overflow,Qn=t),t=mu(t,r.children),t.flags|=4096,t)}function Wd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kl(e.return,t,n)}function il(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Be(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wd(e,n,t);else if(e.tag===19)Wd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ae(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Eo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),il(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Eo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}il(t,!0,n,null,i);break;case"together":il(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ji(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Dx(e,t,n){switch(t.tag){case 3:Wh(t),Ir();break;case 5:wh(t);break;case 1:Xe(t.type)&&wo(t);break;case 4:iu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ae(No,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ae(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Qh(e,t,n):(ae(me,me.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);ae(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,Vh(e,t,n)}return Xt(e,t,n)}var Yh,ic,Xh,Kh;Yh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ic=function(){};Xh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,On(At.current);var i=null;switch(n){case"input":s=jl(e,s),r=jl(e,r),i=[];break;case"select":s=pe({},s,{value:void 0}),r=pe({},r,{value:void 0}),i=[];break;case"textarea":s=Ml(e,s),r=Ml(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xo)}Pl(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ps.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s?.[u],r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ce("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Kh=function(e,t,n,r){n!==r&&(t.flags|=4)};function is(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fx(e,t,n){var r=t.pendingProps;switch(Zc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Xe(t.type)&&vo(),Ie(t),null;case 3:return r=t.stateNode,Fr(),ue(Ye),ue(Fe),au(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ti(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(mc(vt),vt=null))),ic(e,t),Ie(t),null;case 5:ou(t);var s=On(Vs.current);if(n=t.type,e!==null&&t.stateNode!=null)Xh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Ie(t),null}if(e=On(At.current),Ti(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Rt]=t,r[Hs]=i,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<gs.length;s++)ce(gs[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":td(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":rd(r,i),ce("invalid",r)}Pl(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&_i(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_i(r.textContent,l,e),s=["children",""+l]):Ps.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":wi(r),nd(r,i,!0);break;case"textarea":wi(r),sd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rt]=t,e[Hs]=r,Yh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Al(n,r),n){case"dialog":ce("cancel",e),ce("close",e),s=r;break;case"iframe":case"object":case"embed":ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<gs.length;s++)ce(gs[s],e);s=r;break;case"source":ce("error",e),s=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=r;break;case"details":ce("toggle",e),s=r;break;case"input":td(e,r),s=jl(e,r),ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=pe({},r,{value:void 0}),ce("invalid",e);break;case"textarea":rd(e,r),s=Ml(e,r),ce("invalid",e);break;default:s=r}Pl(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?_m(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Em(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&As(e,c):typeof c=="number"&&As(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ps.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ce("scroll",e):c!=null&&Dc(e,i,c,o))}switch(n){case"input":wi(e),nd(e,r,!1);break;case"textarea":wi(e),sd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Cr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)Kh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=On(Vs.current),On(At.current),Ti(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(i=r.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:_i(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_i(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return Ie(t),null;case 13:if(ue(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&et!==null&&t.mode&1&&!(t.flags&128))ph(),Ir(),t.flags|=98560,i=!1;else if(i=Ti(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Rt]=t}else Ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),i=!1}else vt!==null&&(mc(vt),vt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ne===0&&(Ne=3):vu())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return Fr(),ic(e,t),e===null&&$s(t.stateNode.containerInfo),Ie(t),null;case 10:return nu(t.type._context),Ie(t),null;case 17:return Xe(t.type)&&vo(),Ie(t),null;case 19:if(ue(me),i=t.memoizedState,i===null)return Ie(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)is(i,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Eo(e),o!==null){for(t.flags|=128,is(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ae(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&ve()>$r&&(t.flags|=128,r=!0,is(i,!1),t.lanes=4194304)}else{if(!r)if(e=Eo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),is(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!de)return Ie(t),null}else 2*ve()-i.renderingStartTime>$r&&n!==1073741824&&(t.flags|=128,r=!0,is(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ve(),t.sibling=null,n=me.current,ae(me,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return xu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Je&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function Ox(e,t){switch(Zc(t),t.tag){case 1:return Xe(t.type)&&vo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),ue(Ye),ue(Fe),au(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ou(t),null;case 13:if(ue(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(me),null;case 4:return Fr(),null;case 10:return nu(t.type._context),null;case 22:case 23:return xu(),null;case 24:return null;default:return null}}var Pi=!1,De=!1,$x=typeof WeakSet=="function"?WeakSet:Set,q=null;function kr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function oc(e,t,n){try{n()}catch(r){ge(e,t,r)}}var Qd=!1;function Bx(e,t){if(Ul=po,e=nh(),Xc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=o),m===i&&++d===r&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vl={focusedElem:e,selectionRange:n},po=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,k=v.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?y:gt(t.type,y),k);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(w){ge(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return v=Qd,Qd=!1,v}function _s(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&oc(t,n,i)}s=s.next}while(s!==r)}}function Zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zh(e){var t=e.alternate;t!==null&&(e.alternate=null,Zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[Hs],delete t[Ql],delete t[Nx],delete t[Sx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jh(e){return e.tag===5||e.tag===3||e.tag===4}function Gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xo));else if(r!==4&&(e=e.child,e!==null))for(lc(e,t,n),e=e.sibling;e!==null;)lc(e,t,n),e=e.sibling}function cc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cc(e,t,n),e=e.sibling;e!==null;)cc(e,t,n),e=e.sibling}var Te=null,yt=!1;function en(e,t,n){for(n=n.child;n!==null;)ep(e,t,n),n=n.sibling}function ep(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Vo,n)}catch{}switch(n.tag){case 5:De||kr(n,t);case 6:var r=Te,s=yt;Te=null,en(e,t,n),Te=r,yt=s,Te!==null&&(yt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(yt?(e=Te,n=n.stateNode,e.nodeType===8?Za(e.parentNode,n):e.nodeType===1&&Za(e,n),Ds(e)):Za(Te,n.stateNode));break;case 4:r=Te,s=yt,Te=n.stateNode.containerInfo,yt=!0,en(e,t,n),Te=r,yt=s;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&oc(n,t,o),s=s.next}while(s!==r)}en(e,t,n);break;case 1:if(!De&&(kr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ge(n,t,l)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,en(e,t,n),De=r):en(e,t,n);break;default:en(e,t,n)}}function Yd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $x),t.forEach(function(r){var s=Xx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,yt=!1;break e;case 3:Te=l.stateNode.containerInfo,yt=!0;break e;case 4:Te=l.stateNode.containerInfo,yt=!0;break e}l=l.return}if(Te===null)throw Error(B(160));ep(i,o,s),Te=null,yt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ge(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tp(t,e),t=t.sibling}function tp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),_t(e),r&4){try{_s(3,e,e.return),Zo(3,e)}catch(y){ge(e,e.return,y)}try{_s(5,e,e.return)}catch(y){ge(e,e.return,y)}}break;case 1:pt(t,e),_t(e),r&512&&n!==null&&kr(n,n.return);break;case 5:if(pt(t,e),_t(e),r&512&&n!==null&&kr(n,n.return),e.flags&32){var s=e.stateNode;try{As(s,"")}catch(y){ge(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Nm(s,i),Al(l,o);var u=Al(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?_m(s,f):d==="dangerouslySetInnerHTML"?Em(s,f):d==="children"?As(s,f):Dc(s,d,f,u)}switch(l){case"input":_l(s,i);break;case"textarea":Sm(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Cr(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Cr(s,!!i.multiple,i.defaultValue,!0):Cr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hs]=i}catch(y){ge(e,e.return,y)}}break;case 6:if(pt(t,e),_t(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){ge(e,e.return,y)}}break;case 3:if(pt(t,e),_t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(y){ge(e,e.return,y)}break;case 4:pt(t,e),_t(e);break;case 13:pt(t,e),_t(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gu=ve())),r&4&&Yd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(De=(u=De)||d,pt(t,e),De=u):pt(t,e),_t(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(f=q=d;q!==null;){switch(m=q,g=m.child,m.tag){case 0:case 11:case 14:case 15:_s(4,m,m.return);break;case 1:kr(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){ge(r,n,y)}}break;case 5:kr(m,m.return);break;case 22:if(m.memoizedState!==null){Kd(f);continue}}g!==null?(g.return=m,q=g):Kd(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=jm("display",o))}catch(y){ge(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){ge(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pt(t,e),_t(e),r&4&&Yd(e);break;case 21:break;default:pt(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jh(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(As(s,""),r.flags&=-33);var i=Gd(e);cc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gd(e);lc(e,l,o);break;default:throw Error(B(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hx(e,t,n){q=e,np(e)}function np(e,t,n){for(var r=(e.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pi;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||De;l=Pi;var u=De;if(Pi=o,(De=c)&&!u)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Zd(s):c!==null?(c.return=o,q=c):Zd(s);for(;i!==null;)q=i,np(i),i=i.sibling;q=s,Pi=l,De=u}Xd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Xd(e)}}function Xd(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||Zo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!De)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zd(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zd(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ds(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}De||t.flags&512&&ac(t)}catch(m){ge(t,t.return,m)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function Kd(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function Zd(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zo(4,t)}catch(c){ge(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ge(t,s,c)}}var i=t.return;try{ac(t)}catch(c){ge(t,i,c)}break;case 5:var o=t.return;try{ac(t)}catch(c){ge(t,o,c)}}}catch(c){ge(t,t.return,c)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var Ux=Math.ceil,To=Jt.ReactCurrentDispatcher,hu=Jt.ReactCurrentOwner,ft=Jt.ReactCurrentBatchConfig,te=0,Ee=null,we=null,Me=0,Je=0,Nr=Cn(0),Ne=0,Gs=null,Yn=0,Jo=0,pu=0,Ts=null,We=null,gu=0,$r=1/0,Ot=null,Mo=!1,uc=null,yn=null,Ai=!1,dn=null,Ro=0,Ms=0,dc=null,eo=-1,to=0;function Ue(){return te&6?ve():eo!==-1?eo:eo=ve()}function xn(e){return e.mode&1?te&2&&Me!==0?Me&-Me:Ex.transition!==null?(to===0&&(to=$m()),to):(e=ie,e!==0||(e=window.event,e=e===void 0?16:Qm(e.type)),e):1}function kt(e,t,n,r){if(50<Ms)throw Ms=0,dc=null,Error(B(185));oi(e,n,r),(!(te&2)||e!==Ee)&&(e===Ee&&(!(te&2)&&(Jo|=n),Ne===4&&ln(e,Me)),Ke(e,r),n===1&&te===0&&!(t.mode&1)&&($r=ve()+500,Yo&&En()))}function Ke(e,t){var n=e.callbackNode;Ey(e,t);var r=ho(e,e===Ee?Me:0);if(r===0)n!==null&&ad(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ad(n),t===1)e.tag===0?Cx(Jd.bind(null,e)):fh(Jd.bind(null,e)),bx(function(){!(te&6)&&En()}),n=null;else{switch(Bm(r)){case 1:n=Hc;break;case 4:n=Fm;break;case 16:n=mo;break;case 536870912:n=Om;break;default:n=mo}n=up(n,rp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rp(e,t){if(eo=-1,to=0,te&6)throw Error(B(327));var n=e.callbackNode;if(Mr()&&e.callbackNode!==n)return null;var r=ho(e,e===Ee?Me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Po(e,r);else{t=r;var s=te;te|=2;var i=ip();(Ee!==e||Me!==t)&&(Ot=null,$r=ve()+500,Hn(e,t));do try{Wx();break}catch(l){sp(e,l)}while(!0);tu(),To.current=i,te=s,we!==null?t=0:(Ee=null,Me=0,t=Ne)}if(t!==0){if(t===2&&(s=Fl(e),s!==0&&(r=s,t=fc(e,s))),t===1)throw n=Gs,Hn(e,0),ln(e,r),Ke(e,ve()),n;if(t===6)ln(e,r);else{if(s=e.current.alternate,!(r&30)&&!Vx(s)&&(t=Po(e,r),t===2&&(i=Fl(e),i!==0&&(r=i,t=fc(e,i))),t===1))throw n=Gs,Hn(e,0),ln(e,r),Ke(e,ve()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:zn(e,We,Ot);break;case 3:if(ln(e,r),(r&130023424)===r&&(t=gu+500-ve(),10<t)){if(ho(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ue(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Wl(zn.bind(null,e,We,Ot),t);break}zn(e,We,Ot);break;case 4:if(ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-bt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ux(r/1960))-r,10<r){e.timeoutHandle=Wl(zn.bind(null,e,We,Ot),r);break}zn(e,We,Ot);break;case 5:zn(e,We,Ot);break;default:throw Error(B(329))}}}return Ke(e,ve()),e.callbackNode===n?rp.bind(null,e):null}function fc(e,t){var n=Ts;return e.current.memoizedState.isDehydrated&&(Hn(e,t).flags|=256),e=Po(e,t),e!==2&&(t=We,We=n,t!==null&&mc(t)),e}function mc(e){We===null?We=e:We.push.apply(We,e)}function Vx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t){for(t&=~pu,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Jd(e){if(te&6)throw Error(B(327));Mr();var t=ho(e,0);if(!(t&1))return Ke(e,ve()),null;var n=Po(e,t);if(e.tag!==0&&n===2){var r=Fl(e);r!==0&&(t=r,n=fc(e,r))}if(n===1)throw n=Gs,Hn(e,0),ln(e,t),Ke(e,ve()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,We,Ot),Ke(e,ve()),null}function yu(e,t){var n=te;te|=1;try{return e(t)}finally{te=n,te===0&&($r=ve()+500,Yo&&En())}}function Xn(e){dn!==null&&dn.tag===0&&!(te&6)&&Mr();var t=te;te|=1;var n=ft.transition,r=ie;try{if(ft.transition=null,ie=1,e)return e()}finally{ie=r,ft.transition=n,te=t,!(te&6)&&En()}}function xu(){Je=Nr.current,ue(Nr)}function Hn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wx(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(Zc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vo();break;case 3:Fr(),ue(Ye),ue(Fe),au();break;case 5:ou(r);break;case 4:Fr();break;case 13:ue(me);break;case 19:ue(me);break;case 10:nu(r.type._context);break;case 22:case 23:xu()}n=n.return}if(Ee=e,we=e=vn(e.current,null),Me=Je=t,Ne=0,Gs=null,pu=Jo=Yn=0,We=Ts=null,Fn!==null){for(t=0;t<Fn.length;t++)if(n=Fn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fn=null}return e}function sp(e,t){do{var n=we;try{if(tu(),Ki.current=_o,jo){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jo=!1}if(Gn=0,Ce=ke=he=null,js=!1,qs=0,hu.current=null,n===null||n.return===null){Ne=1,Gs=t,we=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Me,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=$d(o);if(g!==null){g.flags&=-257,Bd(g,o,l,i,t),g.mode&1&&Od(i,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){Od(i,u,t),vu();break e}c=Error(B(426))}}else if(de&&l.mode&1){var k=$d(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Bd(k,o,l,i,t),Jc(Or(c,l));break e}}i=c=Or(c,l),Ne!==4&&(Ne=2),Ts===null?Ts=[i]:Ts.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=Bh(i,c,t);Ad(i,h);break e;case 1:l=c;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yn===null||!yn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Hh(i,l,t);Ad(i,w);break e}}i=i.return}while(i!==null)}ap(n)}catch(E){t=E,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function ip(){var e=To.current;return To.current=_o,e===null?_o:e}function vu(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Ee===null||!(Yn&268435455)&&!(Jo&268435455)||ln(Ee,Me)}function Po(e,t){var n=te;te|=2;var r=ip();(Ee!==e||Me!==t)&&(Ot=null,Hn(e,t));do try{qx();break}catch(s){sp(e,s)}while(!0);if(tu(),te=n,To.current=r,we!==null)throw Error(B(261));return Ee=null,Me=0,Ne}function qx(){for(;we!==null;)op(we)}function Wx(){for(;we!==null&&!yy();)op(we)}function op(e){var t=cp(e.alternate,e,Je);e.memoizedProps=e.pendingProps,t===null?ap(e):we=t,hu.current=null}function ap(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ox(n,t),n!==null){n.flags&=32767,we=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,we=null;return}}else if(n=Fx(n,t,Je),n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Ne===0&&(Ne=5)}function zn(e,t,n){var r=ie,s=ft.transition;try{ft.transition=null,ie=1,Qx(e,t,n,r)}finally{ft.transition=s,ie=r}return null}function Qx(e,t,n,r){do Mr();while(dn!==null);if(te&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(jy(e,i),e===Ee&&(we=Ee=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ai||(Ai=!0,up(mo,function(){return Mr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=ie;ie=1;var l=te;te|=4,hu.current=null,Bx(e,n),tp(n,e),mx(Vl),po=!!Ul,Vl=Ul=null,e.current=n,Hx(n),xy(),te=l,ie=o,ft.transition=i}else e.current=n;if(Ai&&(Ai=!1,dn=e,Ro=s),i=e.pendingLanes,i===0&&(yn=null),by(n.stateNode),Ke(e,ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mo)throw Mo=!1,e=uc,uc=null,e;return Ro&1&&e.tag!==0&&Mr(),i=e.pendingLanes,i&1?e===dc?Ms++:(Ms=0,dc=e):Ms=0,En(),null}function Mr(){if(dn!==null){var e=Bm(Ro),t=ft.transition,n=ie;try{if(ft.transition=null,ie=16>e?16:e,dn===null)var r=!1;else{if(e=dn,dn=null,Ro=0,te&6)throw Error(B(331));var s=te;for(te|=4,q=e.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:_s(8,d,i)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var m=d.sibling,g=d.return;if(Zh(d),d===u){q=null;break}if(m!==null){m.return=g,q=m;break}q=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_s(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,q=h;break e}q=i.return}}var p=e.current;for(q=p;q!==null;){o=q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,q=x;else e:for(o=p;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zo(9,l)}}catch(E){ge(l,l.return,E)}if(l===o){q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,q=w;break e}q=l.return}}if(te=s,En(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Vo,e)}catch{}r=!0}return r}finally{ie=n,ft.transition=t}}return!1}function ef(e,t,n){t=Or(n,t),t=Bh(e,t,1),e=gn(e,t,1),t=Ue(),e!==null&&(oi(e,1,t),Ke(e,t))}function ge(e,t,n){if(e.tag===3)ef(e,e,n);else for(;t!==null;){if(t.tag===3){ef(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=Or(n,e),e=Hh(t,e,1),t=gn(t,e,1),e=Ue(),t!==null&&(oi(t,1,e),Ke(t,e));break}}t=t.return}}function Gx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(Me&n)===n&&(Ne===4||Ne===3&&(Me&130023424)===Me&&500>ve()-gu?Hn(e,0):pu|=n),Ke(e,t)}function lp(e,t){t===0&&(e.mode&1?(t=Ni,Ni<<=1,!(Ni&130023424)&&(Ni=4194304)):t=1);var n=Ue();e=Yt(e,t),e!==null&&(oi(e,t,n),Ke(e,n))}function Yx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lp(e,n)}function Xx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),lp(e,n)}var cp;cp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,Dx(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,de&&t.flags&1048576&&mh(t,ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ji(e,t),e=t.pendingProps;var s=Lr(t,Fe.current);Tr(t,n),s=cu(null,t,r,e,s,n);var i=uu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xe(r)?(i=!0,wo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,su(t),s.updater=Ko,t.stateNode=s,s._reactInternals=t,Jl(t,r,e,n),t=nc(null,t,r,!0,i,n)):(t.tag=0,de&&i&&Kc(t),Be(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ji(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Zx(r),e=gt(r,e),s){case 0:t=tc(null,t,r,e,n);break e;case 1:t=Vd(null,t,r,e,n);break e;case 11:t=Hd(null,t,r,e,n);break e;case 14:t=Ud(null,t,r,gt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),tc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Vd(e,t,r,s,n);case 3:e:{if(Wh(t),e===null)throw Error(B(387));r=t.pendingProps,i=t.memoizedState,s=i.element,vh(e,t),Co(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Or(Error(B(423)),t),t=qd(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(B(424)),t),t=qd(e,t,r,n,s);break e}else for(et=pn(t.stateNode.containerInfo.firstChild),tt=t,de=!0,vt=null,n=yh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===s){t=Xt(e,t,n);break e}Be(e,t,r,n)}t=t.child}return t;case 5:return wh(t),e===null&&Xl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ql(r,s)?o=null:i!==null&&ql(r,i)&&(t.flags|=32),qh(e,t),Be(e,t,o,n),t.child;case 6:return e===null&&Xl(t),null;case 13:return Qh(e,t,n);case 4:return iu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Dr(t,null,r,n):Be(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Hd(e,t,r,s,n);case 7:return Be(e,t,t.pendingProps,n),t.child;case 8:return Be(e,t,t.pendingProps.children,n),t.child;case 12:return Be(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ae(No,r._currentValue),r._currentValue=o,i!==null)if(St(i.value,o)){if(i.children===s.children&&!Ye.current){t=Xt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Kl(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Kl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Tr(t,n),s=mt(s),r=r(s),t.flags|=1,Be(e,t,r,n),t.child;case 14:return r=t.type,s=gt(r,t.pendingProps),s=gt(r.type,s),Ud(e,t,r,s,n);case 15:return Uh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Ji(e,t),t.tag=1,Xe(r)?(e=!0,wo(t)):e=!1,Tr(t,n),$h(t,r,s),Jl(t,r,s,n),nc(null,t,r,!0,e,n);case 19:return Gh(e,t,n);case 22:return Vh(e,t,n)}throw Error(B(156,t.tag))};function up(e,t){return Dm(e,t)}function Kx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,n,r){return new Kx(e,t,n,r)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zx(e){if(typeof e=="function")return wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oc)return 11;if(e===$c)return 14}return 2}function vn(e,t){var n=e.alternate;return n===null?(n=ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function no(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")wu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case mr:return Un(n.children,s,i,t);case Fc:o=8,s|=8;break;case Nl:return e=ut(12,n,t,s|2),e.elementType=Nl,e.lanes=i,e;case Sl:return e=ut(13,n,t,s),e.elementType=Sl,e.lanes=i,e;case Cl:return e=ut(19,n,t,s),e.elementType=Cl,e.lanes=i,e;case wm:return ea(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xm:o=10;break e;case vm:o=9;break e;case Oc:o=11;break e;case $c:o=14;break e;case nn:o=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=ut(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Un(e,t,n,r){return e=ut(7,e,r,t),e.lanes=n,e}function ea(e,t,n,r){return e=ut(22,e,r,t),e.elementType=wm,e.lanes=n,e.stateNode={isHidden:!1},e}function ol(e,t,n){return e=ut(6,e,null,t),e.lanes=n,e}function al(e,t,n){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bu(e,t,n,r,s,i,o,l,c){return e=new Jx(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ut(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},su(i),e}function ev(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dp(e){if(!e)return Nn;e=e._reactInternals;e:{if(er(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(Xe(n))return dh(e,n,t)}return t}function fp(e,t,n,r,s,i,o,l,c){return e=bu(n,r,!0,e,s,i,o,l,c),e.context=dp(null),n=e.current,r=Ue(),s=xn(n),i=qt(r,s),i.callback=t??null,gn(n,i,s),e.current.lanes=s,oi(e,s,r),Ke(e,r),e}function ta(e,t,n,r){var s=t.current,i=Ue(),o=xn(s);return n=dp(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gn(s,t,o),e!==null&&(kt(e,s,o,i),Xi(e,s,o)),o}function Ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ku(e,t){tf(e,t),(e=e.alternate)&&tf(e,t)}function tv(){return null}var mp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nu(e){this._internalRoot=e}na.prototype.render=Nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));ta(e,t,null,null)};na.prototype.unmount=Nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xn(function(){ta(null,e,null,null)}),t[Gt]=null}};function na(e){this._internalRoot=e}na.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<an.length&&t!==0&&t<an[n].priority;n++);an.splice(n,0,e),n===0&&Wm(e)}};function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nf(){}function nv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ao(o);i.call(u)}}var o=fp(t,r,e,0,null,!1,!1,"",nf);return e._reactRootContainer=o,e[Gt]=o.current,$s(e.nodeType===8?e.parentNode:e),Xn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ao(c);l.call(u)}}var c=bu(e,0,!1,null,null,!1,!1,"",nf);return e._reactRootContainer=c,e[Gt]=c.current,$s(e.nodeType===8?e.parentNode:e),Xn(function(){ta(t,c,n,r)}),c}function sa(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ao(o);l.call(c)}}ta(t,o,e,s)}else o=nv(n,t,e,s,r);return Ao(o)}Hm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ps(t.pendingLanes);n!==0&&(Uc(t,n|1),Ke(t,ve()),!(te&6)&&($r=ve()+500,En()))}break;case 13:Xn(function(){var r=Yt(e,1);if(r!==null){var s=Ue();kt(r,e,1,s)}}),ku(e,1)}};Vc=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var n=Ue();kt(t,e,134217728,n)}ku(e,134217728)}};Um=function(e){if(e.tag===13){var t=xn(e),n=Yt(e,t);if(n!==null){var r=Ue();kt(n,e,t,r)}ku(e,t)}};Vm=function(){return ie};qm=function(e,t){var n=ie;try{return ie=e,t()}finally{ie=n}};Ll=function(e,t,n){switch(t){case"input":if(_l(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Go(r);if(!s)throw Error(B(90));km(r),_l(r,s)}}}break;case"textarea":Sm(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};Rm=yu;Pm=Xn;var rv={usingClientEntryPoint:!1,Events:[li,yr,Go,Tm,Mm,yu]},os={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sv={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lm(e),e===null?null:e.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zi.isDisabled&&zi.supportsFiber)try{Vo=zi.inject(sv),Pt=zi}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rv;st.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Su(t))throw Error(B(200));return ev(e,t,null,n)};st.createRoot=function(e,t){if(!Su(e))throw Error(B(299));var n=!1,r="",s=mp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=bu(e,1,!1,null,null,n,!1,r,s),e[Gt]=t.current,$s(e.nodeType===8?e.parentNode:e),new Nu(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Lm(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return Xn(e)};st.hydrate=function(e,t,n){if(!ra(t))throw Error(B(200));return sa(null,e,t,!0,n)};st.hydrateRoot=function(e,t,n){if(!Su(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fp(t,null,e,1,n??null,s,!1,i,o),e[Gt]=t.current,$s(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new na(t)};st.render=function(e,t,n){if(!ra(t))throw Error(B(200));return sa(null,e,t,!1,n)};st.unmountComponentAtNode=function(e){if(!ra(e))throw Error(B(40));return e._reactRootContainer?(Xn(function(){sa(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};st.unstable_batchedUpdates=yu;st.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ra(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return sa(e,t,n,!1,r)};st.version="18.3.1-next-f1338f8080-20240426";function hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hp)}catch(e){console.error(e)}}hp(),hm.exports=st;var iv=hm.exports,rf=iv;bl.createRoot=rf.createRoot,bl.hydrateRoot=rf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ov={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>N.createElement("svg",{ref:d,...ov,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${av(e)}`,l].join(" "),...u},[...t.map(([f,m])=>N.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=J("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=J("CircuitBoard",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M11 9h4a2 2 0 0 0 2-2V3",key:"1ve2rv"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"M7 21v-4a2 2 0 0 1 2-2h4",key:"1fwkro"}],["circle",{cx:"15",cy:"15",r:"2",key:"3i40o0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=J("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=J("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=J("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=J("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=J("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=J("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=J("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=J("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=J("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=J("StepForward",[["line",{x1:"6",x2:"6",y1:"4",y2:"20",key:"fy8qot"}],["polygon",{points:"10,4 20,12 10,20",key:"1mc1pf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=J("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=J("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=J("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function jv({onStart:e}){return a.jsxs("div",{className:"min-h-screen bg-comic-cream relative overflow-hidden font-comic flex flex-col items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-10 pointer-events-none animate-pulse-slow"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle,#ff44cc_2px,transparent_2px)] [background-size:32px_32px] opacity-20 pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[200vw] h-[200vw] bg-[conic-gradient(from_0deg_at_50%_50%,transparent_0deg,transparent_20deg,#fff_20deg,#fff_40deg,transparent_40deg)] opacity-10 animate-spin-slow pointer-events-none z-0"}),a.jsxs("div",{className:"relative z-10 text-center max-w-7xl w-full flex flex-col items-center",children:[a.jsx("div",{className:"absolute -top-20 -left-10 text-comic-yellow animate-bounce delay-100 hidden md:block",children:a.jsx(Ys,{size:80,fill:"#FFE800",stroke:"black",strokeWidth:3})}),a.jsx("div",{className:"absolute -top-10 right-0 text-comic-pink animate-pulse hidden md:block",children:a.jsx(kp,{size:64,stroke:"black",strokeWidth:3})}),a.jsxs("div",{className:"relative inline-block mb-16 hover:scale-105 transition-transform duration-300 cursor-default group",children:[a.jsx("div",{className:"absolute -inset-4 bg-black skew-y-3 skew-x-3 rounded-sm z-0"}),a.jsx("div",{className:"absolute -inset-2 bg-comic-blue border-4 border-black z-10 skew-y-1 skew-x-1 group-hover:bg-comic-pink transition-colors"}),a.jsxs("h1",{className:"relative z-20 text-5xl md:text-8xl text-white text-stroke-black drop-shadow-[8px_8px_0_#000] uppercase tracking-tighter leading-none p-6 whitespace-nowrap",children:["Visual ",a.jsx("span",{className:"text-comic-yellow text-stroke-black",children:"System"})," Builder"]}),a.jsx("div",{className:"absolute -right-12 -bottom-8 text-comic-yellow z-30 animate-wiggle",children:a.jsx(ju,{size:96,fill:"#FFE800",stroke:"black",strokeWidth:4})})]}),a.jsx("div",{className:"mb-20 transform -rotate-2 hover:rotate-0 transition-transform duration-300",children:a.jsxs("div",{className:"inline-block bg-white border-4 border-black shadow-comic-lg px-8 py-4 relative",children:[a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 w-4 h-4 bg-red-500 rounded-full border-2 border-black shadow-sm"}),a.jsxs("p",{className:"text-2xl md:text-4xl font-body font-bold text-gray-800",children:["Visualize. Simulate. ",a.jsx("span",{className:"bg-comic-yellow px-2 inline-block transform -skew-x-12 border-2 border-black",children:"Master It."})]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-8 justify-center items-center",children:[a.jsxs("button",{onClick:e,className:"relative group bg-comic-pink text-white text-4xl px-16 py-6 font-comic border-4 border-black shadow-comic-lg hover:shadow-none hover:translate-x-2 hover:translate-y-2 transition-all transform hover:-rotate-1",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{children:"START LAB"}),a.jsx(bv,{size:32,className:"group-hover:translate-x-2 transition-transform"})]}),a.jsx("span",{className:"absolute -top-4 -right-4 bg-comic-yellow text-black text-sm font-bold px-3 py-1 border-2 border-black transform rotate-12",children:"v1.0"})]}),a.jsx("button",{onClick:()=>alert("Docs coming soon!"),className:"bg-white text-4xl px-12 py-6 font-comic border-4 border-black shadow-comic-lg hover:shadow-none hover:translate-x-2 hover:translate-y-2 transition-all text-black hover:bg-gray-100 transform rotate-2",children:"DOCS"})]})]}),a.jsxs("div",{className:"absolute bottom-4 text-center font-bold text-gray-500 font-mono text-sm",children:["POWERED BY ",a.jsx("span",{className:"text-black bg-white px-1 border border-black",children:"REACT FLOW"})," & ",a.jsx("span",{className:"text-black bg-white px-1 border border-black",children:"ZUSTAND"})]})]})}const _v=[{id:"os-scheduler",name:"OS Scheduler",icon:aa,desc:"Visualize CPU Scheduling Algorithms (RR, FCFS)",active:!0,color:"bg-comic-blue"},{id:"pc-architecture",name:"PC Architecture",icon:wv,desc:"Build Computer Systems from Scratch",active:!0,color:"bg-purple-500"},{id:"ram",name:"RAM Simulator",icon:dv,desc:"Paging, Virtual Memory & TLB",active:!0,color:"bg-green-500"},{id:"iot",name:"IoT Network",icon:Eu,desc:"Sensor Networks & MQTT Protocol",active:!0,color:"bg-pink-500"},{id:"caching",name:"Caching System",icon:la,desc:"L1/L2 Cache Hits & Misses",active:!1,color:"bg-comic-yellow"}];function Tv({onSelect:e,onBack:t}){return a.jsxs("div",{className:"min-h-screen bg-comic-cream font-comic p-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-comic-stripes opacity-5 pointer-events-none"}),a.jsxs("div",{className:"container mx-auto max-w-6xl relative z-10",children:[t&&a.jsx("button",{onClick:t,className:"mb-6 bg-white px-6 py-3 border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-xl transform -rotate-1",children:" BACK TO HOME"}),a.jsx("h1",{className:"text-6xl text-center mb-16 text-black drop-shadow-[4px_4px_0_#fff] text-stroke-white",children:"Select Your Lab"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:_v.map(n=>a.jsxs("div",{onClick:()=>n.active&&e(n.id),className:`
                                relative border-4 border-black p-6 shadow-comic-lg transition-all
                                ${n.active?"hover:-translate-y-2 hover:shadow-comic cursor-pointer bg-white":"opacity-70 grayscale cursor-not-allowed bg-gray-100"}
                            `,children:[a.jsx("div",{className:`absolute -top-6 -right-6 w-16 h-16 ${n.color} border-4 border-black rounded-full flex items-center justify-center transform rotate-12`,children:a.jsx(n.icon,{size:32,color:"black"})}),a.jsx("h2",{className:"text-3xl mb-2",children:n.name}),a.jsx("p",{className:"font-body font-bold text-gray-600 mb-4",children:n.desc}),!n.active&&a.jsx("div",{className:"bg-black text-white px-2 py-1 text-sm inline-block transform -rotate-2",children:"COMING SOON"}),n.active&&a.jsx("button",{className:"w-full bg-comic-yellow border-2 border-black font-bold py-2 hover:bg-yellow-300 transition-colors",children:"ENTER LAB"})]},n.id))})]})]})}const Mv={},sf=e=>{let t;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const g=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(v=>v(t,g))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Mv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},Np=e=>e?sf(e):sf;var Sp={exports:{}},Cp={},Ep={exports:{}},jp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=N;function Rv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pv=typeof Object.is=="function"?Object.is:Rv,Av=Br.useState,zv=Br.useEffect,Lv=Br.useLayoutEffect,Iv=Br.useDebugValue;function Dv(e,t){var n=t(),r=Av({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return Lv(function(){s.value=n,s.getSnapshot=t,ll(s)&&i({inst:s})},[e,n,t]),zv(function(){return ll(s)&&i({inst:s}),e(function(){ll(s)&&i({inst:s})})},[e]),Iv(n),n}function ll(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pv(e,n)}catch{return!0}}function Fv(e,t){return t()}var Ov=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fv:Dv;jp.useSyncExternalStore=Br.useSyncExternalStore!==void 0?Br.useSyncExternalStore:Ov;Ep.exports=jp;var $v=Ep.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=N,Bv=$v;function Hv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Uv=typeof Object.is=="function"?Object.is:Hv,Vv=Bv.useSyncExternalStore,qv=da.useRef,Wv=da.useEffect,Qv=da.useMemo,Gv=da.useDebugValue;Cp.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=qv(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Qv(function(){function c(g){if(!u){if(u=!0,d=g,g=r(g),s!==void 0&&o.hasValue){var v=o.value;if(s(v,g))return f=v}return f=g}if(v=f,Uv(d,g))return v;var y=r(g);return s!==void 0&&s(v,y)?(d=g,v):(d=g,f=y)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,s]);var l=Vv(e,i[0],i[1]);return Wv(function(){o.hasValue=!0,o.value=l},[l]),Gv(l),l};Sp.exports=Cp;var Yv=Sp.exports;const _p=nm(Yv),Tp={},{useDebugValue:Xv}=R,{useSyncExternalStoreWithSelector:Kv}=_p;let of=!1;const Zv=e=>e;function Jv(e,t=Zv,n){(Tp?"production":void 0)!=="production"&&n&&!of&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),of=!0);const r=Kv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Xv(r),r}const af=e=>{(Tp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Np(e):e,n=(r,s)=>Jv(t,r,s);return Object.assign(n,t),n},di=e=>e?af(e):af;class lf{constructor(t,n=10,r=5,s=0){this.id=t,this.state="READY",this.totalBurstTime=n,this.remainingTime=n,this.priority=r,this.arrivalTime=s,this.completionTime=0,this.waitingTime=0,this.turnaroundTime=0,this.color=this.getRandomColor(),this.resourcesHeld=[],this.resourcesWaiting=[]}getRandomColor(){const t=["#FF6B6B","#FF44CC"],n=["#4ECDC4","#45B7D1"],r=["#96CEB4","#FFEEAD"],s=this.priority<=3?t:this.priority<=7?n:r;return s[Math.floor(Math.random()*s.length)]}requestResource(t){this.resourcesWaiting.includes(t)||this.resourcesWaiting.push(t)}holdResource(t){this.resourcesHeld.includes(t)||this.resourcesHeld.push(t),this.resourcesWaiting=this.resourcesWaiting.filter(n=>n!==t)}releaseResource(t){this.resourcesHeld=this.resourcesHeld.filter(n=>n!==t)}isWaitingForResource(){return this.resourcesWaiting.length>0}}let e1=class{constructor(t){this.id=t,this.currentProcess=null}isIdle(){return this.currentProcess===null}assignProcess(t,n){this.currentProcess=t,t.state="RUNNING"}tick(){if(this.currentProcess&&(this.currentProcess.remainingTime--,this.currentProcess.remainingTime<=0)){const t=this.currentProcess;return t.state="TERMINATED",this.currentProcess=null,{type:"PROCESS_FINISHED",process:t}}return null}};class cf{constructor(t="RR",n=3){this.readyQueue=[],this.algorithm=t,this.quantum=n,this.quantumTimer=0}addProcess(t){t.state="READY",this.readyQueue.push(t)}schedule(t){if(this.readyQueue.length===0&&t.isIdle())return null;if(this.algorithm==="Priority"?this.readyQueue.sort((n,r)=>n.priority-r.priority):this.algorithm==="SJF"&&this.readyQueue.sort((n,r)=>n.remainingTime-r.remainingTime),this.algorithm==="RR"){if(!t.isIdle()&&(this.quantumTimer++,this.quantumTimer>=this.quantum)){const n=t.currentProcess;n.state="READY",this.readyQueue.push(n),t.currentProcess=null,this.quantumTimer=0}if(t.isIdle()&&this.readyQueue.length>0){const n=this.readyQueue.shift();n.state="RUNNING",t.currentProcess=n,this.quantumTimer=0}}else if(t.isIdle()&&this.readyQueue.length>0){const n=this.readyQueue.shift();n.state="RUNNING",t.currentProcess=n}return t.currentProcess}}class t1{constructor(t,n,r=1){this.id=t,this.type=n,this.capacity=r,this.allocated=0,this.holders=[],this.waitQueue=[]}request(t,n=1){return this.allocated+n<=this.capacity?(this.allocated+=n,this.holders.push({process:t,amount:n}),{success:!0,granted:n}):(this.waitQueue.push({process:t,amount:n}),{success:!1,queued:!0})}release(t,n=1){const r=this.holders.findIndex(s=>s.process.id===t.id);return r!==-1?(this.holders.splice(r,1),this.allocated-=n,this.satisfyWaitQueue(),!0):!1}satisfyWaitQueue(){let t=0;for(;t<this.waitQueue.length;){const{process:n,amount:r}=this.waitQueue[t];this.allocated+r<=this.capacity?(this.allocated+=r,this.holders.push({process:n,amount:r}),this.waitQueue.splice(t,1),n.state="READY"):t++}}isHeldBy(t){return this.holders.some(n=>n.process.id===t.id)}getInfo(){return{id:this.id,type:this.type,capacity:this.capacity,allocated:this.allocated,available:this.capacity-this.allocated,holderCount:this.holders.length,waitQueueLength:this.waitQueue.length}}}class n1{constructor(){this.resources=new Map}registerResource(t,n,r=1){const s=new t1(t,n,r);return this.resources.set(t,s),s}getResource(t){return this.resources.get(t)}detectDeadlock(t){const n=this.buildRAG(t);return this.hasCycle(n)}buildRAG(t){const n=new Map;return t.forEach(r=>n.set(`P${r.id}`,[])),this.resources.forEach((r,s)=>n.set(`R${s}`,[])),this.resources.forEach((r,s)=>{r.holders.forEach(({process:i})=>{const o=`R${s}`,l=`P${i.id}`;n.get(o)||n.set(o,[]),n.get(o).push(l)}),r.waitQueue.forEach(({process:i})=>{const o=`P${i.id}`,l=`R${s}`;n.get(o)||n.set(o,[]),n.get(o).push(l)})}),n}hasCycle(t){const n=new Set,r=new Set,s=i=>{n.add(i),r.add(i);const o=t.get(i)||[];for(const l of o)if(n.has(l)){if(r.has(l))return!0}else if(s(l))return!0;return r.delete(i),!1};for(const i of t.keys())if(!n.has(i)&&s(i))return!0;return!1}getDeadlockedProcesses(t){if(!this.detectDeadlock(t))return[];const n=this.buildRAG(t),r=new Set,s=new Set,i=new Set,o=(l,c=[])=>{s.add(l),i.add(l),c.push(l);const u=n.get(l)||[];for(const d of u)if(!s.has(d))o(d,c);else if(i.has(d)){const f=c.indexOf(d);c.slice(f).forEach(m=>r.add(m))}i.delete(l)};for(const l of n.keys())s.has(l)||o(l);return Array.from(r).filter(l=>l.startsWith("P")).map(l=>l.substring(1))}recoverFromDeadlock(t){const n=this.getDeadlockedProcesses(t);if(n.length===0)return null;const s=t.filter(i=>n.includes(i.id)).reduce((i,o)=>o.priority<i.priority?o:i);return this.resources.forEach(i=>{i.release(s)}),s.state="TERMINATED",s}getAllResourceInfo(){const t=[];return this.resources.forEach(n=>{t.push(n.getInfo())}),t}}const lt=di((e,t)=>({isPlaying:!1,speed:1e3,currentTime:0,cpus:[],scheduler:new cf("RR",3),processes:[],generators:[],resourceManager:new n1,history:[],togglePlay:()=>e(n=>({isPlaying:!n.isPlaying})),setSpeed:n=>e({speed:n}),step:()=>t().tick(),updateQuantum:n=>e(r=>(r.scheduler.quantum=n,{scheduler:r.scheduler})),updateAlgorithm:n=>e(r=>(r.scheduler.algorithm=n,r.scheduler.quantumTimer=0,{scheduler:r.scheduler})),reset:()=>e({currentTime:0,isPlaying:!1,cpus:[],scheduler:new cf("RR",3),processes:[],generators:[],history:[],metrics:{cpuUtilization:0,throughput:0,completedProcesses:0,avgWaitTime:0,avgTurnaroundTime:0,totalWaitTime:0,totalTurnaroundTime:0}}),registerNode:(n,r,s)=>{e(i=>{if(n==="cpu")return{cpus:[...i.cpus,new e1(r)]};if(n==="scheduler")return{scheduler:i.scheduler};if(n==="generator")return{generators:[...i.generators,{id:r,lastSpawn:0}]};if(n==="process"){const o=new lf(r,15);return i.scheduler.addProcess(o),{processes:[...i.processes,o]}}return n==="mutex"?(i.resourceManager.registerResource(r,"mutex",1),console.log(` Registered MUTEX: ${r}`),{resourceManager:i.resourceManager}):{}})},metrics:{cpuUtilization:0,throughput:0,completedProcesses:0,avgWaitTime:0,avgTurnaroundTime:0,totalWaitTime:0,totalTurnaroundTime:0,deadlockCount:0,deadlockDetected:!1},tick:()=>{const{currentTime:n,cpus:r,scheduler:s,processes:i,generators:o,metrics:l}=t();if(r.length===0){console.warn("Simulation requires at least one CPU to run");return}const c=n+1;o.forEach(C=>{if(c-C.lastSpawn>5){const M=`P${Math.floor(Math.random()*1e3)}`,A=new lf(M,Math.floor(Math.random()*10)+5,1,c);s.addProcess(A),C.lastSpawn=c}});let u=[];r.forEach(C=>{s.schedule(C);const M=C.tick();if(M&&M.type==="PROCESS_FINISHED"){const A=M.process;A.completionTime=c,A.turnaroundTime=A.completionTime-A.arrivalTime,A.waitingTime=A.turnaroundTime-A.totalBurstTime,u.push(A)}});const d=t().resourceManager,f=[...s.readyQueue,...r.map(C=>C.currentProcess).filter(Boolean)];f.forEach(C=>{if(C&&C.resourcesHeld.length===0&&C.resourcesWaiting.length===0){const M=Array.from(d.resources.keys());if(M.length>=2){const A=parseInt(C.id.replace(/\D/g,""))%2===0,[L]=A?[M[0],M[1]]:[M[1],M[0]];d.getResource(L).request(C,1).success?C.holdResource(L):(C.requestResource(L),C.state="BLOCKED")}}else if(C&&C.resourcesHeld.length===1&&C.resourcesWaiting.length===0){const M=Array.from(d.resources.keys()),A=C.resourcesHeld[0],L=M.find($=>$!==A);L&&(d.getResource(L).request(C,1).success?C.holdResource(L):(C.requestResource(L),C.state="BLOCKED"))}});const m=r.filter(C=>!C.isIdle()),g=r.length>0?m.length/r.length*100:0;let v=l.totalWaitTime,y=l.totalTurnaroundTime;u.forEach(C=>{v+=C.waitingTime,y+=C.turnaroundTime});const k=l.completedProcesses+u.length,h=s.readyQueue.length+k+r.filter(C=>!C.isIdle()).length,p=h>0?Math.round(v/h):0,x=h>0?Math.round(y/h):0,w=m.map(C=>({time:n,cpuId:C.id,processId:C.currentProcess.id,color:C.currentProcess.color})),E=d.detectDeadlock(f),j=E?(l.deadlockCount||0)+1:l.deadlockCount||0;e(C=>({currentTime:c,history:[...C.history,...w].slice(-100),metrics:{cpuUtilization:Math.round(g),throughput:k>0?(k/c).toFixed(2):0,completedProcesses:k,avgWaitTime:p,avgTurnaroundTime:x,totalWaitTime:v,totalTurnaroundTime:y,deadlockCount:j,deadlockDetected:E}}))}})),r1={};function s1(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Xs=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Xs(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Xs(r)(n)}}}},i1=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,h)=>({...h,...k}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...k)},r,s);const d=Xs(i.serialize),f=()=>{const k=i.partialize({...r()});let h;const p=d({state:k,version:i.version}).then(x=>u.setItem(i.name,x)).catch(x=>{h=x});if(h)throw h;return p},m=s.setState;s.setState=(k,h)=>{m(k,h),f()};const g=e((...k)=>{n(...k),f()},r,s);let v;const y=()=>{var k;if(!u)return;o=!1,l.forEach(p=>p(r()));const h=((k=i.onRehydrateStorage)==null?void 0:k.call(i,r()))||void 0;return Xs(u.getItem.bind(u))(i.name).then(p=>{if(p)return i.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==i.version){if(i.migrate)return i.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var x;return v=i.merge(p,(x=r())!=null?x:g),n(v,!0),f()}).then(()=>{h?.(v,void 0),o=!0,c.forEach(p=>p(v))}).catch(p=>{h?.(void 0,p)})};return s.persist={setOptions:k=>{i={...i,...k},k.getStorage&&(u=k.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:k=>(l.add(k),()=>{l.delete(k)}),onFinishHydration:k=>(c.add(k),()=>{c.delete(k)})},y(),v||g},o1=(e,t)=>(n,r,s)=>{let i={storage:s1(()=>localStorage),partialize:y=>y,version:0,merge:(y,k)=>({...k,...y}),...t},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,s);const d=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},f=s.setState;s.setState=(y,k)=>{f(y,k),d()};const m=e((...y)=>{n(...y),d()},r,s);s.getInitialState=()=>m;let g;const v=()=>{var y,k;if(!u)return;o=!1,l.forEach(p=>{var x;return p((x=r())!=null?x:m)});const h=((k=i.onRehydrateStorage)==null?void 0:k.call(i,(y=r())!=null?y:m))||void 0;return Xs(u.getItem.bind(u))(i.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==i.version){if(i.migrate)return[!0,i.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var x;const[w,E]=p;if(g=i.merge(E,(x=r())!=null?x:m),n(g,!0),w)return d()}).then(()=>{h?.(g,void 0),g=r(),o=!0,c.forEach(p=>p(g))}).catch(p=>{h?.(void 0,p)})};return s.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||v(),g||m},a1=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((r1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),i1(e,t)):o1(e,t),l1=a1,wn=di(l1((e,t)=>({progress:{"os-scheduler":{},"pc-architecture":{},"ram-simulator":{},"iot-network":{}},unlockedLevels:["os-1-intro","pc-1-intro","ram-1-intro","iot-1-first-sensor"],achievements:[],totalStars:0,totalLevelsCompleted:0,totalPlaytime:0,achievements:[],currentLevel:null,completeLevel:(n,r)=>{const s=t().levelProgress?.[n]||{},i=Math.max(s.stars||0,r.stars),o=!s.completed,l=i>(s.stars||0);e(c=>({levelProgress:{...c.levelProgress,[n]:{completed:!0,stars:i,bestTime:Math.min(s.bestTime||1/0,r.time||1/0),bestMetrics:r.metrics,lastPlayed:Date.now(),attempts:(s.attempts||0)+1,history:[...(s.history||[]).slice(-4),{timestamp:Date.now(),stars:r.stars,time:r.time,metrics:r.metrics}]}},totalStars:c.totalStars+(l?i-(s.stars||0):0),totalLevelsCompleted:o?c.totalLevelsCompleted+1:c.totalLevelsCompleted})),r.unlocks&&(t().unlockLevel(r.unlocks),console.log(` Unlocked next level: ${r.unlocks}`)),t().checkAchievements(n,r),console.log(` Level ${n} completed with ${i} stars`)},unlockLevel:n=>{e(r=>r.unlockedLevels.includes(n)?r:{unlockedLevels:[...r.unlockedLevels,n]})},isLevelUnlocked:n=>t().unlockedLevels.includes(n),getLevelStars:n=>t().levelProgress?.[n]?.stars||0,getLevelProgress:n=>t().levelProgress?.[n]||null,setCurrentLevel:n=>{e({currentLevel:n})},addPlaytime:n=>{e(r=>({totalPlaytime:r.totalPlaytime+n}))},resetAllProgress:()=>{e({levelProgress:{},unlockedLevels:["os-1-intro","pc-1-intro","ram-1-intro","iot-1-first-sensor"],totalStars:0,totalLevelsCompleted:0,totalPlaytime:0,achievements:[],currentLevel:null})},forceUnlockFirstLevels:()=>{e({unlockedLevels:["os-1-intro","pc-1-intro","ram-1-intro","iot-1-first-sensor"]})},getOverallProgress:()=>({completed:t().totalLevelsCompleted,total:80,percentage:t().totalLevelsCompleted/80*100}),getModuleProgress:n=>{const r=Object.keys(t().levelProgress).filter(o=>o.startsWith(n)),s=r.filter(o=>t().levelProgress[o]?.completed),i=r.reduce((o,l)=>o+(t().levelProgress[l]?.stars||0),0);return{completed:s.length,totalStars:i,maxStars:r.length*3,percentage:r.length>0?s.length/r.length*100:0}},checkAchievements:(n,r)=>{const s=t().achievements,i=[];r.stars===3&&t().levelProgress[n]?.attempts===0&&(s.includes("first-try-perfect")||i.push({id:"first-try-perfect",title:" First Try Perfect",description:"Got 3 stars on first attempt",timestamp:Date.now()})),r.time&&r.time<30&&(s.includes("speed-runner")||i.push({id:"speed-runner",title:" Speed Runner",description:"Completed a level in under 30 seconds",timestamp:Date.now()})),Object.values(t().levelProgress).filter(u=>u.stars===3).length>=10&&!s.includes("perfectionist")&&i.push({id:"perfectionist",title:" Perfectionist",description:"Earned 3 stars on 10 levels",timestamp:Date.now()});const l=n.split("-")[0];return t().getModuleProgress(l).completed>=20&&!s.includes(`${l}-master`)&&i.push({id:`${l}-master`,title:` ${l.toUpperCase()} Master`,description:`Completed all ${l} levels`,timestamp:Date.now()}),i.length>0&&e(u=>({achievements:[...u.achievements,...i.map(d=>d.id)]})),i},getLeaderboardData:()=>({totalStars:t().totalStars,levelsCompleted:t().totalLevelsCompleted,playtime:t().totalPlaytime,achievements:t().achievements.length})}),{name:"vsb-progress",version:3,migrate:(e,t)=>t<3?{...e,unlockedLevels:["os-1-intro","pc-1-intro","ram-1-intro","iot-1-first-sensor"]}:e}));class fa{validate(t,n){const r=t.constraints||{},s=n.metrics||{},i=[],o=[];if(r.maxProcesses!==void 0){const u=n.processCount||n.processes?.length||0;u>r.maxProcesses&&i.push(`Too many processes: ${u}/${r.maxProcesses}`)}if(r.minProcesses!==void 0){const u=n.processCount||n.processes?.length||0;u<r.minProcesses&&i.push(`Not enough processes: ${u}/${r.minProcesses}`)}if(r.allowedSchedulers&&n.scheduler){const u=n.scheduler.algorithm||n.scheduler;r.allowedSchedulers.includes(u)||i.push(`Wrong scheduler: ${u} not allowed. Use: ${r.allowedSchedulers.join(", ")}`)}if(r.allowedComponents&&n.components){const d=n.components.map(f=>f.type).filter(f=>!r.allowedComponents.includes(f));d.length>0&&i.push(`Disallowed components used: ${d.join(", ")}`)}if(r.requiredComponents){const u=(n.components||[]).map(f=>f.type),d=r.requiredComponents.filter(f=>!u.includes(f));d.length>0&&i.push(`Missing required components: ${d.join(", ")}`)}if(r.requiredMetrics)for(const[u,d]of Object.entries(r.requiredMetrics)){const f=s[u];if(f===void 0){o.push(`Metric ${u} not available`);continue}d.max!==void 0&&f>d.max&&i.push(`${u} too high: ${f.toFixed(2)} > ${d.max}`),d.min!==void 0&&f<d.min&&i.push(`${u} too low: ${f.toFixed(2)} < ${d.min}`),d.exact!==void 0&&Math.abs(f-d.exact)>.01&&i.push(`${u} must be exactly ${d.exact}, got ${f.toFixed(2)}`)}if(t.customValidation&&typeof t.customValidation=="function")try{const u=t.customValidation(n);u.passed||i.push(...u.violations||[]),u.warnings&&o.push(...u.warnings)}catch(u){i.push(`Custom validation error: ${u.message}`)}const l=i.length===0?this.calculateStars(t.starRating,s,n):0,c=this.generateFeedback(i,o,s,t,l);return{passed:i.length===0,violations:i,warnings:o,stars:l,metrics:s,feedback:c,timestamp:Date.now()}}calculateStars(t,n,r){return t?typeof t=="string"||typeof t=="function"?this.customStarLogic(t,n,r):t[3]&&this.meetsRequirements(t[3],n,r)?3:t[2]&&this.meetsRequirements(t[2],n,r)?2:(t[1]&&this.meetsRequirements(t[1],n,r),1):1}meetsRequirements(t,n,r){if(!t)return!1;for(const[s,i]of Object.entries(t))if(s==="scheduler"&&(r.scheduler?.algorithm||r.scheduler)!==i||n[s]!==void 0&&(typeof i=="number"&&n[s]>i||i.max&&n[s]>i.max||i.min&&n[s]<i.min))return!1;return!0}customStarLogic(t,n,r){if(typeof t=="function")return t(n,r);let s=0;const i={avgWaitTime:-1,avgTurnaroundTime:-1,cpuUtilization:1,throughput:1,deliveryRate:1,hitRate:1};for(const[o,l]of Object.entries(i))n[o]!==void 0&&(s+=n[o]*l);return s>100?3:s>50?2:1}generateFeedback(t,n,r,s,i){if(t.length>0)return{type:"error",title:" Objective Not Met",message:t[0],allViolations:t,suggestions:this.getSuggestions(t,s)};const o={3:" Perfect!",2:" Good Job!",1:" Complete!"},l=s.starRating?.[i],c=typeof l=="object"?l.hint:typeof l=="string"?l:"Level complete!",u=this.getDynamicHints(r,s);return{type:"success",title:o[i]||"Complete!",message:c,hints:u,nextLevel:s.unlocks,warnings:n}}getSuggestions(t,n){const r=[];return t.forEach(s=>{s.includes("Too many processes")&&r.push("Remove some process generators to reduce process count"),s.includes("Wrong scheduler")&&r.push(`Change to an allowed scheduler: ${n.constraints.allowedSchedulers?.join(", ")}`),s.includes("avgWaitTime")&&(r.push("Try using SJF (Shortest Job First) to minimize wait time"),r.push("Reduce time quantum to improve responsiveness")),s.includes("Missing required")&&r.push("Add all required components from the sidebar")}),r}getDynamicHints(t,n){const r=[];if(n.hints)for(const s of n.hints)this.evaluateTrigger(s.trigger,t)&&r.push(s.message);return t.avgWaitTime>20&&r.push(" Try using SJF scheduler for shorter wait times"),t.cpuUtilization<50&&r.push(" Add more processes to improve CPU utilization"),t.contextSwitches>50&&r.push(" Increase time quantum to reduce context switches"),r}evaluateTrigger(t,n){if(!t||typeof t!="string")return!1;const r=t.match(/(\w+)\s*([><=!]+)\s*(\d+)/);if(!r)return!1;const[,s,i,o]=r,l=n[s],c=parseFloat(o);if(l===void 0)return!1;switch(i){case">":return l>c;case"<":return l<c;case">=":return l>=c;case"<=":return l<=c;case"==":return l===c;case"!=":return l!==c;default:return!1}}}function ma({levels:e,moduleTitle:t,moduleSubtitle:n,onSelectLevel:r,onSandboxMode:s,onBack:i}){const o=wn(y=>y.isLevelUnlocked),l=wn(y=>y.getLevelStars),c=wn(y=>y.getLevelProgress),[u,d]=N.useState("all"),f=["all","beginner","intermediate","advanced","expert"],m=u==="all"?e:e.filter(y=>y.difficulty===u),g=y=>({beginner:"bg-green-400 border-green-600",intermediate:"bg-blue-400 border-blue-600",advanced:"bg-orange-400 border-orange-600",expert:"bg-red-400 border-red-600"})[y]||"bg-gray-300 border-gray-500",v=({stars:y})=>a.jsx("div",{className:"flex gap-1",children:[1,2,3].map(k=>a.jsx(Ys,{size:18,className:k<=y?"fill-yellow-300 text-black stroke-black stroke-2":"text-gray-400 stroke-black stroke-2"},k))});return a.jsxs("div",{className:"w-full h-full bg-comic-cream overflow-y-auto relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-10 pointer-events-none"}),a.jsxs("div",{className:"max-w-7xl mx-auto p-8 relative z-10",children:[a.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[i&&a.jsx("button",{onClick:i,className:"bg-white px-4 py-3 border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-xl transform -rotate-2",children:" BACK"}),a.jsxs("div",{className:"transform -rotate-1",children:[a.jsxs("h1",{className:"text-5xl font-comic text-comic-pink drop-shadow-[4px_4px_0_#000] uppercase tracking-wider border-4 border-black bg-white px-6 py-3 inline-block shadow-comic mb-3",children:[" ",t," "]}),a.jsx("p",{className:"font-comic text-xl ml-2 bg-comic-yellow px-3 py-1 border-2 border-black inline-block transform rotate-1",children:n})]})]}),a.jsx("button",{onClick:s,className:"bg-comic-yellow text-black px-6 py-3 border-4 border-black shadow-comic font-comic text-xl hover:shadow-none hover:translate-y-1 transition-all transform rotate-1 font-bold",children:" SANDBOX MODE"})]}),a.jsx("div",{className:"flex gap-3 mb-8 flex-wrap",children:f.map(y=>a.jsx("button",{onClick:()=>d(y),className:`px-5 py-2 border-3 border-black font-comic text-lg uppercase tracking-wide transition-all ${u===y?"bg-black text-comic-yellow shadow-comic scale-105":"bg-white hover:bg-comic-yellow shadow-comic-sm hover:shadow-comic hover:scale-105"}`,children:y},y))}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-comic-yellow border-4 border-black shadow-comic p-4 transform -rotate-1 hover:rotate-0 transition-transform",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Cv,{size:32,className:"text-black stroke-[3]"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl font-bold",children:e.reduce((y,k)=>y+(l(k.id)||0),0)}),a.jsx("div",{className:"text-sm uppercase tracking-wide font-comic",children:"Total Stars"})]})]})}),a.jsx("div",{className:"bg-comic-blue border-4 border-black shadow-comic p-4 transform rotate-1 hover:rotate-0 transition-transform",children:a.jsxs("div",{className:"flex items-center justify-between text-white",children:[a.jsx(ui,{size:32,className:"stroke-[3]"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold",children:[e.filter(y=>c(y.id)?.completed).length,"/",e.length]}),a.jsx("div",{className:"text-sm uppercase tracking-wide font-comic",children:"Completed"})]})]})}),a.jsx("div",{className:"bg-comic-pink border-4 border-black shadow-comic p-4 transform -rotate-1 hover:rotate-0 transition-transform",children:a.jsxs("div",{className:"flex items-center justify-between text-white",children:[a.jsx(Ys,{size:32,className:"stroke-[3] fill-white"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(e.filter(y=>c(y.id)?.completed).length/e.length*100)||0,"%"]}),a.jsx("div",{className:"text-sm uppercase tracking-wide font-comic",children:"Progress"})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((y,k)=>{const h=o(y.id),p=l(y.id),x=c(y.id);return a.jsxs("button",{onClick:()=>h&&r(y),disabled:!h,className:`
                                    p-5 border-4 border-black text-left transition-all font-comic
                                    ${h?"bg-white shadow-comic hover:shadow-comic-hover hover:-translate-y-1 cursor-pointer":"bg-gray-200 opacity-60 cursor-not-allowed"}
                                `,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 border-b-2 border-black pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xl font-bold bg-black text-white px-2 py-1",children:["#",k+1]}),!h&&a.jsx(wp,{size:18,className:"stroke-[3]"})]}),h&&x?.completed?a.jsx(v,{stars:p}):h?a.jsx("span",{className:"bg-comic-yellow px-3 py-1 border-2 border-black text-xs font-bold uppercase transform -rotate-3",children:"NEW!"}):null]}),a.jsx("h3",{className:"font-comic text-xl mb-2 text-black uppercase tracking-wide leading-tight",children:y.title}),a.jsx("p",{className:"text-sm mb-4 line-clamp-2 leading-snug",children:y.objective.description}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-xs px-3 py-1 border-2 border-black font-bold uppercase ${g(y.difficulty)}`,children:y.difficulty}),y.estimatedTime&&a.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 border-2 border-black flex items-center gap-1",children:[a.jsx(fv,{size:12,className:"stroke-[2.5]"}),y.estimatedTime]})]}),x?.attempts>0&&a.jsx("div",{className:"mt-3 pt-3 border-t-2 border-dashed border-gray-400",children:a.jsxs("p",{className:"text-xs font-bold uppercase",children:["Attempts: ",x.attempts," | Best: ",p,""]})})]},y.id)})}),m.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"bg-white border-4 border-black shadow-comic p-8 inline-block transform rotate-2",children:a.jsx("p",{className:"text-2xl font-comic uppercase",children:"No Levels Found! "})})})]})]})}function ha({level:e,validationResult:t}){const[n,r]=N.useState(!0);if(!e)return null;const{objective:s,constraints:i,starRating:o}=e,l=t!=null;return a.jsxs("div",{className:"absolute top-4 left-4 bg-white border-4 border-black shadow-comic max-w-sm z-40 font-comic",children:[a.jsxs("button",{onClick:()=>r(!n),className:"w-full px-4 py-3 flex items-center justify-between bg-comic-yellow border-b-4 border-black hover:bg-yellow-300 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ju,{size:20,className:"stroke-[3]"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"font-bold text-base uppercase tracking-wide",children:e.title}),a.jsx("p",{className:"text-xs uppercase",children:e.difficulty})]})]}),n?a.jsx(xp,{size:24,className:"stroke-[3]"}):a.jsx(yp,{size:24,className:"stroke-[3]"})]}),n&&a.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4 pb-3 border-b-2 border-dashed border-gray-400",children:[a.jsx("h4",{className:"font-bold text-sm uppercase mb-2 bg-black text-white px-2 py-1 inline-block",children:" Your Mission"}),a.jsx("p",{className:"text-sm font-bold leading-snug",children:s.description})]}),s.requirements&&s.requirements.length>0&&a.jsxs("div",{className:"mb-4 pb-3 border-b-2 border-dashed border-gray-400",children:[a.jsx("h4",{className:"font-bold text-sm uppercase mb-2",children:" Must Do:"}),a.jsx("ul",{className:"space-y-1",children:s.requirements.map((c,u)=>a.jsxs("li",{className:"text-xs flex items-start gap-2 leading-tight",children:[a.jsx("span",{className:"text-comic-pink text-lg",children:""}),a.jsx("span",{className:"font-semibold",children:c})]},u))})]}),a.jsxs("div",{className:"mb-4 pb-3 bg-comic-blue border-3 border-black p-3 -mx-1 shadow-sm",children:[a.jsxs("h4",{className:"font-bold text-sm uppercase mb-2 text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""})," HOW TO SUBMIT"]}),a.jsxs("ol",{className:"space-y-1.5 text-white text-xs font-bold",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"bg-white text-black px-1.5",children:"1"}),a.jsx("span",{children:"Drag components from sidebar"})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"bg-white text-black px-1.5",children:"2"}),a.jsx("span",{children:"Click PLAY  button"})]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("span",{className:"bg-white text-black px-1.5",children:"3"}),a.jsx("span",{children:'Click "Check Solution" (top right)'})]})]})]}),o&&typeof o=="object"&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-bold text-sm uppercase mb-2",children:" Star Goals"}),a.jsx("div",{className:"space-y-1",children:[3,2,1].map(c=>{const u=o[c];if(!u)return null;const d=typeof u=="object"&&u.hint?u.hint.replace(/+/g,"").trim():typeof u=="string"?u:`${c} stars`;return a.jsxs("div",{className:"flex items-center gap-2 text-xs bg-gray-100 border-2 border-black px-2 py-1",children:[a.jsx("div",{className:"flex",children:Array.from({length:c}).map((f,m)=>a.jsx(Ys,{size:12,className:"fill-yellow-300 text-black stroke-black stroke-2"},m))}),a.jsx("span",{className:"font-semibold",children:d})]},c)})})]}),l&&a.jsxs("div",{className:`p-3 border-4 border-black shadow-comic ${t.passed?"bg-green-300":"bg-red-300"}`,children:[a.jsxs("div",{className:"flex items-start gap-2",children:[t.passed?a.jsx(gp,{className:"stroke-black stroke-[3] flex-shrink-0",size:24}):a.jsx(Ev,{className:"stroke-black stroke-[3] flex-shrink-0",size:24}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-sm uppercase",children:t.feedback?.title||(t.passed?" Success!":" Not Yet!")}),a.jsx("p",{className:"text-sm font-semibold mt-1",children:t.feedback?.message})]}),t.passed&&t.stars>0&&a.jsx("div",{className:"flex",children:Array.from({length:t.stars}).map((c,u)=>a.jsx(Ys,{size:20,className:"fill-yellow-300 text-black stroke-black stroke-2"},u))})]}),!t.passed&&t.violations&&t.violations.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t-2 border-black",children:[a.jsx("p",{className:"text-xs font-bold uppercase",children:" Issues:"}),a.jsx("ul",{className:"space-y-0.5 mt-1",children:t.violations.slice(0,2).map((c,u)=>a.jsxs("li",{className:"text-xs font-semibold flex gap-1",children:[a.jsx("span",{children:""}),a.jsx("span",{children:c})]},u))})]}),t.feedback?.suggestions&&t.feedback.suggestions.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t-2 border-black",children:[a.jsx("p",{className:"text-xs font-bold uppercase",children:" Try This:"}),a.jsx("ul",{className:"space-y-0.5 mt-1",children:t.feedback.suggestions.slice(0,2).map((c,u)=>a.jsx("li",{className:"text-xs font-semibold",children:c},u))})]})]})]}),!n&&a.jsx("div",{className:"px-4 py-2 bg-gray-100 border-t-2 border-black",children:a.jsx("p",{className:"text-xs uppercase font-bold text-center",children:" Click to expand"})})]})}const c1=[{id:"os-1-intro",title:"Introduction to Scheduling",difficulty:"beginner",estimatedTime:"5 min",module:"os-scheduler",objective:{description:"Schedule 3 processes using Round Robin",requirements:["Use Round Robin scheduler","Create exactly 3 processes","Average wait time < 20ms"]},constraints:{maxProcesses:3,minProcesses:3,allowedSchedulers:["RR"],allowedComponents:["generator","scheduler","cpu","process"],requiredMetrics:{avgWaitTime:{max:20}}},initialSetup:{nodes:[{id:"gen-1",type:"generator",position:{x:100,y:150},data:{spawnRate:5}},{id:"sched-1",type:"scheduler",position:{x:300,y:150},data:{algorithm:"RR",quantum:4}},{id:"cpu-1",type:"cpu",position:{x:500,y:150},data:{}}],edges:[{source:"gen-1",target:"sched-1"},{source:"sched-1",target:"cpu-1"}]},starRating:{3:{avgWaitTime:12,hint:" Excellent! Optimal quantum size!"},2:{avgWaitTime:16,hint:" Good! Try quantum=4 for better results."},1:{avgWaitTime:20,hint:" Complete! Adjust quantum to improve wait time."}},hints:[{trigger:"avgWaitTime > 18",message:"Try reducing time quantum to 4"},{trigger:"contextSwitches > 15",message:"Too many context switches! Increase quantum."},{trigger:"cpuUtilization < 80",message:"CPU is idle. Make sure processes are arriving."}],tutorialSteps:["Components are already placed for you","Click the play button () to start simulation","Watch processes move through the scheduler","Observe metrics in the panel on the right","Goal: Average wait time should be < 20ms"],unlocks:"os-2-multi-algo"},{id:"os-2-multi-algo",title:"Algorithm Comparison",difficulty:"beginner",estimatedTime:"7 min",module:"os-scheduler",locked:!0,objective:{description:"Find the best scheduler for 5 processes",challenge:"Minimize average wait time below 10ms"},constraints:{maxProcesses:5,minProcesses:5,allowedSchedulers:["RR","FCFS","SJF","Priority"],requiredMetrics:{avgWaitTime:{max:10}}},starRating:{3:{avgWaitTime:6,scheduler:"SJF",hint:" Perfect! SJF is optimal for this workload!"},2:{avgWaitTime:8,hint:" Good! Try SJF for even better results."},1:{avgWaitTime:10,hint:" Complete! Experiment with different algorithms."}},hints:[{trigger:'scheduler == "RR"',message:"Round Robin works, but SJF is better for this workload"},{trigger:'scheduler == "FCFS"',message:"FCFS is simple but not optimal. Try SJF!"},{trigger:"avgWaitTime > 12",message:"SJF (Shortest Job First) minimizes average wait time"}],unlocks:"os-3-quantum-tuning"},{id:"os-3-quantum-tuning",title:"Quantum Tuning Challenge",difficulty:"beginner",estimatedTime:"8 min",module:"os-scheduler",locked:!0,objective:{description:"Find the optimal time quantum for Round Robin",challenge:"Balance response time and context switches"},constraints:{maxProcesses:6,allowedSchedulers:["RR"],requiredMetrics:{avgWaitTime:{max:12},contextSwitches:{max:30}}},starRating:{3:{avgWaitTime:8,contextSwitches:20,hint:" Perfect balance! Quantum = 4 is ideal."},2:{avgWaitTime:10,contextSwitches:25,hint:" Good! Try quantum = 4-5."},1:{avgWaitTime:12,hint:" Complete! Experiment with quantum size."}},hints:[{trigger:"contextSwitches > 35",message:"Too many switches! Increase quantum size"},{trigger:"avgWaitTime > 15",message:"Wait time too high! Decrease quantum size"}],unlocks:"os-4-priority-scheduling"},{id:"os-4-priority-scheduling",title:"Priority Scheduling",difficulty:"intermediate",estimatedTime:"10 min",module:"os-scheduler",locked:!0,objective:{description:"Schedule processes with different priorities",challenge:"High priority processes should run first"},constraints:{maxProcesses:8,allowedSchedulers:["Priority"],requiredMetrics:{avgWaitTime:{max:15}}},starRating:{3:{avgWaitTime:10,hint:" Excellent priority handling!"},2:{avgWaitTime:12,hint:" Good! Watch for starvation."},1:{avgWaitTime:15,hint:" Complete! Priority scheduling works!"}},unlocks:"os-5-deadlock-intro"},{id:"os-5-deadlock-intro",title:"Deadlock Detection 101",difficulty:"intermediate",estimatedTime:"12 min",module:"os-scheduler",locked:!0,objective:{description:"Create a simple deadlock scenario",challenge:"Make 2 processes wait for each other's resources"},constraints:{maxProcesses:2,requiredComponents:["scheduler","cpu","mutex"],customValidation:e=>{const t=e.metrics.deadlockCount>0;return{passed:t,violations:t?[]:["No deadlock detected. Create circular wait."]}}},starRating:{3:"Deadlock created with minimal resources",2:"Deadlock created",1:"Deadlock eventually detected"},hints:[{trigger:"deadlockCount == 0",message:"Process 1 needs Resource A then B, Process 2 needs B then A"}],unlocks:"os-6-deadlock-resolution"},{id:"os-6-deadlock-resolution",title:"Breaking the Deadlock",difficulty:"intermediate",estimatedTime:"15 min",module:"os-scheduler",locked:!0,objective:{description:"Create a deadlock, then resolve it without killing processes",phases:["Phase 1: Create valid deadlock with 4 resources","Phase 2: Resolve gracefully using resource release"]},constraints:{phasedValidation:!0},phaseValidation:{phase1:{check:e=>e.deadlockDetected===!0,feedback:"Deadlock detected! Now try to resolve it."},phase2:{check:e=>e.deadlockDetected===!1&&e.processesKilled===0,feedback:"Excellent! Deadlock resolved gracefully."}},starRating:{3:"Resolve in < 5 resource operations",2:"Resolve in < 10 operations",1:"Resolve eventually"},unlocks:"os-7-cpu-bound-vs-io"},{id:"os-7-cpu-bound-vs-io",title:"CPU-Bound vs I/O-Bound",difficulty:"intermediate",estimatedTime:"12 min",module:"os-scheduler",locked:!0,objective:{description:"Schedule a mix of CPU-intensive and I/O-intensive processes",challenge:"Maximize CPU utilization while minimizing I/O wait"},constraints:{maxProcesses:10,allowedSchedulers:["RR","MLFQ"],requiredMetrics:{cpuUtilization:{min:85},avgWaitTime:{max:15}}},starRating:{3:{cpuUtilization:95,avgWaitTime:10,hint:" Perfect balance!"},2:{cpuUtilization:90,avgWaitTime:13,hint:" Good! MLFQ handles mixed workloads well."},1:{cpuUtilization:85,avgWaitTime:15,hint:" Complete! Try MLFQ for better results."}},unlocks:"os-8-multi-cpu"},{id:"os-8-multi-cpu",title:"Multi-Core Scheduling",difficulty:"intermediate",estimatedTime:"15 min",module:"osto-scheduler",locked:!0,objective:{description:"Balance load across 2 CPUs"},constraints:{minCPUs:2,maxProcesses:12,requiredMetrics:{cpuUtilization:{min:80}}},unlocks:"os-9-real-time-intro"},{id:"os-9-real-time-intro",title:"Real-Time Scheduling Basics",difficulty:"intermediate",estimatedTime:"15 min",module:"os-scheduler",locked:!0,objective:{description:"Use EDF to meet deadlines"},constraints:{allowedSchedulers:["EDF"],requiredMetrics:{deadlinesMissed:{max:0}}},unlocks:"os-10-throughput-challenge"},{id:"os-10-throughput-challenge",title:"Maximize Throughput",difficulty:"intermediate",estimatedTime:"12 min",module:"os-scheduler",locked:!0,objective:{description:"Process 20 jobs as fast as possible"},constraints:{maxProcesses:20,requiredMetrics:{throughput:{min:2}}},starRating:{3:{throughput:3},2:{throughput:2.5},1:{throughput:2}},unlocks:"os-11-fairness"},{id:"os-11-fairness",title:"Fair Share Scheduling",difficulty:"advanced",estimatedTime:"20 min",module:"os-scheduler",locked:!0,objective:{description:"Ensure all processes get fair CPU time"},constraints:{allowedSchedulers:["FairShare"],requiredMetrics:{fairnessIndex:{min:.9}}},unlocks:"os-12-starvation"},{id:"os-12-starvation",title:"Preventing Starvation",difficulty:"advanced",estimatedTime:"18 min",module:"os-scheduler",locked:!0,objective:{description:"Ensure low-priority processes don't starve"},constraints:{requiredMetrics:{maxWaitTime:{max:100}}},unlocks:"os-13-convoy-effect"},{id:"os-13-convoy-effect",title:"Avoiding Convoy Effect",difficulty:"advanced",estimatedTime:"20 min",module:"os-scheduler",locked:!0,objective:{description:"Minimize convoy effect with FCFS"},unlocks:"os-14-aging"},{id:"os-14-aging",title:"Priority Aging",difficulty:"advanced",estimatedTime:"22 min",module:"os-scheduler",locked:!0,objective:{description:"Implement priority aging to prevent starvation"},unlocks:"os-15-lottery"},{id:"os-15-lottery",title:"Lottery Scheduling",difficulty:"advanced",estimatedTime:"20 min",module:"os-scheduler",locked:!0,objective:{description:"Use lottery scheduling for proportional share"},constraints:{allowedSchedulers:["Lottery"]},unlocks:"os-16-gang-scheduling"},{id:"os-16-gang-scheduling",title:"Gang Scheduling",difficulty:"expert",estimatedTime:"25 min",module:"os-scheduler",locked:!0,objective:{description:"Schedule related processes together"},unlocks:"os-17-cache-aware"},{id:"os-17-cache-aware",title:"Cache-Aware Scheduling",difficulty:"expert",estimatedTime:"30 min",module:"os-scheduler",locked:!0,objective:{description:"Minimize cache misses with smart scheduling"},unlocks:"os-18-power-aware"},{id:"os-18-power-aware",title:"Power-Aware Scheduling",difficulty:"expert",estimatedTime:"25 min",module:"os-scheduler",locked:!0,objective:{description:"Minimize power consumption while meeting SLA"},unlocks:"os-19-heterogeneous"},{id:"os-19-heterogeneous",title:"Heterogeneous Multi-Core",difficulty:"expert",estimatedTime:"30 min",module:"os-scheduler",locked:!0,objective:{description:"Schedule on big.LITTLE architecture"},unlocks:"os-20-ultimate"},{id:"os-20-ultimate",title:"The Ultimate Scheduler",difficulty:"expert",estimatedTime:"40 min",module:"os-scheduler",locked:!0,objective:{description:"Handle a complex mixed workload optimally",challenge:"Meet all constraints simultaneously"},constraints:{processes:"Mix of CPU-bound, I/O-bound, real-time, and interactive",mustUse:["Priority","Resources"],targetMetrics:{avgWaitTime:{max:8},avgTurnaroundTime:{max:25},cpuUtilization:{min:85},deadlinesMissed:{max:0},fairnessIndex:{min:.85}}},starRating:"Based on combined score of all metrics",unlocks:null}];function u1(){const e=(n,r,s)=>{n.dataTransfer.setData("application/reactflow",r),n.dataTransfer.setData("application/label",s),n.dataTransfer.effectAllowed="move"},t=()=>{window.dispatchEvent(new CustomEvent("showResourceTutorial"))};return a.jsxs("div",{className:"w-48 bg-comic-cream border-r-4 border-black p-4 overflow-y-auto h-full",children:[a.jsx("h2",{className:"font-comic text-2xl mb-4 bg-comic-yellow border-4 border-black p-2 text-center transform -rotate-1",children:"Components"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-comic-blue text-white px-2 py-1 border-2 border-black",children:"OS COMPONENTS"}),a.jsxs("div",{className:"bg-comic-blue text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"cpu","CPU Core"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"CPU Core"}),a.jsx("div",{className:"text-[10px]",children:"Processing Unit"})]}),a.jsxs("div",{className:"bg-comic-yellow text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"scheduler","Scheduler"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Scheduler"}),a.jsx("div",{className:"text-[10px]",children:"Process Manager"})]}),a.jsxs("div",{className:"bg-green-400 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"process","Process"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Process"}),a.jsx("div",{className:"text-[10px]",children:"Task/Job"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-comic-pink text-white px-2 py-1 border-2 border-black",children:"HELPERS"}),a.jsxs("div",{className:"bg-comic-pink text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"generator","Process Generator"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Generator"}),a.jsx("div",{className:"text-[10px]",children:"Spawns Processes"})]})]}),a.jsxs("div",{className:"border-t-4 border-black pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-comic text-sm bg-purple-400 text-black px-2 py-1 border-2 border-black",children:"RESOURCES"}),a.jsx("button",{onClick:t,className:"bg-purple-400 border-2 border-black px-2 py-1 text-xs font-bold hover:bg-purple-500",title:"How to use resources",children:"?"})]}),a.jsxs("div",{className:"bg-purple-400 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"memory","Memory Resource"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Memory"}),a.jsx("div",{className:"text-[10px]",children:"Shared RAM"})]}),a.jsxs("div",{className:"bg-orange-400 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"mutex","Mutex Lock"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Mutex"}),a.jsx("div",{className:"text-[10px]",children:"Lock/Unlock"})]}),a.jsxs("div",{className:"bg-teal-400 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:n=>e(n,"iodevice","I/O Device"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"I/O Device"}),a.jsx("div",{className:"text-[10px]",children:"Disk/Network"})]})]})]})}function Pe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Pe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:d1}=R,{useSyncExternalStoreWithSelector:f1}=_p,m1=e=>e;function Mp(e,t=m1,n){const r=f1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return d1(r),r}const uf=(e,t)=>{const n=Np(e),r=(s,i=t)=>Mp(n,s,i);return Object.assign(r,n),r},h1=(e,t)=>e?uf(e,t):uf;function je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var p1={value:()=>{}};function pa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ro(n)}function ro(e){this._=e}function g1(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ro.prototype=pa.prototype={constructor:ro,on:function(e,t){var n=this._,r=g1(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=y1(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=df(n[s],e.name,t);else if(t==null)for(s in n)n[s]=df(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ro(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function y1(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function df(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=p1,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hc="http://www.w3.org/1999/xhtml";const ff={svg:"http://www.w3.org/2000/svg",xhtml:hc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ga(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ff.hasOwnProperty(t)?{space:ff[t],local:e}:e}function x1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hc&&t.documentElement.namespaceURI===hc?t.createElement(e):t.createElementNS(n,e)}}function v1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rp(e){var t=ga(e);return(t.local?v1:x1)(t)}function w1(){}function _u(e){return e==null?w1:function(){return this.querySelector(e)}}function b1(e){typeof e!="function"&&(e=_u(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new rt(r,this._parents)}function k1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function N1(){return[]}function Pp(e){return e==null?N1:function(){return this.querySelectorAll(e)}}function S1(e){return function(){return k1(e.apply(this,arguments))}}function C1(e){typeof e=="function"?e=S1(e):e=Pp(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new rt(r,s)}function Ap(e){return function(){return this.matches(e)}}function zp(e){return function(t){return t.matches(e)}}var E1=Array.prototype.find;function j1(e){return function(){return E1.call(this.children,e)}}function _1(){return this.firstElementChild}function T1(e){return this.select(e==null?_1:j1(typeof e=="function"?e:zp(e)))}var M1=Array.prototype.filter;function R1(){return Array.from(this.children)}function P1(e){return function(){return M1.call(this.children,e)}}function A1(e){return this.selectAll(e==null?R1:P1(typeof e=="function"?e:zp(e)))}function z1(e){typeof e!="function"&&(e=Ap(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new rt(r,this._parents)}function Lp(e){return new Array(e.length)}function L1(){return new rt(this._enter||this._groups.map(Lp),this._parents)}function zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zo.prototype={constructor:zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function I1(e){return function(){return e}}function D1(e,t,n,r,s,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],r[o]=l):n[o]=new zo(e,i[o]);for(;o<c;++o)(l=t[o])&&(s[o]=l)}function F1(e,t,n,r,s,i,o){var l,c,u=new Map,d=t.length,f=i.length,m=new Array(d),g;for(l=0;l<d;++l)(c=t[l])&&(m[l]=g=o.call(c,c.__data__,l,t)+"",u.has(g)?s[l]=c:u.set(g,c));for(l=0;l<f;++l)g=o.call(e,i[l],l,i)+"",(c=u.get(g))?(r[l]=c,c.__data__=i[l],u.delete(g)):n[l]=new zo(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(s[l]=c)}function O1(e){return e.__data__}function $1(e,t){if(!arguments.length)return Array.from(this,O1);var n=t?F1:D1,r=this._parents,s=this._groups;typeof e!="function"&&(e=I1(e));for(var i=s.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=r[u],f=s[u],m=f.length,g=B1(e.call(d,d&&d.__data__,u,r)),v=g.length,y=l[u]=new Array(v),k=o[u]=new Array(v),h=c[u]=new Array(m);n(d,f,y,k,h,g,t);for(var p=0,x=0,w,E;p<v;++p)if(w=y[p]){for(p>=x&&(x=p+1);!(E=k[x])&&++x<v;);w._next=E||null}}return o=new rt(o,r),o._enter=l,o._exit=c,o}function B1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function H1(){return new rt(this._exit||this._groups.map(Lp),this._parents)}function U1(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function V1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),l=new Array(s),c=0;c<o;++c)for(var u=n[c],d=r[c],f=u.length,m=l[c]=new Array(f),g,v=0;v<f;++v)(g=u[v]||d[v])&&(m[v]=g);for(;c<s;++c)l[c]=n[c];return new rt(l,this._parents)}function q1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function W1(e){e||(e=Q1);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],l=o.length,c=s[i]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new rt(s,this._parents).order()}function Q1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function G1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Y1(){return Array.from(this)}function X1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function K1(){let e=0;for(const t of this)++e;return e}function Z1(){return!this.node()}function J1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function ew(e){return function(){this.removeAttribute(e)}}function tw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nw(e,t){return function(){this.setAttribute(e,t)}}function rw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function iw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ow(e,t){var n=ga(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?tw:ew:typeof t=="function"?n.local?iw:sw:n.local?rw:nw)(n,t))}function Ip(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aw(e){return function(){this.style.removeProperty(e)}}function lw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uw(e,t,n){return arguments.length>1?this.each((t==null?aw:typeof t=="function"?cw:lw)(e,t,n??"")):Hr(this.node(),e)}function Hr(e,t){return e.style.getPropertyValue(t)||Ip(e).getComputedStyle(e,null).getPropertyValue(t)}function dw(e){return function(){delete this[e]}}function fw(e,t){return function(){this[e]=t}}function mw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hw(e,t){return arguments.length>1?this.each((t==null?dw:typeof t=="function"?mw:fw)(e,t)):this.node()[e]}function Dp(e){return e.trim().split(/^|\s+/)}function Tu(e){return e.classList||new Fp(e)}function Fp(e){this._node=e,this._names=Dp(e.getAttribute("class")||"")}Fp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Op(e,t){for(var n=Tu(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function $p(e,t){for(var n=Tu(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function pw(e){return function(){Op(this,e)}}function gw(e){return function(){$p(this,e)}}function yw(e,t){return function(){(t.apply(this,arguments)?Op:$p)(this,e)}}function xw(e,t){var n=Dp(e+"");if(arguments.length<2){for(var r=Tu(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?yw:t?pw:gw)(n,t))}function vw(){this.textContent=""}function ww(e){return function(){this.textContent=e}}function bw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kw(e){return arguments.length?this.each(e==null?vw:(typeof e=="function"?bw:ww)(e)):this.node().textContent}function Nw(){this.innerHTML=""}function Sw(e){return function(){this.innerHTML=e}}function Cw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ew(e){return arguments.length?this.each(e==null?Nw:(typeof e=="function"?Cw:Sw)(e)):this.node().innerHTML}function jw(){this.nextSibling&&this.parentNode.appendChild(this)}function _w(){return this.each(jw)}function Tw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mw(){return this.each(Tw)}function Rw(e){var t=typeof e=="function"?e:Rp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pw(){return null}function Aw(e,t){var n=typeof e=="function"?e:Rp(e),r=t==null?Pw:typeof t=="function"?t:_u(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zw(){var e=this.parentNode;e&&e.removeChild(this)}function Lw(){return this.each(zw)}function Iw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fw(e){return this.select(e?Dw:Iw)}function Ow(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $w(e){return function(t){e.call(this,t,this.__data__)}}function Bw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Hw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Uw(e,t,n){return function(){var r=this.__on,s,i=$w(t);if(r){for(var o=0,l=r.length;o<l;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Vw(e,t,n){var r=Bw(e+""),s,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(s=0,d=l[c];s<i;++s)if((o=r[s]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?Uw:Hw,s=0;s<i;++s)this.each(l(r[s],t,n));return this}function Bp(e,t,n){var r=Ip(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function qw(e,t){return function(){return Bp(this,e,t)}}function Ww(e,t){return function(){return Bp(this,e,t.apply(this,arguments))}}function Qw(e,t){return this.each((typeof t=="function"?Ww:qw)(e,t))}function*Gw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var Hp=[null];function rt(e,t){this._groups=e,this._parents=t}function fi(){return new rt([[document.documentElement]],Hp)}function Yw(){return this}rt.prototype=fi.prototype={constructor:rt,select:b1,selectAll:C1,selectChild:T1,selectChildren:A1,filter:z1,data:$1,enter:L1,exit:H1,join:U1,merge:V1,selection:Yw,order:q1,sort:W1,call:G1,nodes:Y1,node:X1,size:K1,empty:Z1,each:J1,attr:ow,style:uw,property:hw,classed:xw,text:kw,html:Ew,raise:_w,lower:Mw,append:Rw,insert:Aw,remove:Lw,clone:Fw,datum:Ow,on:Vw,dispatch:Qw,[Symbol.iterator]:Gw};function ct(e){return typeof e=="string"?new rt([[document.querySelector(e)]],[document.documentElement]):new rt([[e]],Hp)}function Xw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xt(e,t){if(e=Xw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Kw={passive:!1},Ks={capture:!0,passive:!1};function cl(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Up(e){var t=e.document.documentElement,n=ct(e).on("dragstart.drag",Rr,Ks);"onselectstart"in t?n.on("selectstart.drag",Rr,Ks):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vp(e,t){var n=e.document.documentElement,r=ct(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rr,Ks),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Li=e=>()=>e;function pc(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}pc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zw(e){return!e.ctrlKey&&!e.button}function Jw(){return this.parentNode}function eb(e,t){return t??{x:e.x,y:e.y}}function tb(){return navigator.maxTouchPoints||"ontouchstart"in this}function nb(){var e=Zw,t=Jw,n=eb,r=tb,s={},i=pa("start","drag","end"),o=0,l,c,u,d,f=0;function m(w){w.on("mousedown.drag",g).filter(r).on("touchstart.drag",k).on("touchmove.drag",h,Kw).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,E){if(!(d||!e.call(this,w,E))){var j=x(this,t.call(this,w,E),w,E,"mouse");j&&(ct(w.view).on("mousemove.drag",v,Ks).on("mouseup.drag",y,Ks),Up(w.view),cl(w),u=!1,l=w.clientX,c=w.clientY,j("start",w))}}function v(w){if(Rr(w),!u){var E=w.clientX-l,j=w.clientY-c;u=E*E+j*j>f}s.mouse("drag",w)}function y(w){ct(w.view).on("mousemove.drag mouseup.drag",null),Vp(w.view,u),Rr(w),s.mouse("end",w)}function k(w,E){if(e.call(this,w,E)){var j=w.changedTouches,C=t.call(this,w,E),M=j.length,A,L;for(A=0;A<M;++A)(L=x(this,C,w,E,j[A].identifier,j[A]))&&(cl(w),L("start",w,j[A]))}}function h(w){var E=w.changedTouches,j=E.length,C,M;for(C=0;C<j;++C)(M=s[E[C].identifier])&&(Rr(w),M("drag",w,E[C]))}function p(w){var E=w.changedTouches,j=E.length,C,M;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<j;++C)(M=s[E[C].identifier])&&(cl(w),M("end",w,E[C]))}function x(w,E,j,C,M,A){var L=i.copy(),$=xt(A||j,E),U,H,b;if((b=n.call(w,new pc("beforestart",{sourceEvent:j,target:m,identifier:M,active:o,x:$[0],y:$[1],dx:0,dy:0,dispatch:L}),C))!=null)return U=b.x-$[0]||0,H=b.y-$[1]||0,function z(_,D,T){var S=$,P;switch(_){case"start":s[M]=z,P=o++;break;case"end":delete s[M],--o;case"drag":$=xt(T||D,E),P=o;break}L.call(_,w,new pc(_,{sourceEvent:D,subject:b,target:m,identifier:M,active:P,x:$[0]+U,y:$[1]+H,dx:$[0]-S[0],dy:$[1]-S[1],dispatch:L}),C)}}return m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Li(!!w),m):e},m.container=function(w){return arguments.length?(t=typeof w=="function"?w:Li(w),m):t},m.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Li(w),m):n},m.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Li(!!w),m):r},m.on=function(){var w=i.on.apply(i,arguments);return w===i?m:w},m.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,m):Math.sqrt(f)},m}function Mu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mi(){}var Zs=.7,Lo=1/Zs,Pr="\\s*([+-]?\\d+)\\s*",Js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rb=/^#([0-9a-f]{3,8})$/,sb=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),ib=new RegExp(`^rgb\\(${zt},${zt},${zt}\\)$`),ob=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${Js}\\)$`),ab=new RegExp(`^rgba\\(${zt},${zt},${zt},${Js}\\)$`),lb=new RegExp(`^hsl\\(${Js},${zt},${zt}\\)$`),cb=new RegExp(`^hsla\\(${Js},${zt},${zt},${Js}\\)$`),mf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mu(mi,ei,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hf,formatHex:hf,formatHex8:ub,formatHsl:db,formatRgb:pf,toString:pf});function hf(){return this.rgb().formatHex()}function ub(){return this.rgb().formatHex8()}function db(){return Wp(this).formatHsl()}function pf(){return this.rgb().formatRgb()}function ei(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gf(t):n===3?new Ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ii(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ii(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sb.exec(e))?new Ge(t[1],t[2],t[3],1):(t=ib.exec(e))?new Ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ob.exec(e))?Ii(t[1],t[2],t[3],t[4]):(t=ab.exec(e))?Ii(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lb.exec(e))?vf(t[1],t[2]/100,t[3]/100,1):(t=cb.exec(e))?vf(t[1],t[2]/100,t[3]/100,t[4]):mf.hasOwnProperty(e)?gf(mf[e]):e==="transparent"?new Ge(NaN,NaN,NaN,0):null}function gf(e){return new Ge(e>>16&255,e>>8&255,e&255,1)}function Ii(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ge(e,t,n,r)}function fb(e){return e instanceof mi||(e=ei(e)),e?(e=e.rgb(),new Ge(e.r,e.g,e.b,e.opacity)):new Ge}function gc(e,t,n,r){return arguments.length===1?fb(e):new Ge(e,t,n,r??1)}function Ge(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Mu(Ge,gc,qp(mi,{brighter(e){return e=e==null?Lo:Math.pow(Lo,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zs:Math.pow(Zs,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ge(Vn(this.r),Vn(this.g),Vn(this.b),Io(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yf,formatHex:yf,formatHex8:mb,formatRgb:xf,toString:xf}));function yf(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}`}function mb(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}${$n((isNaN(this.opacity)?1:this.opacity)*255)}`}function xf(){const e=Io(this.opacity);return`${e===1?"rgb(":"rgba("}${Vn(this.r)}, ${Vn(this.g)}, ${Vn(this.b)}${e===1?")":`, ${e})`}`}function Io(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $n(e){return e=Vn(e),(e<16?"0":"")+e.toString(16)}function vf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wt(e,t,n,r)}function Wp(e){if(e instanceof wt)return new wt(e.h,e.s,e.l,e.opacity);if(e instanceof mi||(e=ei(e)),!e)return new wt;if(e instanceof wt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new wt(o,l,c,e.opacity)}function hb(e,t,n,r){return arguments.length===1?Wp(e):new wt(e,t,n,r??1)}function wt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mu(wt,hb,qp(mi,{brighter(e){return e=e==null?Lo:Math.pow(Lo,e),new wt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zs:Math.pow(Zs,e),new wt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Ge(ul(e>=240?e-240:e+120,s,r),ul(e,s,r),ul(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new wt(wf(this.h),Di(this.s),Di(this.l),Io(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Io(this.opacity);return`${e===1?"hsl(":"hsla("}${wf(this.h)}, ${Di(this.s)*100}%, ${Di(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wf(e){return e=(e||0)%360,e<0?e+360:e}function Di(e){return Math.max(0,Math.min(1,e||0))}function ul(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Qp=e=>()=>e;function pb(e,t){return function(n){return e+n*t}}function gb(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yb(e){return(e=+e)==1?Gp:function(t,n){return n-t?gb(t,n,e):Qp(isNaN(t)?n:t)}}function Gp(e,t){var n=t-e;return n?pb(e,n):Qp(isNaN(e)?t:e)}const bf=function e(t){var n=yb(t);function r(s,i){var o=n((s=gc(s)).r,(i=gc(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),u=Gp(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function sn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(yc.source,"g");function xb(e){return function(){return e}}function vb(e){return function(t){return e(t)+""}}function wb(e,t){var n=yc.lastIndex=dl.lastIndex=0,r,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=yc.exec(e))&&(s=dl.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:sn(r,s)})),n=dl.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?vb(c[0].x):xb(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var kf=180/Math.PI,xc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yp(e,t,n,r,s,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*kf,skewX:Math.atan(c)*kf,scaleX:o,scaleY:l}}var Fi;function bb(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xc:Yp(t.a,t.b,t.c,t.d,t.e,t.f)}function kb(e){return e==null||(Fi||(Fi=document.createElementNS("http://www.w3.org/2000/svg","g")),Fi.setAttribute("transform",e),!(e=Fi.transform.baseVal.consolidate()))?xc:(e=e.matrix,Yp(e.a,e.b,e.c,e.d,e.e,e.f))}function Xp(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,d,f,m,g,v){if(u!==f||d!==m){var y=g.push("translate(",null,t,null,n);v.push({i:y-4,x:sn(u,f)},{i:y-2,x:sn(d,m)})}else(f||m)&&g.push("translate("+f+t+m+n)}function o(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(s(f)+"rotate(",null,r)-2,x:sn(u,d)})):d&&f.push(s(f)+"rotate("+d+r)}function l(u,d,f,m){u!==d?m.push({i:f.push(s(f)+"skewX(",null,r)-2,x:sn(u,d)}):d&&f.push(s(f)+"skewX("+d+r)}function c(u,d,f,m,g,v){if(u!==f||d!==m){var y=g.push(s(g)+"scale(",null,",",null,")");v.push({i:y-4,x:sn(u,f)},{i:y-2,x:sn(d,m)})}else(f!==1||m!==1)&&g.push(s(g)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,m),o(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(g){for(var v=-1,y=m.length,k;++v<y;)f[(k=m[v]).i]=k.x(g);return f.join("")}}}var Nb=Xp(bb,"px, ","px)","deg)"),Sb=Xp(kb,", ",")",")"),Cb=1e-12;function Nf(e){return((e=Math.exp(e))+1/e)/2}function Eb(e){return((e=Math.exp(e))-1/e)/2}function jb(e){return((e=Math.exp(2*e))-1)/(e+1)}const _b=function e(t,n,r){function s(i,o){var l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],m=o[2],g=d-l,v=f-c,y=g*g+v*v,k,h;if(y<Cb)h=Math.log(m/u)/t,k=function(C){return[l+C*g,c+C*v,u*Math.exp(t*C*h)]};else{var p=Math.sqrt(y),x=(m*m-u*u+r*y)/(2*u*n*p),w=(m*m-u*u-r*y)/(2*m*n*p),E=Math.log(Math.sqrt(x*x+1)-x),j=Math.log(Math.sqrt(w*w+1)-w);h=(j-E)/t,k=function(C){var M=C*h,A=Nf(E),L=u/(n*p)*(A*jb(t*M+E)-Eb(E));return[l+L*g,c+L*v,u*A/Nf(t*M+E)]}}return k.duration=h*1e3*t/Math.SQRT2,k}return s.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},s}(Math.SQRT2,2,4);var Ur=0,ys=0,as=0,Kp=1e3,Do,xs,Fo=0,Kn=0,ya=0,ti=typeof performance=="object"&&performance.now?performance:Date,Zp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ru(){return Kn||(Zp(Tb),Kn=ti.now()+ya)}function Tb(){Kn=0}function Oo(){this._call=this._time=this._next=null}Oo.prototype=Jp.prototype={constructor:Oo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ru():+n)+(t==null?0:+t),!this._next&&xs!==this&&(xs?xs._next=this:Do=this,xs=this),this._call=e,this._time=n,vc()},stop:function(){this._call&&(this._call=null,this._time=1/0,vc())}};function Jp(e,t,n){var r=new Oo;return r.restart(e,t,n),r}function Mb(){Ru(),++Ur;for(var e=Do,t;e;)(t=Kn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ur}function Sf(){Kn=(Fo=ti.now())+ya,Ur=ys=0;try{Mb()}finally{Ur=0,Pb(),Kn=0}}function Rb(){var e=ti.now(),t=e-Fo;t>Kp&&(ya-=t,Fo=e)}function Pb(){for(var e,t=Do,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Do=n);xs=e,vc(r)}function vc(e){if(!Ur){ys&&(ys=clearTimeout(ys));var t=e-Kn;t>24?(e<1/0&&(ys=setTimeout(Sf,e-ti.now()-ya)),as&&(as=clearInterval(as))):(as||(Fo=ti.now(),as=setInterval(Rb,Kp)),Ur=1,Zp(Sf))}}function Cf(e,t,n){var r=new Oo;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Ab=pa("start","end","cancel","interrupt"),zb=[],eg=0,Ef=1,wc=2,so=3,jf=4,bc=5,io=6;function xa(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Lb(e,n,{name:t,index:r,group:s,on:Ab,tween:zb,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:eg})}function Pu(e,t){var n=Ct(e,t);if(n.state>eg)throw new Error("too late; already scheduled");return n}function Lt(e,t){var n=Ct(e,t);if(n.state>so)throw new Error("too late; already running");return n}function Ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lb(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Jp(i,0,n.time);function i(u){n.state=Ef,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,m,g;if(n.state!==Ef)return c();for(d in r)if(g=r[d],g.name===n.name){if(g.state===so)return Cf(o);g.state===jf?(g.state=io,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[d]):+d<t&&(g.state=io,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[d])}if(Cf(function(){n.state===so&&(n.state=jf,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=wc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===wc){for(n.state=so,s=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=g);s.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=bc,1),f=-1,m=s.length;++f<m;)s[f].call(e,d);n.state===bc&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=io,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function oo(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>wc&&r.state<bc,r.state=io,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function Ib(e){return this.each(function(){oo(this,e)})}function Db(e,t){var n,r;return function(){var s=Lt(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function Fb(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Lt(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var l={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=l;break}c===u&&s.push(l)}i.tween=s}}function Ob(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ct(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?Db:Fb)(n,e,t))}function Au(e,t,n){var r=e._id;return e.each(function(){var s=Lt(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Ct(s,r).value[t]}}function tg(e,t){var n;return(typeof t=="number"?sn:t instanceof ei?bf:(n=ei(t))?(t=n,bf):wb)(e,t)}function $b(e){return function(){this.removeAttribute(e)}}function Bb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hb(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function Ub(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function Vb(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function qb(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function Wb(e,t){var n=ga(e),r=n==="transform"?Sb:tg;return this.attrTween(e,typeof t=="function"?(n.local?qb:Vb)(n,r,Au(this,"attr."+e,t)):t==null?(n.local?Bb:$b)(n):(n.local?Ub:Hb)(n,r,t))}function Qb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Gb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Yb(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Gb(e,i)),n}return s._value=t,s}function Xb(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Qb(e,i)),n}return s._value=t,s}function Kb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ga(e);return this.tween(n,(r.local?Yb:Xb)(r,t))}function Zb(e,t){return function(){Pu(this,e).delay=+t.apply(this,arguments)}}function Jb(e,t){return t=+t,function(){Pu(this,e).delay=t}}function e2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zb:Jb)(t,e)):Ct(this.node(),t).delay}function t2(e,t){return function(){Lt(this,e).duration=+t.apply(this,arguments)}}function n2(e,t){return t=+t,function(){Lt(this,e).duration=t}}function r2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t2:n2)(t,e)):Ct(this.node(),t).duration}function s2(e,t){if(typeof t!="function")throw new Error;return function(){Lt(this,e).ease=t}}function i2(e){var t=this._id;return arguments.length?this.each(s2(t,e)):Ct(this.node(),t).ease}function o2(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Lt(this,e).ease=n}}function a2(e){if(typeof e!="function")throw new Error;return this.each(o2(this._id,e))}function l2(e){typeof e!="function"&&(e=Ap(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Kt(r,this._parents,this._name,this._id)}function c2(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),l=0;l<i;++l)for(var c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),m,g=0;g<d;++g)(m=c[g]||u[g])&&(f[g]=m);for(;l<r;++l)o[l]=t[l];return new Kt(o,this._parents,this._name,this._id)}function u2(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function d2(e,t,n){var r,s,i=u2(t)?Pu:Lt;return function(){var o=i(this,e),l=o.on;l!==r&&(s=(r=l).copy()).on(t,n),o.on=s}}function f2(e,t){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(e):this.each(d2(n,e,t))}function m2(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function h2(){return this.on("end.remove",m2(this._id))}function p2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_u(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var l=r[o],c=l.length,u=i[o]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,xa(u[m],t,n,m,u,Ct(d,n)));return new Kt(i,this._parents,t,n)}function g2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pp(e));for(var r=this._groups,s=r.length,i=[],o=[],l=0;l<s;++l)for(var c=r[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),g,v=Ct(d,n),y=0,k=m.length;y<k;++y)(g=m[y])&&xa(g,t,n,y,m,v);i.push(m),o.push(d)}return new Kt(i,o,t,n)}var y2=fi.prototype.constructor;function x2(){return new y2(this._groups,this._parents)}function v2(e,t){var n,r,s;return function(){var i=Hr(this,e),o=(this.style.removeProperty(e),Hr(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function ng(e){return function(){this.style.removeProperty(e)}}function w2(e,t,n){var r,s=n+"",i;return function(){var o=Hr(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function b2(e,t,n){var r,s,i;return function(){var o=Hr(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Hr(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l))}}function k2(e,t){var n,r,s,i="style."+t,o="end."+i,l;return function(){var c=Lt(this,e),u=c.on,d=c.value[i]==null?l||(l=ng(t)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(o,s=d),c.on=r}}function N2(e,t,n){var r=(e+="")=="transform"?Nb:tg;return t==null?this.styleTween(e,v2(e,r)).on("end.style."+e,ng(e)):typeof t=="function"?this.styleTween(e,b2(e,r,Au(this,"style."+e,t))).each(k2(this._id,e)):this.styleTween(e,w2(e,r,t),n).on("end.style."+e,null)}function S2(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function C2(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&S2(e,o,n)),r}return i._value=t,i}function E2(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,C2(e,t,n??""))}function j2(e){return function(){this.textContent=e}}function _2(e){return function(){var t=e(this);this.textContent=t??""}}function T2(e){return this.tween("text",typeof e=="function"?_2(Au(this,"text",e)):j2(e==null?"":e+""))}function M2(e){return function(t){this.textContent=e.call(this,t)}}function R2(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&M2(s)),t}return r._value=e,r}function P2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,R2(e))}function A2(){for(var e=this._name,t=this._id,n=rg(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=Ct(c,t);xa(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Kt(r,this._parents,e,n)}function z2(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var u=Lt(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),s===0&&i()})}var L2=0;function Kt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rg(){return++L2}var Ft=fi.prototype;Kt.prototype={constructor:Kt,select:p2,selectAll:g2,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:l2,merge:c2,selection:x2,transition:A2,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:f2,attr:Wb,attrTween:Kb,style:N2,styleTween:E2,text:T2,textTween:P2,remove:h2,tween:Ob,delay:e2,duration:r2,ease:i2,easeVarying:a2,end:z2,[Symbol.iterator]:Ft[Symbol.iterator]};function I2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var D2={time:null,delay:0,duration:250,ease:I2};function F2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function O2(e){var t,n;e instanceof Kt?(t=e._id,e=e._name):(t=rg(),(n=D2).time=Ru(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&xa(c,e,t,u,o,n||F2(c,t));return new Kt(r,this._parents,e,t)}fi.prototype.interrupt=Ib;fi.prototype.transition=O2;const Oi=e=>()=>e;function $2(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Vt(e,t,n){this.k=e,this.x=t,this.y=n}Vt.prototype={constructor:Vt,scale:function(e){return e===1?this:new Vt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wt=new Vt(1,0,0);Vt.prototype;function fl(e){e.stopImmediatePropagation()}function ls(e){e.preventDefault(),e.stopImmediatePropagation()}function B2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function H2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _f(){return this.__zoom||Wt}function U2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function V2(){return navigator.maxTouchPoints||"ontouchstart"in this}function q2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function sg(){var e=B2,t=H2,n=q2,r=U2,s=V2,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=_b,u=pa("start","zoom","end"),d,f,m,g=500,v=150,y=0,k=10;function h(b){b.property("__zoom",_f).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",L).filter(s).on("touchstart.zoom",$).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(b,z,_,D){var T=b.selection?b.selection():b;T.property("__zoom",_f),b!==T?E(b,z,_,D):T.interrupt().each(function(){j(this,arguments).event(D).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},h.scaleBy=function(b,z,_,D){h.scaleTo(b,function(){var T=this.__zoom.k,S=typeof z=="function"?z.apply(this,arguments):z;return T*S},_,D)},h.scaleTo=function(b,z,_,D){h.transform(b,function(){var T=t.apply(this,arguments),S=this.__zoom,P=_==null?w(T):typeof _=="function"?_.apply(this,arguments):_,I=S.invert(P),F=typeof z=="function"?z.apply(this,arguments):z;return n(x(p(S,F),P,I),T,o)},_,D)},h.translateBy=function(b,z,_,D){h.transform(b,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),o)},null,D)},h.translateTo=function(b,z,_,D,T){h.transform(b,function(){var S=t.apply(this,arguments),P=this.__zoom,I=D==null?w(S):typeof D=="function"?D.apply(this,arguments):D;return n(Wt.translate(I[0],I[1]).scale(P.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof _=="function"?-_.apply(this,arguments):-_),S,o)},D,T)};function p(b,z){return z=Math.max(i[0],Math.min(i[1],z)),z===b.k?b:new Vt(z,b.x,b.y)}function x(b,z,_){var D=z[0]-_[0]*b.k,T=z[1]-_[1]*b.k;return D===b.x&&T===b.y?b:new Vt(b.k,D,T)}function w(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function E(b,z,_,D){b.on("start.zoom",function(){j(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(D).end()}).tween("zoom",function(){var T=this,S=arguments,P=j(T,S).event(D),I=t.apply(T,S),F=_==null?w(I):typeof _=="function"?_.apply(T,S):_,W=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),V=T.__zoom,G=typeof z=="function"?z.apply(T,S):z,Y=c(V.invert(F).concat(W/V.k),G.invert(F).concat(W/G.k));return function(K){if(K===1)K=G;else{var se=Y(K),re=W/se[2];K=new Vt(re,F[0]-se[0]*re,F[1]-se[1]*re)}P.zoom(null,K)}})}function j(b,z,_){return!_&&b.__zooming||new C(b,z)}function C(b,z){this.that=b,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,z),this.taps=0}C.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,z){return this.mouse&&b!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var z=ct(this.that).datum();u.call(b,this.that,new $2(b,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),z)}};function M(b,...z){if(!e.apply(this,arguments))return;var _=j(this,z).event(b),D=this.__zoom,T=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,r.apply(this,arguments)))),S=xt(b);if(_.wheel)(_.mouse[0][0]!==S[0]||_.mouse[0][1]!==S[1])&&(_.mouse[1]=D.invert(_.mouse[0]=S)),clearTimeout(_.wheel);else{if(D.k===T)return;_.mouse=[S,D.invert(S)],oo(this),_.start()}ls(b),_.wheel=setTimeout(P,v),_.zoom("mouse",n(x(p(D,T),_.mouse[0],_.mouse[1]),_.extent,o));function P(){_.wheel=null,_.end()}}function A(b,...z){if(m||!e.apply(this,arguments))return;var _=b.currentTarget,D=j(this,z,!0).event(b),T=ct(b.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",W,!0),S=xt(b,_),P=b.clientX,I=b.clientY;Up(b.view),fl(b),D.mouse=[S,this.__zoom.invert(S)],oo(this),D.start();function F(V){if(ls(V),!D.moved){var G=V.clientX-P,Y=V.clientY-I;D.moved=G*G+Y*Y>y}D.event(V).zoom("mouse",n(x(D.that.__zoom,D.mouse[0]=xt(V,_),D.mouse[1]),D.extent,o))}function W(V){T.on("mousemove.zoom mouseup.zoom",null),Vp(V.view,D.moved),ls(V),D.event(V).end()}}function L(b,...z){if(e.apply(this,arguments)){var _=this.__zoom,D=xt(b.changedTouches?b.changedTouches[0]:b,this),T=_.invert(D),S=_.k*(b.shiftKey?.5:2),P=n(x(p(_,S),D,T),t.apply(this,z),o);ls(b),l>0?ct(this).transition().duration(l).call(E,P,D,b):ct(this).call(h.transform,P,D,b)}}function $(b,...z){if(e.apply(this,arguments)){var _=b.touches,D=_.length,T=j(this,z,b.changedTouches.length===D).event(b),S,P,I,F;for(fl(b),P=0;P<D;++P)I=_[P],F=xt(I,this),F=[F,this.__zoom.invert(F),I.identifier],T.touch0?!T.touch1&&T.touch0[2]!==F[2]&&(T.touch1=F,T.taps=0):(T.touch0=F,S=!0,T.taps=1+!!d);d&&(d=clearTimeout(d)),S&&(T.taps<2&&(f=F[0],d=setTimeout(function(){d=null},g)),oo(this),T.start())}}function U(b,...z){if(this.__zooming){var _=j(this,z).event(b),D=b.changedTouches,T=D.length,S,P,I,F;for(ls(b),S=0;S<T;++S)P=D[S],I=xt(P,this),_.touch0&&_.touch0[2]===P.identifier?_.touch0[0]=I:_.touch1&&_.touch1[2]===P.identifier&&(_.touch1[0]=I);if(P=_.that.__zoom,_.touch1){var W=_.touch0[0],V=_.touch0[1],G=_.touch1[0],Y=_.touch1[1],K=(K=G[0]-W[0])*K+(K=G[1]-W[1])*K,se=(se=Y[0]-V[0])*se+(se=Y[1]-V[1])*se;P=p(P,Math.sqrt(K/se)),I=[(W[0]+G[0])/2,(W[1]+G[1])/2],F=[(V[0]+Y[0])/2,(V[1]+Y[1])/2]}else if(_.touch0)I=_.touch0[0],F=_.touch0[1];else return;_.zoom("touch",n(x(P,I,F),_.extent,o))}}function H(b,...z){if(this.__zooming){var _=j(this,z).event(b),D=b.changedTouches,T=D.length,S,P;for(fl(b),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),S=0;S<T;++S)P=D[S],_.touch0&&_.touch0[2]===P.identifier?delete _.touch0:_.touch1&&_.touch1[2]===P.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(P=xt(P,this),Math.hypot(f[0]-P[0],f[1]-P[1])<k)){var I=ct(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return h.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Oi(+b),h):r},h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Oi(!!b),h):e},h.touchable=function(b){return arguments.length?(s=typeof b=="function"?b:Oi(!!b),h):s},h.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Oi([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),h):t},h.scaleExtent=function(b){return arguments.length?(i[0]=+b[0],i[1]=+b[1],h):[i[0],i[1]]},h.translateExtent=function(b){return arguments.length?(o[0][0]=+b[0][0],o[1][0]=+b[1][0],o[0][1]=+b[0][1],o[1][1]=+b[1][1],h):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},h.constrain=function(b){return arguments.length?(n=b,h):n},h.duration=function(b){return arguments.length?(l=+b,h):l},h.interpolate=function(b){return arguments.length?(c=b,h):c},h.on=function(){var b=u.on.apply(u,arguments);return b===u?h:b},h.clickDistance=function(b){return arguments.length?(y=(b=+b)*b,h):Math.sqrt(y)},h.tapDistance=function(b){return arguments.length?(k=+b,h):k},h}const va=N.createContext(null),W2=va.Provider,Zt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ig=Zt.error001();function le(e,t){const n=N.useContext(va);if(n===null)throw new Error(ig);return Mp(n,e,t)}const Se=()=>{const e=N.useContext(va);if(e===null)throw new Error(ig);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Q2=e=>e.userSelectionActive?"none":"all";function zu({position:e,children:t,className:n,style:r,...s}){const i=le(Q2),o=`${e}`.split("-");return R.createElement("div",{className:Pe(["react-flow__panel",n,...o]),style:{...r,pointerEvents:i},...s},t)}function G2({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:R.createElement(zu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},R.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Y2=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=N.useRef(null),[m,g]=N.useState({x:0,y:0,width:0,height:0}),v=Pe(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const y=f.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:R.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...d},s&&R.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),R.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:r},n),c)};var X2=N.memo(Y2);const Lu=e=>({width:e.offsetWidth,height:e.offsetHeight}),Vr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Iu=(e={x:0,y:0},t)=>({x:Vr(e.x,t[0][0],t[1][0]),y:Vr(e.y,t[0][1],t[1][1])}),Tf=(e,t,n)=>e<t?Vr(Math.abs(e-t),1,50)/50:e>n?-Vr(Math.abs(e-n),1,50)/50:0,og=(e,t)=>{const n=Tf(e.x,35,t.width-35)*20,r=Tf(e.y,35,t.height-35)*20;return[n,r]},ag=e=>e.getRootNode?.()||window?.document,lg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ni=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),cg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Mf=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),K2=(e,t)=>cg(lg(ni(e),ni(t))),kc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Z2=e=>dt(e.width)&&dt(e.height)&&dt(e.x)&&dt(e.y),dt=e=>!isNaN(e)&&isFinite(e),ye=Symbol.for("internals"),ug=["Enter"," ","Escape"],J2=(e,t)=>{},ek=e=>"nativeEvent"in e;function Nc(e){const n=(ek(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const dg=e=>"clientX"in e,bn=(e,t)=>{const n=dg(e),r=n?e.clientX:e.touches?.[0].clientX,s=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:s-(t?.top??0)}},$o=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,hi=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g=20})=>R.createElement(R.Fragment,null,R.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),g&&R.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&dt(n)&&dt(r)?R.createElement(X2,{x:n,y:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);hi.displayName="BaseEdge";function cs(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(i=>i.id===e);s&&n(r,{...s})}}function fg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[i,l,s,o]}function mg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+s*.375+o*.375+n*.125,u=t*.125+i*.375+l*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Zn;(function(e){e.Strict="strict",e.Loose="loose"})(Zn||(Zn={}));var Bn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Bn||(Bn={}));var ri;(function(e){e.Partial="partial",e.Full="full"})(ri||(ri={}));var cn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(cn||(cn={}));var Bo;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Bo||(Bo={}));var O;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(O||(O={}));function Rf({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===O.Left||e===O.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function hg({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:s,targetPosition:i=O.Top}){const[o,l]=Rf({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=Rf({pos:i,x1:r,y1:s,x2:e,y2:t}),[d,f,m,g]=mg({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${r},${s}`,d,f,m,g]}const Du=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,interactionWidth:y})=>{const[k,h,p]=hg({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i});return R.createElement(hi,{path:k,labelX:h,labelY:p,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,interactionWidth:y})});Du.displayName="SimpleBezierEdge";const Pf={[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}},tk=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Af=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nk({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:r=O.Top,center:s,offset:i}){const o=Pf[t],l=Pf[r],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},d=tk({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let g=[],v,y;const k={x:0,y:0},h={x:0,y:0},[p,x,w,E]=fg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*l[f]===-1){v=s.x??p,y=s.y??x;const C=[{x:v,y:c.y},{x:v,y:u.y}],M=[{x:c.x,y},{x:u.x,y}];o[f]===m?g=f==="x"?C:M:g=f==="x"?M:C}else{const C=[{x:c.x,y:u.y}],M=[{x:u.x,y:c.y}];if(f==="x"?g=o.x===m?M:C:g=o.y===m?C:M,t===r){const H=Math.abs(e[f]-n[f]);if(H<=i){const b=Math.min(i-1,i-H);o[f]===m?k[f]=(c[f]>e[f]?-1:1)*b:h[f]=(u[f]>n[f]?-1:1)*b}}if(t!==r){const H=f==="x"?"y":"x",b=o[f]===l[H],z=c[H]>u[H],_=c[H]<u[H];(o[f]===1&&(!b&&z||b&&_)||o[f]!==1&&(!b&&_||b&&z))&&(g=f==="x"?C:M)}const A={x:c.x+k.x,y:c.y+k.y},L={x:u.x+h.x,y:u.y+h.y},$=Math.max(Math.abs(A.x-g[0].x),Math.abs(L.x-g[0].x)),U=Math.max(Math.abs(A.y-g[0].y),Math.abs(L.y-g[0].y));$>=U?(v=(A.x+L.x)/2,y=g[0].y):(v=g[0].x,y=(A.y+L.y)/2)}return[[e,{x:c.x+k.x,y:c.y+k.y},...g,{x:u.x+h.x,y:u.y+h.y},n],v,y,w,E]}function rk(e,t,n,r){const s=Math.min(Af(e,t)/2,Af(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+s*u},${o}Q ${i},${o} ${i},${o+s*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*l},${o}`}function Sc({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:s,targetPosition:i=O.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,g,v]=nk({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:l,y:c},offset:u});return[d.reduce((k,h,p)=>{let x="";return p>0&&p<d.length-1?x=rk(d[p-1],h,d[p+1],o):x=`${p===0?"M":"L"}${h.x} ${h.y}`,k+=x,k},""),f,m,g,v]}const wa=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=O.Bottom,targetPosition:m=O.Top,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:k})=>{const[h,p,x]=Sc({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:m,borderRadius:y?.borderRadius,offset:y?.offset});return R.createElement(hi,{path:h,labelX:p,labelY:x,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:v,interactionWidth:k})});wa.displayName="SmoothStepEdge";const Fu=N.memo(e=>R.createElement(wa,{...e,pathOptions:N.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Fu.displayName="StepEdge";function sk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,l]=fg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,l]}const Ou=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g})=>{const[v,y,k]=sk({sourceX:e,sourceY:t,targetX:n,targetY:r});return R.createElement(hi,{path:v,labelX:y,labelY:k,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g})});Ou.displayName="StraightEdge";function $i(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function zf({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case O.Left:return[t-$i(t-r,i),n];case O.Right:return[t+$i(r-t,i),n];case O.Top:return[t,n-$i(n-s,i)];case O.Bottom:return[t,n+$i(s-n,i)]}}function pg({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:s,targetPosition:i=O.Top,curvature:o=.25}){const[l,c]=zf({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[u,d]=zf({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[f,m,g,v]=mg({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${r},${s}`,f,m,g,v]}const Ho=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:k})=>{const[h,p,x]=pg({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i,curvature:y?.curvature});return R.createElement(hi,{path:h,labelX:p,labelY:x,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,interactionWidth:k})});Ho.displayName="BezierEdge";const $u=N.createContext(null),ik=$u.Provider;$u.Consumer;const ok=()=>N.useContext($u),ak=e=>"id"in e&&"source"in e&&"target"in e,lk=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Cc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,ck=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),pi=(e,t)=>{if(!e.source||!e.target)return t;let n;return ak(e)?n={...e}:n={...e,id:lk(e)},ck(n,t)?t:t.concat(n)},Ec=({x:e,y:t},[n,r,s],i,[o,l])=>{const c={x:(e-n)/s,y:(t-r)/s};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},gg=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),qn=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},ba=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:i,y:o}=qn(s,t).positionAbsolute;return lg(r,ni({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cg(n)},yg=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:g=!0,hidden:v=!1}=d;if(o&&!g||v)return!1;const{positionAbsolute:y}=qn(d,l),k={x:y.x,y:y.y,width:f||0,height:m||0},h=kc(c,k),p=typeof f>"u"||typeof m>"u"||f===null||m===null,x=i&&h>0,w=(f||0)*(m||0);(p||x||h>=w||d.dragging)&&u.push(d)}),u},xg=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},vg=(e,t,n,r,s,i=.1)=>{const o=t/(e.width*(1+i)),l=n/(e.height*(1+i)),c=Math.min(o,l),u=Vr(c,r,s),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,g=n/2-f*u;return{x:m,y:g,zoom:u}},Ln=(e,t=0)=>e.transition().duration(t);function Lf(e,t,n,r){return(t[n]||[]).reduce((s,i)=>(`${e.id}-${i.id}-${n}`!==r&&s.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),s),[])}function uk(e,t,n,r,s,i){const{x:o,y:l}=bn(e),u=t.elementsFromPoint(o,l).find(v=>v.classList.contains("react-flow__handle"));if(u){const v=u.getAttribute("data-nodeid");if(v){const y=Bu(void 0,u),k=u.getAttribute("data-handleid"),h=i({nodeId:v,id:k,type:y});if(h){const p=s.find(x=>x.nodeId===v&&x.type===y&&x.id===k);return{handle:{id:k,type:y,nodeId:v,x:p?.x||n.x,y:p?.y||n.y},validHandleResult:h}}}}let d=[],f=1/0;if(s.forEach(v=>{const y=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(y<=r){const k=i(v);y<=f&&(y<f?d=[{handle:v,validHandleResult:k}]:y===f&&d.push({handle:v,validHandleResult:k}),f=y)}}),!d.length)return{handle:null,validHandleResult:wg()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:v})=>v.isValid),g=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:y})=>g?v.type==="target":m?y.isValid:!0)||d[0]}const dk={source:null,target:null,sourceHandle:null,targetHandle:null},wg=()=>({handleDomNode:null,isValid:!1,connection:dk,endHandle:null});function bg(e,t,n,r,s,i,o){const l=s==="target",c=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...wg(),handleDomNode:c};if(c){const d=Bu(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),g=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),y={source:l?f:n,sourceHandle:l?m:r,target:l?n:f,targetHandle:l?r:m};u.connection=y,g&&v&&(t===Zn.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==r)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=i(y))}return u}function fk({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,i)=>{if(i[ye]){const{handleBounds:o}=i[ye];let l=[],c=[];o&&(l=Lf(i,o,"source",`${t}-${n}-${r}`),c=Lf(i,o,"target",`${t}-${n}-${r}`)),s.push(...l,...c)}return s},[])}function Bu(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function ml(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function mk(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function kg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=ag(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:g,connectionRadius:v,onConnectStart:y,panBy:k,getNodes:h,cancelConnection:p}=i();let x=0,w;const{x:E,y:j}=bn(e),C=d?.elementFromPoint(E,j),M=Bu(c,C),A=m?.getBoundingClientRect();if(!A||!M)return;let L,$=bn(e,A),U=!1,H=null,b=!1,z=null;const _=fk({nodes:h(),nodeId:n,handleId:t,handleType:M}),D=()=>{if(!g)return;const[P,I]=og($,A);k({x:P,y:I}),x=requestAnimationFrame(D)};o({connectionPosition:$,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:M});function T(P){const{transform:I}=i();$=bn(P,A);const{handle:F,validHandleResult:W}=uk(P,d,Ec($,I,!1,[1,1]),v,_,V=>bg(V,f,n,t,s?"target":"source",l,d));if(w=F,U||(D(),U=!0),z=W.handleDomNode,H=W.connection,b=W.isValid,o({connectionPosition:w&&b?gg({x:w.x,y:w.y},I):$,connectionStatus:mk(!!w,b),connectionEndHandle:W.endHandle}),!w&&!b&&!z)return ml(L);H.source!==H.target&&z&&(ml(L),L=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",b),z.classList.toggle("react-flow__handle-valid",b))}function S(P){(w||z)&&H&&b&&r?.(H),i().onConnectEnd?.(P),c&&u?.(P),ml(L),p(),cancelAnimationFrame(x),U=!1,b=!1,H=null,z=null,d.removeEventListener("mousemove",T),d.removeEventListener("mouseup",S),d.removeEventListener("touchmove",T),d.removeEventListener("touchend",S)}d.addEventListener("mousemove",T),d.addEventListener("mouseup",S),d.addEventListener("touchmove",T),d.addEventListener("touchend",S)}const If=()=>!0,hk=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),pk=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=r;return{connecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n||i?.nodeId===e&&i?.handleId===t&&i?.type===n,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n}},Ng=N.forwardRef(({type:e="source",position:t=O.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},g)=>{const v=o||null,y=e==="target",k=Se(),h=ok(),{connectOnClick:p,noPanClassName:x}=le(hk,je),{connecting:w,clickConnecting:E}=le(pk(h,v,e),je);h||k.getState().onError?.("010",Zt.error010());const j=A=>{const{defaultEdgeOptions:L,onConnect:$,hasDefaultEdges:U}=k.getState(),H={...L,...A};if(U){const{edges:b,setEdges:z}=k.getState();z(pi(H,b))}$?.(H),l?.(H)},C=A=>{if(!h)return;const L=dg(A);s&&(L&&A.button===0||!L)&&kg({event:A,handleId:v,nodeId:h,onConnect:j,isTarget:y,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||If}),L?d?.(A):f?.(A)},M=A=>{const{onClickConnectStart:L,onClickConnectEnd:$,connectionClickStartHandle:U,connectionMode:H,isValidConnection:b}=k.getState();if(!h||!U&&!s)return;if(!U){L?.(A,{nodeId:h,handleId:v,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:h,type:e,handleId:v}});return}const z=ag(A.target),_=n||b||If,{connection:D,isValid:T}=bg({nodeId:h,id:v,type:e},H,U.nodeId,U.handleId||null,U.type,_,z);T&&j(D),$?.(A),k.setState({connectionClickStartHandle:null})};return R.createElement("div",{"data-handleid":v,"data-nodeid":h,"data-handlepos":t,"data-id":`${h}-${v}-${e}`,className:Pe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,u,{source:!y,target:y,connectable:r,connectablestart:s,connectableend:i,connecting:E,connectionindicator:r&&(s&&!w||i&&w)}]),onMouseDown:C,onTouchStart:C,onClick:p?M:void 0,ref:g,...m},c)});Ng.displayName="Handle";var X=N.memo(Ng);const Sg=({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:r=O.Bottom})=>R.createElement(R.Fragment,null,R.createElement(X,{type:"target",position:n,isConnectable:t}),e?.label,R.createElement(X,{type:"source",position:r,isConnectable:t}));Sg.displayName="DefaultNode";var jc=N.memo(Sg);const Cg=({data:e,isConnectable:t,sourcePosition:n=O.Bottom})=>R.createElement(R.Fragment,null,e?.label,R.createElement(X,{type:"source",position:n,isConnectable:t}));Cg.displayName="InputNode";var Eg=N.memo(Cg);const jg=({data:e,isConnectable:t,targetPosition:n=O.Top})=>R.createElement(R.Fragment,null,R.createElement(X,{type:"target",position:n,isConnectable:t}),e?.label);jg.displayName="OutputNode";var _g=N.memo(jg);const Hu=()=>null;Hu.displayName="GroupNode";const gk=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Bi=e=>e.id;function yk(e,t){return je(e.selectedNodes.map(Bi),t.selectedNodes.map(Bi))&&je(e.selectedEdges.map(Bi),t.selectedEdges.map(Bi))}const Tg=N.memo(({onSelectionChange:e})=>{const t=Se(),{selectedNodes:n,selectedEdges:r}=le(gk,yk);return N.useEffect(()=>{const s={nodes:n,edges:r};e?.(s),t.getState().onSelectionChange.forEach(i=>i(s))},[n,r,e]),null});Tg.displayName="SelectionListener";const xk=e=>!!e.onSelectionChange;function vk({onSelectionChange:e}){const t=le(xk);return e||t?R.createElement(Tg,{onSelectionChange:e}):null}const wk=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function lr(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Z(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const bk=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:v,minZoom:y,maxZoom:k,nodeExtent:h,onNodesChange:p,onEdgesChange:x,elementsSelectable:w,connectionMode:E,snapGrid:j,snapToGrid:C,translateExtent:M,connectOnClick:A,defaultEdgeOptions:L,fitView:$,fitViewOptions:U,onNodesDelete:H,onEdgesDelete:b,onNodeDrag:z,onNodeDragStart:_,onNodeDragStop:D,onSelectionDrag:T,onSelectionDragStart:S,onSelectionDragStop:P,noPanClassName:I,nodeOrigin:F,rfId:W,autoPanOnConnect:V,autoPanOnNodeDrag:G,onError:Y,connectionRadius:K,isValidConnection:se,nodeDragThreshold:re})=>{const{setNodes:ne,setEdges:_e,setDefaultNodesAndEdges:be,setMinZoom:Oe,setMaxZoom:Ae,setTranslateExtent:xe,setNodeExtent:Ze,reset:oe}=le(wk,je),Q=Se();return N.useEffect(()=>{const $e=r?.map(It=>({...It,...L}));return be(n,$e),()=>{oe()}},[]),Z("defaultEdgeOptions",L,Q.setState),Z("connectionMode",E,Q.setState),Z("onConnect",s,Q.setState),Z("onConnectStart",i,Q.setState),Z("onConnectEnd",o,Q.setState),Z("onClickConnectStart",l,Q.setState),Z("onClickConnectEnd",c,Q.setState),Z("nodesDraggable",u,Q.setState),Z("nodesConnectable",d,Q.setState),Z("nodesFocusable",f,Q.setState),Z("edgesFocusable",m,Q.setState),Z("edgesUpdatable",g,Q.setState),Z("elementsSelectable",w,Q.setState),Z("elevateNodesOnSelect",v,Q.setState),Z("snapToGrid",C,Q.setState),Z("snapGrid",j,Q.setState),Z("onNodesChange",p,Q.setState),Z("onEdgesChange",x,Q.setState),Z("connectOnClick",A,Q.setState),Z("fitViewOnInit",$,Q.setState),Z("fitViewOnInitOptions",U,Q.setState),Z("onNodesDelete",H,Q.setState),Z("onEdgesDelete",b,Q.setState),Z("onNodeDrag",z,Q.setState),Z("onNodeDragStart",_,Q.setState),Z("onNodeDragStop",D,Q.setState),Z("onSelectionDrag",T,Q.setState),Z("onSelectionDragStart",S,Q.setState),Z("onSelectionDragStop",P,Q.setState),Z("noPanClassName",I,Q.setState),Z("nodeOrigin",F,Q.setState),Z("rfId",W,Q.setState),Z("autoPanOnConnect",V,Q.setState),Z("autoPanOnNodeDrag",G,Q.setState),Z("onError",Y,Q.setState),Z("connectionRadius",K,Q.setState),Z("isValidConnection",se,Q.setState),Z("nodeDragThreshold",re,Q.setState),lr(e,ne),lr(t,_e),lr(y,Oe),lr(k,Ae),lr(M,xe),lr(h,Ze),null},Df={display:"none"},kk={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Mg="react-flow__node-desc",Rg="react-flow__edge-desc",Nk="react-flow__aria-live",Sk=e=>e.ariaLiveMessage;function Ck({rfId:e}){const t=le(Sk);return R.createElement("div",{id:`${Nk}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:kk},t)}function Ek({rfId:e,disableKeyboardA11y:t}){return R.createElement(R.Fragment,null,R.createElement("div",{id:`${Mg}-${e}`,style:Df},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),R.createElement("div",{id:`${Rg}-${e}`,style:Df},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&R.createElement(Ck,{rfId:e}))}var si=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=N.useState(!1),s=N.useRef(!1),i=N.useRef(new Set([])),[o,l]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,u=t?.target||c;if(e!==null){const d=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Nc(g))return!1;const y=Of(g.code,l);i.current.add(g[y]),Ff(o,i.current,!1)&&(g.preventDefault(),r(!0))},f=g=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Nc(g))return!1;const y=Of(g.code,l);Ff(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(g[y]),g.key==="Meta"&&i.current.clear(),s.current=!1},m=()=>{i.current.clear(),r(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,r]),n};function Ff(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function Of(e,t){return t.includes(e)?"code":"key"}function Pg(e,t,n,r){const s=e.parentNode||e.parentId;if(!s)return n;const i=t.get(s),o=qn(i,r);return Pg(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(i[ye]?.z??0)>(n.z??0)?i[ye]?.z??0:n.z??0},r)}function Ag(e,t,n){e.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:i,y:o,z:l}=Pg(r,e,{...r.position,z:r[ye]?.z??0},t);r.positionAbsolute={x:i,y:o},r[ye].z=l,n?.[r.id]&&(r[ye].isParent=!0)}})}function hl(e,t,n,r){const s=new Map,i={},o=r?1e3:0;return e.forEach(l=>{const c=(dt(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const m=u?.type&&u?.type!==l.type;Object.defineProperty(d,ye,{enumerable:!1,value:{handleBounds:m?void 0:u?.[ye]?.handleBounds,z:c}}),s.set(l.id,d)}),Ag(s,n,i),s}function zg(e,t={}){const{getNodes:n,width:r,height:s,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const v=n().filter(k=>{const h=t.includeHiddenNodes?k.width&&k.height:!k.hidden;return t.nodes?.length?h&&t.nodes.some(p=>p.id===k.id):h}),y=v.every(k=>k.width&&k.height);if(v.length>0&&y){const k=ba(v,f),{x:h,y:p,zoom:x}=vg(k,r,s,t.minZoom??i,t.maxZoom??o,t.padding??.1),w=Wt.translate(h,p).scale(x);return typeof t.duration=="number"&&t.duration>0?l.transform(Ln(c,t.duration),w):l.transform(c,w),!0}}return!1}function jk(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ye]:r[ye],selected:n.selected})}),new Map(t)}function _k(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Hi({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e?.length&&(c&&r({nodeInternals:jk(e,s)}),o?.(e)),t?.length&&(u&&r({edges:_k(t,i)}),l?.(t))}const cr=()=>{},Tk={zoomIn:cr,zoomOut:cr,zoomTo:cr,getZoom:()=>1,setViewport:cr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:cr,fitBounds:cr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Mk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Rk=()=>{const e=Se(),{d3Zoom:t,d3Selection:n}=le(Mk,je);return N.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Ln(n,s?.duration),1.2),zoomOut:s=>t.scaleBy(Ln(n,s?.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(Ln(n,i?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[o,l,c]=e.getState().transform,u=Wt.translate(s.x??o,s.y??l).scale(s.zoom??c);t.transform(Ln(n,i?.duration),u)},getViewport:()=>{const[s,i,o]=e.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>zg(e.getState,s),setCenter:(s,i,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof o?.zoom<"u"?o.zoom:u,f=l/2-s*d,m=c/2-i*d,g=Wt.translate(f,m).scale(d);t.transform(Ln(n,o?.duration),g)},fitBounds:(s,i)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=vg(s,o,l,c,u,i?.padding??.1),g=Wt.translate(d,f).scale(m);t.transform(Ln(n,i?.duration),g)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ec(s,i,o,l)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return s;const{x:u,y:d}=c.getBoundingClientRect(),f={x:s.x-u,y:s.y-d};return Ec(f,i,o,l)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=e.getState();if(!o)return s;const{x:l,y:c}=o.getBoundingClientRect(),u=gg(s,i);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:Tk,[t,n])};function gi(){const e=Rk(),t=Se(),n=N.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=N.useCallback(y=>t.getState().nodeInternals.get(y),[]),s=N.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(k=>({...k}))},[]),i=N.useCallback(y=>{const{edges:k=[]}=t.getState();return k.find(h=>h.id===y)},[]),o=N.useCallback(y=>{const{getNodes:k,setNodes:h,hasDefaultNodes:p,onNodesChange:x}=t.getState(),w=k(),E=typeof y=="function"?y(w):y;if(p)h(E);else if(x){const j=E.length===0?w.map(C=>({type:"remove",id:C.id})):E.map(C=>({item:C,type:"reset"}));x(j)}},[]),l=N.useCallback(y=>{const{edges:k=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:x}=t.getState(),w=typeof y=="function"?y(k):y;if(p)h(w);else if(x){const E=w.length===0?k.map(j=>({type:"remove",id:j.id})):w.map(j=>({item:j,type:"reset"}));x(E)}},[]),c=N.useCallback(y=>{const k=Array.isArray(y)?y:[y],{getNodes:h,setNodes:p,hasDefaultNodes:x,onNodesChange:w}=t.getState();if(x){const j=[...h(),...k];p(j)}else if(w){const E=k.map(j=>({item:j,type:"add"}));w(E)}},[]),u=N.useCallback(y=>{const k=Array.isArray(y)?y:[y],{edges:h=[],setEdges:p,hasDefaultEdges:x,onEdgesChange:w}=t.getState();if(x)p([...h,...k]);else if(w){const E=k.map(j=>({item:j,type:"add"}));w(E)}},[]),d=N.useCallback(()=>{const{getNodes:y,edges:k=[],transform:h}=t.getState(),[p,x,w]=h;return{nodes:y().map(E=>({...E})),edges:k.map(E=>({...E})),viewport:{x:p,y:x,zoom:w}}},[]),f=N.useCallback(({nodes:y,edges:k})=>{const{nodeInternals:h,getNodes:p,edges:x,hasDefaultNodes:w,hasDefaultEdges:E,onNodesDelete:j,onEdgesDelete:C,onNodesChange:M,onEdgesChange:A}=t.getState(),L=(y||[]).map(z=>z.id),$=(k||[]).map(z=>z.id),U=p().reduce((z,_)=>{const D=_.parentNode||_.parentId,T=!L.includes(_.id)&&D&&z.find(P=>P.id===D);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(L.includes(_.id)||T)&&z.push(_),z},[]),H=x.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),b=H.filter(z=>$.includes(z.id));if(U||b){const z=xg(U,H),_=[...b,...z],D=_.reduce((T,S)=>(T.includes(S.id)||T.push(S.id),T),[]);if((E||w)&&(E&&t.setState({edges:x.filter(T=>!D.includes(T.id))}),w&&(U.forEach(T=>{h.delete(T.id)}),t.setState({nodeInternals:new Map(h)}))),D.length>0&&(C?.(_),A&&A(D.map(T=>({id:T,type:"remove"})))),U.length>0&&(j?.(U),M)){const T=U.map(S=>({id:S.id,type:"remove"}));M(T)}}},[]),m=N.useCallback(y=>{const k=Z2(y),h=k?null:t.getState().nodeInternals.get(y.id);return!k&&!h?[null,null,k]:[k?y:Mf(h),h,k]},[]),g=N.useCallback((y,k=!0,h)=>{const[p,x,w]=m(y);return p?(h||t.getState().getNodes()).filter(E=>{if(!w&&(E.id===x.id||!E.positionAbsolute))return!1;const j=Mf(E),C=kc(j,p);return k&&C>0||C>=p.width*p.height}):[]},[]),v=N.useCallback((y,k,h=!0)=>{const[p]=m(y);if(!p)return!1;const x=kc(p,k);return h&&x>0||x>=p.width*p.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:v}),[e,n,r,s,i,o,l,c,u,d,f,g,v])}const Pk={actInsideInputWithModifier:!1};var Ak=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Se(),{deleteElements:r}=gi(),s=si(e,Pk),i=si(t);N.useEffect(()=>{if(s){const{edges:o,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),N.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function zk(e){const t=Se();N.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const s=Lu(e.current);(s.height===0||s.width===0)&&t.getState().onError?.("004",Zt.error004()),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Uu={position:"absolute",width:"100%",height:"100%",top:0,left:0},Lk=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ui=e=>({x:e.x,y:e.y,zoom:e.k}),ur=(e,t)=>e.target.closest(`.${t}`),$f=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Bf=e=>{const t=e.ctrlKey&&$o()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Ik=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Dk=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Bn.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:g,minZoom:v,maxZoom:y,zoomActivationKeyCode:k,preventScrolling:h=!0,children:p,noWheelClassName:x,noPanClassName:w})=>{const E=N.useRef(),j=Se(),C=N.useRef(!1),M=N.useRef(!1),A=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:U,d3ZoomHandler:H,userSelectionActive:b}=le(Ik,je),z=si(k),_=N.useRef(0),D=N.useRef(!1),T=N.useRef();return zk(A),N.useEffect(()=>{if(A.current){const S=A.current.getBoundingClientRect(),P=sg().scaleExtent([v,y]).translateExtent(g),I=ct(A.current).call(P),F=Wt.translate(m.x,m.y).scale(Vr(m.zoom,v,y)),W=[[0,0],[S.width,S.height]],V=P.constrain()(F,W,g);P.transform(I,V),P.wheelDelta(Bf),j.setState({d3Zoom:P,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[V.x,V.y,V.k],domNode:A.current.closest(".react-flow")})}},[]),N.useEffect(()=>{U&&$&&(o&&!z&&!b?U.on("wheel.zoom",S=>{if(ur(S,x))return!1;S.preventDefault(),S.stopImmediatePropagation();const P=U.property("__zoom").k||1;if(S.ctrlKey&&i){const se=xt(S),re=Bf(S),ne=P*Math.pow(2,re);$.scaleTo(U,ne,se,S);return}const I=S.deltaMode===1?20:1;let F=c===Bn.Vertical?0:S.deltaX*I,W=c===Bn.Horizontal?0:S.deltaY*I;!$o()&&S.shiftKey&&c!==Bn.Vertical&&(F=S.deltaY*I,W=0),$.translateBy(U,-(F/P)*l,-(W/P)*l,{internal:!0});const V=Ui(U.property("__zoom")),{onViewportChangeStart:G,onViewportChange:Y,onViewportChangeEnd:K}=j.getState();clearTimeout(T.current),D.current||(D.current=!0,t?.(S,V),G?.(V)),D.current&&(e?.(S,V),Y?.(V),T.current=setTimeout(()=>{n?.(S,V),K?.(V),D.current=!1},150))},{passive:!1}):typeof H<"u"&&U.on("wheel.zoom",function(S,P){if(!h&&S.type==="wheel"&&!S.ctrlKey||ur(S,x))return null;S.preventDefault(),H.call(this,S,P)},{passive:!1}))},[b,o,c,U,$,H,z,i,h,x,t,e,n]),N.useEffect(()=>{$&&$.on("start",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;_.current=S.sourceEvent?.button;const{onViewportChangeStart:P}=j.getState(),I=Ui(S.transform);C.current=!0,L.current=I,S.sourceEvent?.type==="mousedown"&&j.setState({paneDragging:!0}),P?.(I),t?.(S.sourceEvent,I)})},[$,t]),N.useEffect(()=>{$&&(b&&!C.current?$.on("zoom",null):b||$.on("zoom",S=>{const{onViewportChange:P}=j.getState();if(j.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),M.current=!!(r&&$f(f,_.current??0)),(e||P)&&!S.sourceEvent?.internal){const I=Ui(S.transform);P?.(I),e?.(S.sourceEvent,I)}}))},[b,$,e,f,r]),N.useEffect(()=>{$&&$.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:P}=j.getState();if(C.current=!1,j.setState({paneDragging:!1}),r&&$f(f,_.current??0)&&!M.current&&r(S.sourceEvent),M.current=!1,(n||P)&&Lk(L.current,S.transform)){const I=Ui(S.transform);L.current=I,clearTimeout(E.current),E.current=setTimeout(()=>{P?.(I),n?.(S.sourceEvent,I)},o?150:0)}})},[$,o,f,n,r]),N.useEffect(()=>{$&&$.filter(S=>{const P=z||s,I=i&&S.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&S.button===1&&S.type==="mousedown"&&(ur(S,"react-flow__node")||ur(S,"react-flow__edge")))return!0;if(!f&&!P&&!o&&!u&&!i||b||!u&&S.type==="dblclick"||ur(S,x)&&S.type==="wheel"||ur(S,w)&&(S.type!=="wheel"||o&&S.type==="wheel"&&!z)||!i&&S.ctrlKey&&S.type==="wheel"||!P&&!o&&!I&&S.type==="wheel"||!f&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(f)&&!f.includes(S.button)&&S.type==="mousedown")return!1;const F=Array.isArray(f)&&f.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&F})},[b,$,s,i,o,u,f,d,z]),R.createElement("div",{className:"react-flow__renderer",ref:A,style:Uu},p)},Fk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ok(){const{userSelectionActive:e,userSelectionRect:t}=le(Fk,je);return e&&t?R.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Hf(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),i>0&&(r.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Lg(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const i=e.filter(l=>l.id===s.id);if(i.length===0)return r.push(s),r;const o={...s};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&Hf(r,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&Hf(r,o);break}case"remove":return r}return r.push(o),r},n)}function Ig(e,t){return Lg(e,t)}function $k(e,t){return Lg(e,t)}const on=(e,t)=>({id:e,type:"select",selected:t});function Sr(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(on(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(on(r.id,!1))),n},[])}const pl=(e,t)=>n=>{n.target===t.current&&e?.(n)},Bk=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Dg=N.memo(({isSelecting:e,selectionMode:t=ri.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=N.useRef(null),g=Se(),v=N.useRef(0),y=N.useRef(0),k=N.useRef(),{userSelectionActive:h,elementsSelectable:p,dragging:x}=le(Bk,je),w=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},E=H=>{i?.(H),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},j=H=>{if(Array.isArray(n)&&n?.includes(2)){H.preventDefault();return}o?.(H)},C=l?H=>l(H):void 0,M=H=>{const{resetSelectedElements:b,domNode:z}=g.getState();if(k.current=z?.getBoundingClientRect(),!p||!e||H.button!==0||H.target!==m.current||!k.current)return;const{x:_,y:D}=bn(H,k.current);b(),g.setState({userSelectionRect:{width:0,height:0,startX:_,startY:D,x:_,y:D}}),r?.(H)},A=H=>{const{userSelectionRect:b,nodeInternals:z,edges:_,transform:D,onNodesChange:T,onEdgesChange:S,nodeOrigin:P,getNodes:I}=g.getState();if(!e||!k.current||!b)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=bn(H,k.current),W=b.startX??0,V=b.startY??0,G={...b,x:F.x<W?F.x:W,y:F.y<V?F.y:V,width:Math.abs(F.x-W),height:Math.abs(F.y-V)},Y=I(),K=yg(z,G,D,t===ri.Partial,!0,P),se=xg(K,_).map(ne=>ne.id),re=K.map(ne=>ne.id);if(v.current!==re.length){v.current=re.length;const ne=Sr(Y,re);ne.length&&T?.(ne)}if(y.current!==se.length){y.current=se.length;const ne=Sr(_,se);ne.length&&S?.(ne)}g.setState({userSelectionRect:G})},L=H=>{if(H.button!==0)return;const{userSelectionRect:b}=g.getState();!h&&b&&H.target===m.current&&E?.(H),g.setState({nodesSelectionActive:v.current>0}),w(),s?.(H)},$=H=>{h&&(g.setState({nodesSelectionActive:v.current>0}),s?.(H)),w()},U=p&&(e||h);return R.createElement("div",{className:Pe(["react-flow__pane",{dragging:x,selection:e}]),onClick:U?void 0:pl(E,m),onContextMenu:pl(j,m),onWheel:pl(C,m),onMouseEnter:U?void 0:c,onMouseDown:U?M:void 0,onMouseMove:U?A:u,onMouseUp:U?L:void 0,onMouseLeave:U?$:d,ref:m,style:Uu},f,R.createElement(Ok,null))});Dg.displayName="Pane";function Fg(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Fg(r,t):!1}function Uf(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Hk(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Fg(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function Uk(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Og(e,t,n,r,s=[0,0],i){const o=Uk(e,e.extent||r);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:g}=qn(f,s).positionAbsolute;l=f&&dt(m)&&dt(g)&&dt(f.width)&&dt(f.height)?[[m+e.width*s[0],g+e.height*s[1]],[m+f.width-e.width+e.width*s[0],g+f.height-e.height+e.height*s[1]]]:l}else i?.("005",Zt.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:g}=qn(f,s).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+g],[e.extent[1][0]+m,e.extent[1][1]+g]]}let u={x:0,y:0};if(c){const f=n.get(c);u=qn(f,s).positionAbsolute}const d=l&&l!=="parent"?Iu(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function gl({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const Vf=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),o=t.getBoundingClientRect(),l={x:o.width*r[0],y:o.height*r[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/n,y:(u.top-o.top-l.y)/n,...Lu(c)}})};function us(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function _c({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c?.("012",Zt.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([e])}function Vk(){const e=Se();return N.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?s[0]*Math.round(c.x/s[0]):c.x,ySnapped:i?s[1]*Math.round(c.y/s[1]):c.y,...c}},[])}function yl(e){return(t,n,r)=>e?.(t,r)}function $g({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const l=Se(),[c,u]=N.useState(!1),d=N.useRef([]),f=N.useRef({x:null,y:null}),m=N.useRef(0),g=N.useRef(null),v=N.useRef({x:0,y:0}),y=N.useRef(null),k=N.useRef(!1),h=N.useRef(!1),p=N.useRef(!1),x=Vk();return N.useEffect(()=>{if(e?.current){const w=ct(e.current),E=({x:M,y:A})=>{const{nodeInternals:L,onNodeDrag:$,onSelectionDrag:U,updateNodePositions:H,nodeExtent:b,snapGrid:z,snapToGrid:_,nodeOrigin:D,onError:T}=l.getState();f.current={x:M,y:A};let S=!1,P={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&b){const F=ba(d.current,D);P=ni(F)}if(d.current=d.current.map(F=>{const W={x:M-F.distance.x,y:A-F.distance.y};_&&(W.x=z[0]*Math.round(W.x/z[0]),W.y=z[1]*Math.round(W.y/z[1]));const V=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];d.current.length>1&&b&&!F.extent&&(V[0][0]=F.positionAbsolute.x-P.x+b[0][0],V[1][0]=F.positionAbsolute.x+(F.width??0)-P.x2+b[1][0],V[0][1]=F.positionAbsolute.y-P.y+b[0][1],V[1][1]=F.positionAbsolute.y+(F.height??0)-P.y2+b[1][1]);const G=Og(F,W,L,V,D,T);return S=S||F.position.x!==G.position.x||F.position.y!==G.position.y,F.position=G.position,F.positionAbsolute=G.positionAbsolute,F}),!S)return;H(d.current,!0,!0),u(!0);const I=s?$:yl(U);if(I&&y.current){const[F,W]=gl({nodeId:s,dragItems:d.current,nodeInternals:L});I(y.current,F,W)}},j=()=>{if(!g.current)return;const[M,A]=og(v.current,g.current);if(M!==0||A!==0){const{transform:L,panBy:$}=l.getState();f.current.x=(f.current.x??0)-M/L[2],f.current.y=(f.current.y??0)-A/L[2],$({x:M,y:A})&&E(f.current)}m.current=requestAnimationFrame(j)},C=M=>{const{nodeInternals:A,multiSelectionActive:L,nodesDraggable:$,unselectNodesAndEdges:U,onNodeDragStart:H,onSelectionDragStart:b}=l.getState();h.current=!0;const z=s?H:yl(b);(!o||!i)&&!L&&s&&(A.get(s)?.selected||U()),s&&i&&o&&_c({id:s,store:l,nodeRef:e});const _=x(M);if(f.current=_,d.current=Hk(A,$,_,s),z&&d.current){const[D,T]=gl({nodeId:s,dragItems:d.current,nodeInternals:A});z(M.sourceEvent,D,T)}};if(t)w.on(".drag",null);else{const M=nb().on("start",A=>{const{domNode:L,nodeDragThreshold:$}=l.getState();$===0&&C(A),p.current=!1;const U=x(A);f.current=U,g.current=L?.getBoundingClientRect()||null,v.current=bn(A.sourceEvent,g.current)}).on("drag",A=>{const L=x(A),{autoPanOnNodeDrag:$,nodeDragThreshold:U}=l.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(p.current=!0),!p.current){if(!k.current&&h.current&&$&&(k.current=!0,j()),!h.current){const H=L.xSnapped-(f?.current?.x??0),b=L.ySnapped-(f?.current?.y??0);Math.sqrt(H*H+b*b)>U&&C(A)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&h.current&&(y.current=A.sourceEvent,v.current=bn(A.sourceEvent,g.current),E(L))}}).on("end",A=>{if(!(!h.current||p.current)&&(u(!1),k.current=!1,h.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:L,nodeInternals:$,onNodeDragStop:U,onSelectionDragStop:H}=l.getState(),b=s?U:yl(H);if(L(d.current,!1,!1),b){const[z,_]=gl({nodeId:s,dragItems:d.current,nodeInternals:$});b(A.sourceEvent,z,_)}}}).filter(A=>{const L=A.target;return!A.button&&(!n||!Uf(L,`.${n}`,e))&&(!r||Uf(L,r,e))});return w.call(M),()=>{w.on(".drag",null)}}}},[e,t,n,r,i,l,s,o,x]),c}function Bg(){const e=Se();return N.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(p=>p.selected&&(p.draggable||d&&typeof p.draggable>"u")),m=l?c[0]:5,g=l?c[1]:5,v=n.isShiftPressed?4:1,y=n.x*m*v,k=n.y*g*v,h=f.map(p=>{if(p.positionAbsolute){const x={x:p.positionAbsolute.x+y,y:p.positionAbsolute.y+k};l&&(x.x=c[0]*Math.round(x.x/c[0]),x.y=c[1]*Math.round(x.y/c[1]));const{positionAbsolute:w,position:E}=Og(p,x,r,s,void 0,u);p.position=E,p.positionAbsolute=w}return p});i(h,!0,!1)},[])}const Ar={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ds=e=>{const t=({id:n,type:r,data:s,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:g,onContextMenu:v,onDoubleClick:y,style:k,className:h,isDraggable:p,isSelectable:x,isConnectable:w,isFocusable:E,selectNodesOnDrag:j,sourcePosition:C,targetPosition:M,hidden:A,resizeObserver:L,dragHandle:$,zIndex:U,isParent:H,noDragClassName:b,noPanClassName:z,initialized:_,disableKeyboardA11y:D,ariaLabel:T,rfId:S,hasHandleBounds:P})=>{const I=Se(),F=N.useRef(null),W=N.useRef(null),V=N.useRef(C),G=N.useRef(M),Y=N.useRef(r),K=x||p||d||f||m||g,se=Bg(),re=us(n,I.getState,f),ne=us(n,I.getState,m),_e=us(n,I.getState,g),be=us(n,I.getState,v),Oe=us(n,I.getState,y),Ae=oe=>{const{nodeDragThreshold:Q}=I.getState();if(x&&(!j||!p||Q>0)&&_c({id:n,store:I,nodeRef:F}),d){const $e=I.getState().nodeInternals.get(n);$e&&d(oe,{...$e})}},xe=oe=>{if(!Nc(oe)&&!D)if(ug.includes(oe.key)&&x){const Q=oe.key==="Escape";_c({id:n,store:I,unselect:Q,nodeRef:F})}else p&&u&&Object.prototype.hasOwnProperty.call(Ar,oe.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${oe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),se({x:Ar[oe.key].x,y:Ar[oe.key].y,isShiftPressed:oe.shiftKey}))};N.useEffect(()=>()=>{W.current&&(L?.unobserve(W.current),W.current=null)},[]),N.useEffect(()=>{if(F.current&&!A){const oe=F.current;(!_||!P||W.current!==oe)&&(W.current&&L?.unobserve(W.current),L?.observe(oe),W.current=oe)}},[A,_,P]),N.useEffect(()=>{const oe=Y.current!==r,Q=V.current!==C,$e=G.current!==M;F.current&&(oe||Q||$e)&&(oe&&(Y.current=r),Q&&(V.current=C),$e&&(G.current=M),I.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,C,M]);const Ze=$g({nodeRef:F,disabled:A||!p,noDragClassName:b,handleSelector:$,nodeId:n,isSelectable:x,selectNodesOnDrag:j});return A?null:R.createElement("div",{className:Pe(["react-flow__node",`react-flow__node-${r}`,{[z]:p},h,{selected:u,selectable:x,parent:H,dragging:Ze}]),ref:F,style:{zIndex:U,transform:`translate(${l}px,${c}px)`,pointerEvents:K?"all":"none",visibility:_?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:ne,onMouseLeave:_e,onContextMenu:be,onClick:Ae,onDoubleClick:Oe,onKeyDown:E?xe:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":D?void 0:`${Mg}-${S}`,"aria-label":T},R.createElement(ik,{value:n},R.createElement(e,{id:n,data:s,type:r,xPos:i,yPos:o,selected:u,isConnectable:w,sourcePosition:C,targetPosition:M,dragging:Ze,dragHandle:$,zIndex:U})))};return t.displayName="NodeWrapper",N.memo(t)};const qk=e=>{const t=e.getNodes().filter(n=>n.selected);return{...ba(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Wk({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Se(),{width:s,height:i,x:o,y:l,transformString:c,userSelectionActive:u}=le(qk,je),d=Bg(),f=N.useRef(null);if(N.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),$g({nodeRef:f}),u||!s||!i)return null;const m=e?v=>{const y=r.getState().getNodes().filter(k=>k.selected);e(v,y)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call(Ar,v.key)&&d({x:Ar[v.key].x,y:Ar[v.key].y,isShiftPressed:v.shiftKey})};return R.createElement("div",{className:Pe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},R.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:i,top:l,left:o}}))}var Qk=N.memo(Wk);const Gk=e=>e.nodesSelectionActive,Hg=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:g,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:k,panActivationKeyCode:h,zoomActivationKeyCode:p,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:j,panOnScrollSpeed:C,panOnScrollMode:M,zoomOnDoubleClick:A,panOnDrag:L,defaultViewport:$,translateExtent:U,minZoom:H,maxZoom:b,preventScrolling:z,onSelectionContextMenu:_,noWheelClassName:D,noPanClassName:T,disableKeyboardA11y:S})=>{const P=le(Gk),I=si(f),F=si(h),W=F||L,V=F||j,G=I||m&&W!==!0;return Ak({deleteKeyCode:l,multiSelectionKeyCode:k}),R.createElement(Dk,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:V,panOnScrollSpeed:C,panOnScrollMode:M,zoomOnDoubleClick:A,panOnDrag:!I&&W,defaultViewport:$,translateExtent:U,minZoom:H,maxZoom:b,zoomActivationKeyCode:p,preventScrolling:z,noWheelClassName:D,noPanClassName:T},R.createElement(Dg,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:W,isSelecting:!!G,selectionMode:g},e,P&&R.createElement(Qk,{onSelectionContextMenu:_,noPanClassName:T,disableKeyboardA11y:S})))};Hg.displayName="FlowRenderer";var Yk=N.memo(Hg);function Xk(e){return le(N.useCallback(n=>e?yg(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Kk(e){const t={input:ds(e.input||Eg),default:ds(e.default||jc),output:ds(e.output||_g),group:ds(e.group||Hu)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=ds(e[i]||jc),s),n);return{...t,...r}}const Zk=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},Jk=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ug=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:i,onError:o}=le(Jk,je),l=Xk(e.onlyRenderVisibleElements),c=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));i(m)});return c.current=d,d},[]);return N.useEffect(()=>()=>{c?.current?.disconnect()},[]),R.createElement("div",{className:"react-flow__nodes",style:Uu},l.map(d=>{let f=d.type||"default";e.nodeTypes[f]||(o?.("003",Zt.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,g=!!(d.draggable||t&&typeof d.draggable>"u"),v=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||n&&typeof d.connectable>"u"),k=!!(d.focusable||r&&typeof d.focusable>"u"),h=e.nodeExtent?Iu(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,p=h?.x??0,x=h?.y??0,w=Zk({x:p,y:x,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return R.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||O.Bottom,targetPosition:d.targetPosition||O.Top,hidden:d.hidden,xPos:p,yPos:x,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:v,isConnectable:y,isFocusable:k,resizeObserver:u,dragHandle:d.dragHandle,zIndex:d[ye]?.z??0,isParent:!!d[ye]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!d[ye]?.handleBounds})}))};Ug.displayName="NodeRenderer";var eN=N.memo(Ug);const tN=(e,t,n)=>n===O.Left?e-t:n===O.Right?e+t:e,nN=(e,t,n)=>n===O.Top?e-t:n===O.Bottom?e+t:e,qf="react-flow__edgeupdater",Wf=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:l})=>R.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:Pe([qf,`${qf}-${l}`]),cx:tN(t,r,e),cy:nN(n,r,e),r,stroke:"transparent",fill:"transparent"}),rN=()=>!0;var dr=e=>{const t=({id:n,className:r,type:s,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:y,style:k,source:h,target:p,sourceX:x,sourceY:w,targetX:E,targetY:j,sourcePosition:C,targetPosition:M,elementsSelectable:A,hidden:L,sourceHandleId:$,targetHandleId:U,onContextMenu:H,onMouseEnter:b,onMouseMove:z,onMouseLeave:_,reconnectRadius:D,onReconnect:T,onReconnectStart:S,onReconnectEnd:P,markerEnd:I,markerStart:F,rfId:W,ariaLabel:V,isFocusable:G,isReconnectable:Y,pathOptions:K,interactionWidth:se,disableKeyboardA11y:re})=>{const ne=N.useRef(null),[_e,be]=N.useState(!1),[Oe,Ae]=N.useState(!1),xe=Se(),Ze=N.useMemo(()=>`url('#${Cc(F,W)}')`,[F,W]),oe=N.useMemo(()=>`url('#${Cc(I,W)}')`,[I,W]);if(L)return null;const Q=ze=>{const{edges:Et,addSelectedEdges:Tn,unselectNodesAndEdges:Mn,multiSelectionActive:or}=xe.getState(),jt=Et.find(Rn=>Rn.id===n);jt&&(A&&(xe.setState({nodesSelectionActive:!1}),jt.selected&&or?(Mn({nodes:[],edges:[jt]}),ne.current?.blur()):Tn([n])),o&&o(ze,jt))},$e=cs(n,xe.getState,l),It=cs(n,xe.getState,H),Xr=cs(n,xe.getState,b),tr=cs(n,xe.getState,z),nr=cs(n,xe.getState,_),Dt=(ze,Et)=>{if(ze.button!==0)return;const{edges:Tn,isValidConnection:Mn}=xe.getState(),or=Et?p:h,jt=(Et?U:$)||null,Rn=Et?"target":"source",Pa=Mn||rN,Aa=Et,Zr=Tn.find(Pn=>Pn.id===n);Ae(!0),S?.(ze,Zr,Rn);const za=Pn=>{Ae(!1),P?.(Pn,Zr,Rn)};kg({event:ze,handleId:jt,nodeId:or,onConnect:Pn=>T?.(Zr,Pn),isTarget:Aa,getState:xe.getState,setState:xe.setState,isValidConnection:Pa,edgeUpdaterType:Rn,onReconnectEnd:za})},rr=ze=>Dt(ze,!0),jn=ze=>Dt(ze,!1),_n=()=>be(!0),sr=()=>be(!1),ir=!A&&!o,Kr=ze=>{if(!re&&ug.includes(ze.key)&&A){const{unselectNodesAndEdges:Et,addSelectedEdges:Tn,edges:Mn}=xe.getState();ze.key==="Escape"?(ne.current?.blur(),Et({edges:[Mn.find(jt=>jt.id===n)]})):Tn([n])}};return R.createElement("g",{className:Pe(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:c,animated:u,inactive:ir,updating:_e}]),onClick:Q,onDoubleClick:$e,onContextMenu:It,onMouseEnter:Xr,onMouseMove:tr,onMouseLeave:nr,onKeyDown:G?Kr:void 0,tabIndex:G?0:void 0,role:G?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":V===null?void 0:V||`Edge from ${h} to ${p}`,"aria-describedby":G?`${Rg}-${W}`:void 0,ref:ne},!Oe&&R.createElement(e,{id:n,source:h,target:p,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:y,data:i,style:k,sourceX:x,sourceY:w,targetX:E,targetY:j,sourcePosition:C,targetPosition:M,sourceHandleId:$,targetHandleId:U,markerStart:Ze,markerEnd:oe,pathOptions:K,interactionWidth:se}),Y&&R.createElement(R.Fragment,null,(Y==="source"||Y===!0)&&R.createElement(Wf,{position:C,centerX:x,centerY:w,radius:D,onMouseDown:rr,onMouseEnter:_n,onMouseOut:sr,type:"source"}),(Y==="target"||Y===!0)&&R.createElement(Wf,{position:M,centerX:E,centerY:j,radius:D,onMouseDown:jn,onMouseEnter:_n,onMouseOut:sr,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function sN(e){const t={default:dr(e.default||Ho),straight:dr(e.bezier||Ou),step:dr(e.step||Fu),smoothstep:dr(e.step||wa),simplebezier:dr(e.simplebezier||Du)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=dr(e[i]||Ho),s),n);return{...t,...r}}function Qf(e,t,n=null){const r=(n?.x||0)+t.x,s=(n?.y||0)+t.y,i=n?.width||t.width,o=n?.height||t.height;switch(e){case O.Top:return{x:r+i/2,y:s};case O.Right:return{x:r+i,y:s+o/2};case O.Bottom:return{x:r+i/2,y:s+o};case O.Left:return{x:r,y:s+o/2}}}function Gf(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const iN=(e,t,n,r,s,i)=>{const o=Qf(n,e,t),l=Qf(i,r,s);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function oN({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:i,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=ni({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function Yf(e){const t=e?.[ye]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const aN=[{level:0,isMaxLevel:!0,edges:[]}];function lN(e,t,n=!1){let r=-1;const s=e.reduce((o,l)=>{const c=dt(l.zIndex);let u=c?l.zIndex:0;if(n){const d=t.get(l.target),f=t.get(l.source),m=l.selected||d?.selected||f?.selected,g=Math.max(f?.[ye]?.z||0,d?.[ye]?.z||0,1e3);u=(c?l.zIndex:0)+(m?g:0)}return o[u]?o[u].push(l):o[u]=[l],r=u>r?u:r,o},{}),i=Object.entries(s).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===r}});return i.length===0?aN:i}function cN(e,t,n){const r=le(N.useCallback(s=>e?s.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return o?.width&&o?.height&&l?.width&&l?.height&&oN({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return lN(r,t,n)}const uN=({color:e="none",strokeWidth:t=1})=>R.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),dN=({color:e="none",strokeWidth:t=1})=>R.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Xf={[Bo.Arrow]:uN,[Bo.ArrowClosed]:dN};function fN(e){const t=Se();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(Xf,e)?Xf[e]:(t.getState().onError?.("009",Zt.error009(e)),null),[e])}const mN=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=fN(t);return c?R.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},R.createElement(c,{color:n,strokeWidth:o})):null},hN=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=Cc(o,t);r.includes(l)||(s.push({id:l,color:o.color||e,...o}),r.push(l))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},Vg=({defaultColor:e,rfId:t})=>{const n=le(N.useCallback(hN({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((i,o)=>i.id!==s[o].id)));return R.createElement("defs",null,n.map(r=>R.createElement(mN,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Vg.displayName="MarkerDefinitions";var pN=N.memo(Vg);const gN=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),qg=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:y,children:k,disableKeyboardA11y:h})=>{const{edgesFocusable:p,edgesUpdatable:x,elementsSelectable:w,width:E,height:j,connectionMode:C,nodeInternals:M,onError:A}=le(gN,je),L=cN(t,M,n);return E?R.createElement(R.Fragment,null,L.map(({level:$,edges:U,isMaxLevel:H})=>R.createElement("svg",{key:$,style:{zIndex:$},width:E,height:j,className:"react-flow__edges react-flow__container"},H&&R.createElement(pN,{defaultColor:e,rfId:r}),R.createElement("g",null,U.map(b=>{const[z,_,D]=Yf(M.get(b.source)),[T,S,P]=Yf(M.get(b.target));if(!D||!P)return null;let I=b.type||"default";s[I]||(A?.("011",Zt.error011(I)),I="default");const F=s[I]||s.default,W=C===Zn.Strict?S.target:(S.target??[]).concat(S.source??[]),V=Gf(_.source,b.sourceHandle),G=Gf(W,b.targetHandle),Y=V?.position||O.Bottom,K=G?.position||O.Top,se=!!(b.focusable||p&&typeof b.focusable>"u"),re=b.reconnectable||b.updatable,ne=typeof m<"u"&&(re||x&&typeof re>"u");if(!V||!G)return A?.("008",Zt.error008(V,b)),null;const{sourceX:_e,sourceY:be,targetX:Oe,targetY:Ae}=iN(z,V,Y,T,G,K);return R.createElement(F,{key:b.id,id:b.id,className:Pe([b.className,i]),type:I,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:_e,sourceY:be,targetX:Oe,targetY:Ae,sourcePosition:Y,targetPosition:K,elementsSelectable:w,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:y,rfId:r,ariaLabel:b.ariaLabel,isFocusable:se,isReconnectable:ne,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:h})})))),k):null};qg.displayName="EdgeRenderer";var yN=N.memo(qg);const xN=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vN({children:e}){const t=le(xN);return R.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function wN(e){const t=gi(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const bN={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top},Wg=({nodeId:e,handleType:t,style:n,type:r=cn.Bezier,CustomComponent:s,connectionStatus:i})=>{const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=le(N.useCallback(j=>({fromNode:j.nodeInternals.get(e),handleId:j.connectionHandleId,toX:(j.connectionPosition.x-j.transform[0])/j.transform[2],toY:(j.connectionPosition.y-j.transform[1])/j.transform[2],connectionMode:j.connectionMode}),[e]),je),f=o?.[ye]?.handleBounds;let m=f?.[t];if(d===Zn.Loose&&(m=m||f?.[t==="source"?"target":"source"]),!o||!m)return null;const g=l?m.find(j=>j.id===l):m[0],v=g?g.x+g.width/2:(o.width??0)/2,y=g?g.y+g.height/2:o.height??0,k=(o.positionAbsolute?.x??0)+v,h=(o.positionAbsolute?.y??0)+y,p=g?.position,x=p?bN[p]:null;if(!p||!x)return null;if(s)return R.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:g,fromX:k,fromY:h,toX:c,toY:u,fromPosition:p,toPosition:x,connectionStatus:i});let w="";const E={sourceX:k,sourceY:h,sourcePosition:p,targetX:c,targetY:u,targetPosition:x};return r===cn.Bezier?[w]=pg(E):r===cn.Step?[w]=Sc({...E,borderRadius:0}):r===cn.SmoothStep?[w]=Sc(E):r===cn.SimpleBezier?[w]=hg(E):w=`M${k},${h} ${c},${u}`,R.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Wg.displayName="ConnectionLine";const kN=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function NN({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:u}=le(kN,je);return!(s&&i&&l&&o)?null:R.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},R.createElement("g",{className:Pe(["react-flow__connection",u])},R.createElement(Wg,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Kf(e,t){return N.useRef(null),Se(),N.useMemo(()=>t(e),[e])}const Qg=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:k,connectionLineType:h,connectionLineStyle:p,connectionLineComponent:x,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:j,selectionMode:C,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:L,deleteKeyCode:$,onlyRenderVisibleElements:U,elementsSelectable:H,selectNodesOnDrag:b,defaultViewport:z,translateExtent:_,minZoom:D,maxZoom:T,preventScrolling:S,defaultMarkerColor:P,zoomOnScroll:I,zoomOnPinch:F,panOnScroll:W,panOnScrollSpeed:V,panOnScrollMode:G,zoomOnDoubleClick:Y,panOnDrag:K,onPaneClick:se,onPaneMouseEnter:re,onPaneMouseMove:ne,onPaneMouseLeave:_e,onPaneScroll:be,onPaneContextMenu:Oe,onEdgeContextMenu:Ae,onEdgeMouseEnter:xe,onEdgeMouseMove:Ze,onEdgeMouseLeave:oe,onReconnect:Q,onReconnectStart:$e,onReconnectEnd:It,reconnectRadius:Xr,noDragClassName:tr,noWheelClassName:nr,noPanClassName:Dt,elevateEdgesOnSelect:rr,disableKeyboardA11y:jn,nodeOrigin:_n,nodeExtent:sr,rfId:ir})=>{const Kr=Kf(e,Kk),ze=Kf(t,sN);return wN(i),R.createElement(Yk,{onPaneClick:se,onPaneMouseEnter:re,onPaneMouseMove:ne,onPaneMouseLeave:_e,onPaneContextMenu:Oe,onPaneScroll:be,deleteKeyCode:$,selectionKeyCode:E,selectionOnDrag:j,selectionMode:C,onSelectionStart:y,onSelectionEnd:k,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:L,elementsSelectable:H,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:I,zoomOnPinch:F,zoomOnDoubleClick:Y,panOnScroll:W,panOnScrollSpeed:V,panOnScrollMode:G,panOnDrag:K,defaultViewport:z,translateExtent:_,minZoom:D,maxZoom:T,onSelectionContextMenu:v,preventScrolling:S,noDragClassName:tr,noWheelClassName:nr,noPanClassName:Dt,disableKeyboardA11y:jn},R.createElement(vN,null,R.createElement(yN,{edgeTypes:ze,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:U,onEdgeContextMenu:Ae,onEdgeMouseEnter:xe,onEdgeMouseMove:Ze,onEdgeMouseLeave:oe,onReconnect:Q,onReconnectStart:$e,onReconnectEnd:It,reconnectRadius:Xr,defaultMarkerColor:P,noPanClassName:Dt,elevateEdgesOnSelect:!!rr,disableKeyboardA11y:jn,rfId:ir},R.createElement(NN,{style:p,type:h,component:x,containerStyle:w})),R.createElement("div",{className:"react-flow__edgelabel-renderer"}),R.createElement(eN,{nodeTypes:Kr,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:b,onlyRenderVisibleElements:U,noPanClassName:Dt,noDragClassName:tr,disableKeyboardA11y:jn,nodeOrigin:_n,nodeExtent:sr,rfId:ir})))};Qg.displayName="GraphView";var SN=N.memo(Qg);const Tc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Tc,nodeExtent:Tc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Zn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:J2,isValidConnection:void 0},CN=()=>h1((e,t)=>({...tn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:hl(n,r,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",i=typeof r<"u",o=s?hl(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?r:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c?.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),g=n.reduce((y,k)=>{const h=s.get(k.id);if(h?.hidden)s.set(h.id,{...h,[ye]:{...h[ye],handleBounds:void 0}});else if(h){const p=Lu(k.nodeElement);!!(p.width&&p.height&&(h.width!==p.width||h.height!==p.height||k.forceUpdate))&&(s.set(h.id,{...h,[ye]:{...h[ye],handleBounds:{source:Vf(".source",k.nodeElement,m,u),target:Vf(".target",k.nodeElement,m,u)}},...p}),y.push({id:h.id,type:"dimensions",dimensions:p}))}return y},[]);Ag(s,u);const v=o||i&&!o&&zg(t,{initial:!0,...l});e({nodeInternals:new Map(s),fitViewOnInitDone:v}),g?.length>0&&r?.(g)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(l=>{const c={id:l.id,type:"position",dragging:s};return r&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(n?.length){if(i){const u=Ig(n,l()),d=hl(u,s,o,c);e({nodeInternals:d})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,l=null;r?o=n.map(c=>on(c,!0)):(o=Sr(i(),n),l=Sr(s,[])),Hi({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,l=null;r?o=n.map(c=>on(c,!0)):(o=Sr(s,n),l=Sr(i(),[])),Hi({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:i}=t(),o=n||i(),l=r||s,c=o.map(d=>(d.selected=!1,on(d.id,!1))),u=l.map(d=>on(d.id,!1));Hi({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r?.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r?.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>on(l.id,!1)),o=n.filter(l=>l.selected).map(l=>on(l.id,!1));Hi({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=Iu(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!n.x&&!n.y)return!1;const u=Wt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,i]],f=o?.constrain()(u,d,c);return o.transform(l,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:tn.connectionNodeId,connectionHandleId:tn.connectionHandleId,connectionHandleType:tn.connectionHandleType,connectionStatus:tn.connectionStatus,connectionStartHandle:tn.connectionStartHandle,connectionEndHandle:tn.connectionEndHandle}),reset:()=>e({...tn})}),Object.is),Gr=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=CN()),R.createElement(W2,{value:t.current},e)};Gr.displayName="ReactFlowProvider";const Gg=({children:e})=>N.useContext(va)?R.createElement(R.Fragment,null,e):R.createElement(Gr,null,e);Gg.displayName="ReactFlowWrapper";const EN={input:Eg,default:jc,output:_g,group:Hu},jN={default:Ho,straight:Ou,step:Fu,smoothstep:wa,simplebezier:Du},_N=[0,0],TN=[15,15],MN={x:0,y:0,zoom:1},RN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yi=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i=EN,edgeTypes:o=jN,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:k,onClickConnectEnd:h,onNodeMouseEnter:p,onNodeMouseMove:x,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:j,onNodeDragStart:C,onNodeDrag:M,onNodeDragStop:A,onNodesDelete:L,onEdgesDelete:$,onSelectionChange:U,onSelectionDragStart:H,onSelectionDrag:b,onSelectionDragStop:z,onSelectionContextMenu:_,onSelectionStart:D,onSelectionEnd:T,connectionMode:S=Zn.Strict,connectionLineType:P=cn.Bezier,connectionLineStyle:I,connectionLineComponent:F,connectionLineContainerStyle:W,deleteKeyCode:V="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:Y=!1,selectionMode:K=ri.Full,panActivationKeyCode:se="Space",multiSelectionKeyCode:re=$o()?"Meta":"Control",zoomActivationKeyCode:ne=$o()?"Meta":"Control",snapToGrid:_e=!1,snapGrid:be=TN,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:Ae=!0,nodesDraggable:xe,nodesConnectable:Ze,nodesFocusable:oe,nodeOrigin:Q=_N,edgesFocusable:$e,edgesUpdatable:It,elementsSelectable:Xr,defaultViewport:tr=MN,minZoom:nr=.5,maxZoom:Dt=2,translateExtent:rr=Tc,preventScrolling:jn=!0,nodeExtent:_n,defaultMarkerColor:sr="#b1b1b7",zoomOnScroll:ir=!0,zoomOnPinch:Kr=!0,panOnScroll:ze=!1,panOnScrollSpeed:Et=.5,panOnScrollMode:Tn=Bn.Free,zoomOnDoubleClick:Mn=!0,panOnDrag:or=!0,onPaneClick:jt,onPaneMouseEnter:Rn,onPaneMouseMove:Pa,onPaneMouseLeave:Aa,onPaneScroll:Zr,onPaneContextMenu:za,children:qu,onEdgeContextMenu:Pn,onEdgeDoubleClick:t0,onEdgeMouseEnter:n0,onEdgeMouseMove:r0,onEdgeMouseLeave:s0,onEdgeUpdate:i0,onEdgeUpdateStart:o0,onEdgeUpdateEnd:a0,onReconnect:l0,onReconnectStart:c0,onReconnectEnd:u0,reconnectRadius:d0=10,edgeUpdaterRadius:f0=10,onNodesChange:m0,onEdgesChange:h0,noDragClassName:p0="nodrag",noWheelClassName:g0="nowheel",noPanClassName:Wu="nopan",fitView:y0=!1,fitViewOptions:x0,connectOnClick:v0=!0,attributionPosition:w0,proOptions:b0,defaultEdgeOptions:k0,elevateNodesOnSelect:N0=!0,elevateEdgesOnSelect:S0=!1,disableKeyboardA11y:Qu=!1,autoPanOnConnect:C0=!0,autoPanOnNodeDrag:E0=!0,connectionRadius:j0=20,isValidConnection:_0,onError:T0,style:M0,id:Gu,nodeDragThreshold:R0,...P0},A0)=>{const La=Gu||"1";return R.createElement("div",{...P0,style:{...M0,...RN},ref:A0,className:Pe(["react-flow",s]),"data-testid":"rf__wrapper",id:Gu},R.createElement(Gg,null,R.createElement(SN,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:p,onNodeMouseMove:x,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:j,nodeTypes:i,edgeTypes:o,connectionLineType:P,connectionLineStyle:I,connectionLineComponent:F,connectionLineContainerStyle:W,selectionKeyCode:G,selectionOnDrag:Y,selectionMode:K,deleteKeyCode:V,multiSelectionKeyCode:re,panActivationKeyCode:se,zoomActivationKeyCode:ne,onlyRenderVisibleElements:Oe,selectNodesOnDrag:Ae,defaultViewport:tr,translateExtent:rr,minZoom:nr,maxZoom:Dt,preventScrolling:jn,zoomOnScroll:ir,zoomOnPinch:Kr,zoomOnDoubleClick:Mn,panOnScroll:ze,panOnScrollSpeed:Et,panOnScrollMode:Tn,panOnDrag:or,onPaneClick:jt,onPaneMouseEnter:Rn,onPaneMouseMove:Pa,onPaneMouseLeave:Aa,onPaneScroll:Zr,onPaneContextMenu:za,onSelectionContextMenu:_,onSelectionStart:D,onSelectionEnd:T,onEdgeContextMenu:Pn,onEdgeDoubleClick:t0,onEdgeMouseEnter:n0,onEdgeMouseMove:r0,onEdgeMouseLeave:s0,onReconnect:l0??i0,onReconnectStart:c0??o0,onReconnectEnd:u0??a0,reconnectRadius:d0??f0,defaultMarkerColor:sr,noDragClassName:p0,noWheelClassName:g0,noPanClassName:Wu,elevateEdgesOnSelect:S0,rfId:La,disableKeyboardA11y:Qu,nodeOrigin:Q,nodeExtent:_n}),R.createElement(bk,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:k,onClickConnectEnd:h,nodesDraggable:xe,nodesConnectable:Ze,nodesFocusable:oe,edgesFocusable:$e,edgesUpdatable:It,elementsSelectable:Xr,elevateNodesOnSelect:N0,minZoom:nr,maxZoom:Dt,nodeExtent:_n,onNodesChange:m0,onEdgesChange:h0,snapToGrid:_e,snapGrid:be,connectionMode:S,translateExtent:rr,connectOnClick:v0,defaultEdgeOptions:k0,fitView:y0,fitViewOptions:x0,onNodesDelete:L,onEdgesDelete:$,onNodeDragStart:C,onNodeDrag:M,onNodeDragStop:A,onSelectionDrag:b,onSelectionDragStart:H,onSelectionDragStop:z,noPanClassName:Wu,nodeOrigin:Q,rfId:La,autoPanOnConnect:C0,autoPanOnNodeDrag:E0,onError:T0,connectionRadius:j0,isValidConnection:_0,nodeDragThreshold:R0}),R.createElement(vk,{onSelectionChange:U}),qu,R.createElement(G2,{proOptions:b0,position:w0}),R.createElement(Ek,{rfId:La,disableKeyboardA11y:Qu})))});yi.displayName="ReactFlow";function Yg(e){return t=>{const[n,r]=N.useState(t),s=N.useCallback(i=>r(o=>e(i,o)),[]);return[n,r,s]}}const ka=Yg(Ig),Na=Yg($k),Xg=({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:l,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:m,selected:g})=>{const{background:v,backgroundColor:y}=i||{},k=o||v||y;return R.createElement("rect",{className:Pe(["react-flow__minimap-node",{selected:g},u]),x:t,y:n,rx:d,ry:d,width:r,height:s,fill:k,stroke:l,strokeWidth:c,shapeRendering:f,onClick:m?h=>m(h,e):void 0})};Xg.displayName="MiniMapNode";var PN=N.memo(Xg);const AN=e=>e.nodeOrigin,zN=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),xl=e=>e instanceof Function?e:()=>e;function LN({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s=2,nodeComponent:i=PN,onClick:o}){const l=le(zN,je),c=le(AN),u=xl(t),d=xl(e),f=xl(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return R.createElement(R.Fragment,null,l.map(g=>{const{x:v,y}=qn(g,c).positionAbsolute;return R.createElement(i,{key:g.id,x:v,y,width:g.width,height:g.height,style:g.style,selected:g.selected,className:f(g),color:u(g),borderRadius:r,strokeColor:d(g),strokeWidth:s,shapeRendering:m,onClick:o,id:g.id})}))}var IN=N.memo(LN);const DN=200,FN=150,ON=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?K2(ba(t,e.nodeOrigin),n):n,rfId:e.rfId}},$N="react-flow__minimap-desc";function Kg({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:l,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:m,onNodeClick:g,pannable:v=!1,zoomable:y=!1,ariaLabel:k="React Flow mini map",inversePan:h=!1,zoomStep:p=10,offsetScale:x=5}){const w=Se(),E=N.useRef(null),{boundingRect:j,viewBB:C,rfId:M}=le(ON,je),A=e?.width??DN,L=e?.height??FN,$=j.width/A,U=j.height/L,H=Math.max($,U),b=H*A,z=H*L,_=x*H,D=j.x-(b-j.width)/2-_,T=j.y-(z-j.height)/2-_,S=b+_*2,P=z+_*2,I=`${$N}-${M}`,F=N.useRef(0);F.current=H,N.useEffect(()=>{if(E.current){const G=ct(E.current),Y=re=>{const{transform:ne,d3Selection:_e,d3Zoom:be}=w.getState();if(re.sourceEvent.type!=="wheel"||!_e||!be)return;const Oe=-re.sourceEvent.deltaY*(re.sourceEvent.deltaMode===1?.05:re.sourceEvent.deltaMode?1:.002)*p,Ae=ne[2]*Math.pow(2,Oe);be.scaleTo(_e,Ae)},K=re=>{const{transform:ne,d3Selection:_e,d3Zoom:be,translateExtent:Oe,width:Ae,height:xe}=w.getState();if(re.sourceEvent.type!=="mousemove"||!_e||!be)return;const Ze=F.current*Math.max(1,ne[2])*(h?-1:1),oe={x:ne[0]-re.sourceEvent.movementX*Ze,y:ne[1]-re.sourceEvent.movementY*Ze},Q=[[0,0],[Ae,xe]],$e=Wt.translate(oe.x,oe.y).scale(ne[2]),It=be.constrain()($e,Q,Oe);be.transform(_e,It)},se=sg().on("zoom",v?K:null).on("zoom.wheel",y?Y:null);return G.call(se),()=>{G.on("zoom",null)}}},[v,y,h,p]);const W=m?G=>{const Y=xt(G);m(G,{x:Y[0],y:Y[1]})}:void 0,V=g?(G,Y)=>{const K=w.getState().nodeInternals.get(Y);g(G,K)}:void 0;return R.createElement(zu,{position:f,style:e,className:Pe(["react-flow__minimap",t]),"data-testid":"rf__minimap"},R.createElement("svg",{width:A,height:L,viewBox:`${D} ${T} ${S} ${P}`,role:"img","aria-labelledby":I,ref:E,onClick:W},k&&R.createElement("title",{id:I},k),R.createElement(IN,{onClick:V,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:l}),R.createElement("path",{className:"react-flow__minimap-mask",d:`M${D-_},${T-_}h${S+_*2}v${P+_*2}h${-S-_*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}Kg.displayName="MiniMap";var Sa=N.memo(Kg);function BN(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},R.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function HN(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},R.createElement("path",{d:"M0 0h32v4.2H0z"}))}function UN(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},R.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function VN(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},R.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qN(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},R.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const vs=({children:e,className:t,...n})=>R.createElement("button",{type:"button",className:Pe(["react-flow__controls-button",t]),...n},e);vs.displayName="ControlButton";const WN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Zg=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=Se(),[g,v]=N.useState(!1),{isInteractive:y,minZoomReached:k,maxZoomReached:h}=le(WN,je),{zoomIn:p,zoomOut:x,fitView:w}=gi();if(N.useEffect(()=>{v(!0)},[]),!g)return null;const E=()=>{p(),i?.()},j=()=>{x(),o?.()},C=()=>{w(s),l?.()},M=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c?.(!y)};return R.createElement(zu,{className:Pe(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&R.createElement(R.Fragment,null,R.createElement(vs,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:h},R.createElement(BN,null)),R.createElement(vs,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},R.createElement(HN,null))),n&&R.createElement(vs,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},R.createElement(UN,null)),r&&R.createElement(vs,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},y?R.createElement(qN,null):R.createElement(VN,null)),d)};Zg.displayName="Controls";var Ca=N.memo(Zg),Nt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Nt||(Nt={}));function QN({color:e,dimensions:t,lineWidth:n}){return R.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function GN({color:e,radius:t}){return R.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const YN={[Nt.Dots]:"#91919a",[Nt.Lines]:"#eee",[Nt.Cross]:"#e2e2e2"},XN={[Nt.Dots]:1,[Nt.Lines]:1,[Nt.Cross]:6},KN=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Jg({id:e,variant:t=Nt.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=2,color:o,style:l,className:c}){const u=N.useRef(null),{transform:d,patternId:f}=le(KN,je),m=o||YN[t],g=r||XN[t],v=t===Nt.Dots,y=t===Nt.Cross,k=Array.isArray(n)?n:[n,n],h=[k[0]*d[2]||1,k[1]*d[2]||1],p=g*d[2],x=y?[p,p]:h,w=v?[p/i,p/i]:[x[0]/i,x[1]/i];return R.createElement("svg",{className:Pe(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},R.createElement("pattern",{id:f+e,x:d[0]%h[0],y:d[1]%h[1],width:h[0],height:h[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},v?R.createElement(GN,{color:m,radius:p/i}):R.createElement(QN,{dimensions:x,color:m,lineWidth:s})),R.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Jg.displayName="Background";var Ea=N.memo(Jg);const ja=({children:e,className:t,label:n,icon:r,selected:s})=>a.jsxs("div",{className:`w-32 border-4 border-black shadow-comic transform transition-all ${s?"scale-110 shadow-comic-lg":""} ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-2 p-1 border-b-4 border-black",children:[a.jsx(r,{size:16}),a.jsx("div",{className:"font-comic text-xs uppercase tracking-wide",children:n})]}),e]}),ZN=N.memo(({id:e,data:t,selected:n})=>{const r=lt(s=>s.cpus.find(i=>i.id===e));return a.jsxs(ja,{label:"CPU Core",icon:aa,className:"bg-comic-blue text-black",selected:n,children:[a.jsx(X,{type:"target",position:O.Top,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white p-2 border-2 border-black shadow-sm",children:[a.jsxs("div",{className:"font-bold",children:["Usage: ",r?.isIdle()?"0":"100","%"]}),a.jsxs("div",{className:"text-[10px]",children:["Process: ",r?.currentProcess?.id.split("_")[1]||"Idle"]})]})]})}),JN=N.memo(({id:e,data:t,selected:n})=>{const r=lt(s=>s.scheduler);return a.jsxs(ja,{label:"Scheduler",icon:uv,className:"bg-comic-yellow text-black",selected:n,children:[a.jsx(X,{type:"target",position:O.Top,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Bottom,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white p-2 border-2 border-black shadow-sm",children:[a.jsx("div",{className:"font-bold",children:r.algorithm}),a.jsxs("div",{className:"text-[10px]",children:["Queue: ",r.readyQueue.length]})]})]})}),eS=N.memo(({id:e,selected:t})=>{const n=lt(i=>i.processes.find(o=>o.id===e)||i.scheduler?.readyQueue.find(o=>o.id===e)),r=i=>{switch(i){case"RUNNING":return"bg-green-500 animate-pulse";case"READY":return"bg-yellow-400";case"TERMINATED":return"bg-gray-400";default:return"bg-blue-400"}},s=e.includes("_")?e.split("_")[1]:e;return a.jsxs(ja,{label:"Process",icon:ia,className:"bg-green-400 text-black",selected:t,children:[a.jsx(X,{type:"source",position:O.Bottom,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white p-2 border-2 border-black shadow-sm",children:[a.jsxs("div",{className:"font-bold text-base",children:["P",s]}),a.jsxs("div",{className:"text-[10px]",children:["Burst: ",n?.totalBurstTime||15]}),n&&a.jsx("div",{className:`mt-1 px-1 text-[10px] font-bold text-center ${r(n.state)}`,children:n.state})]})]})}),tS=N.memo(({id:e,data:t,selected:n})=>a.jsxs(ja,{label:"Generator",icon:kp,className:"bg-comic-pink text-white",selected:n,children:[a.jsx(X,{type:"source",position:O.Bottom,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx("div",{className:"text-xs bg-white text-black p-2 border-2 border-black shadow-sm",children:a.jsx("div",{className:"font-bold",children:"Spawns Process"})})]})),Vu=({children:e,className:t,label:n,icon:r,selected:s})=>a.jsxs("div",{className:`w-28 border-4 border-black shadow-comic transform transition-all ${s?"scale-110":""} ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-1 p-1 border-b-2 border-black bg-white/90",children:[a.jsx(r,{size:14}),a.jsx("div",{className:"font-comic text-[10px] uppercase",children:n})]}),e]}),nS=N.memo(({id:e,selected:t})=>a.jsxs(Vu,{label:"Memory",icon:la,className:"bg-purple-400 text-black",selected:t,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-[10px] bg-white p-1 border border-black text-center",children:[a.jsx("div",{className:"font-bold",children:"4GB RAM"}),a.jsx("div",{className:"text-[8px]",children:"Capacity: 4"})]})]})),rS=N.memo(({id:e,selected:t})=>a.jsxs(Vu,{label:"Mutex",icon:wp,className:"bg-orange-400 text-black",selected:t,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-[10px] bg-white p-1 border border-black text-center",children:[a.jsx("div",{className:"font-bold",children:"Lock"}),a.jsx("div",{className:"text-[8px]",children:"Binary"})]})]})),sS=N.memo(({id:e,selected:t})=>a.jsxs(Vu,{label:"I/O Device",icon:Eu,className:"bg-teal-400 text-black",selected:t,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-2 h-2 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-[10px] bg-white p-1 border border-black text-center",children:[a.jsx("div",{className:"font-bold",children:"Disk"}),a.jsx("div",{className:"text-[8px]",children:"Shared"})]})]}));class iS{constructor(t,n){this.nodes=t,this.edges=n,this.errors=[],this.warnings=[]}validate(){return this.errors=[],this.warnings=[],this.validateGeneratorConnections(),this.validateSchedulerConnections(),this.validateCPUConnections(),this.checkOrphanedNodes(),this.checkDataFlowCompleteness(),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateGeneratorConnections(){this.nodes.filter(n=>n.type==="generator").forEach(n=>{const r=this.edges.filter(s=>s.source===n.id);r.length===0?this.warnings.push({type:"NO_CONNECTION",node:n.id,message:`Generator ${n.id} is not connected to any component`}):r.some(i=>{const o=this.nodes.find(l=>l.id===i.target);return o&&o.type==="scheduler"})||this.errors.push({type:"INVALID_CONNECTION",node:n.id,message:`Generator ${n.id} should connect to a Scheduler`})})}validateSchedulerConnections(){const t=this.nodes.filter(n=>n.type==="scheduler");if(t.length===0){this.errors.push({type:"MISSING_COMPONENT",message:"No Scheduler found in the system"});return}t.length>1&&this.warnings.push({type:"MULTIPLE_SCHEDULERS",message:"Multiple Schedulers detected. Only one is currently supported."}),t.forEach(n=>{const r=this.edges.filter(i=>i.source===n.id);r.length===0&&this.errors.push({type:"NO_CPU_CONNECTION",node:n.id,message:"Scheduler must connect to at least one CPU"}),r.filter(i=>{const o=this.nodes.find(l=>l.id===i.target);return o&&o.type==="cpu"}).length===0&&this.errors.push({type:"INVALID_CPU_CONNECTION",node:n.id,message:"Scheduler connections must target CPU nodes"})})}validateCPUConnections(){const t=this.nodes.filter(n=>n.type==="cpu");if(t.length===0){this.errors.push({type:"MISSING_COMPONENT",message:"No CPUs found in the system"});return}t.forEach(n=>{this.edges.filter(s=>s.target===n.id).length===0&&this.warnings.push({type:"UNCONNECTED_CPU",node:n.id,message:`CPU ${n.id} has no incoming connections from Scheduler`})})}checkOrphanedNodes(){this.nodes.forEach(t=>{const n=this.edges.some(s=>s.target===t.id),r=this.edges.some(s=>s.source===t.id);!n&&!r&&t.type!=="scheduler"&&this.warnings.push({type:"ORPHANED_NODE",node:t.id,message:`${t.type} ${t.id} is not connected to the system`})})}checkDataFlowCompleteness(){const t=this.nodes.some(s=>s.type==="generator"),n=this.nodes.some(s=>s.type==="scheduler"),r=this.nodes.some(s=>s.type==="cpu");if(t||this.warnings.push({type:"NO_GENERATOR",message:"No process generator. Add a Generator to spawn processes automatically."}),n||this.errors.push({type:"NO_SCHEDULER",message:"Critical: No Scheduler found. System cannot function."}),r||this.errors.push({type:"NO_CPU",message:"Critical: No CPU found. Add at least one CPU to execute processes."}),t&&n&&r){const s=this.edges.some(o=>{const l=this.nodes.find(u=>u.id===o.source),c=this.nodes.find(u=>u.id===o.target);return l?.type==="generator"&&c?.type==="scheduler"}),i=this.edges.some(o=>{const l=this.nodes.find(u=>u.id===o.source),c=this.nodes.find(u=>u.id===o.target);return l?.type==="scheduler"&&c?.type==="cpu"});(!s||!i)&&this.errors.push({type:"INCOMPLETE_FLOW",message:"Data flow incomplete. Connect: Generator  Scheduler  CPU"})}}getSummary(){return{totalNodes:this.nodes.length,totalEdges:this.edges.length,errorCount:this.errors.length,warningCount:this.warnings.length,status:this.errors.length===0?"VALID":"INVALID"}}}function oS(){const e=gi(),[t,n]=R.useState(null),[r,s]=R.useState(!0),i=R.useCallback(()=>{try{const f=e.getNodes(),m=e.getEdges(),v=new iS(f,m).validate();n(v)}catch(f){console.error("Validation error:",f)}},[e]);if(R.useEffect(()=>{e.getNodes(),e.getEdges();const f=setTimeout(i,300);return()=>clearTimeout(f)},[e.getNodes().length,e.getEdges().length,i]),!t)return null;const{isValid:o,errors:l,warnings:c}=t,u=e.getNodes(),d=e.getEdges();return a.jsxs("div",{className:"fixed top-24 right-4 w-80 bg-white border-4 border-black shadow-comic-lg z-50",children:[a.jsxs("div",{className:`border-b-4 border-black p-3 flex items-center justify-between cursor-pointer ${o?"bg-green-400":"bg-red-400"}`,onClick:()=>s(!r),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[o?a.jsx(gp,{size:20}):a.jsx(lv,{size:20}),a.jsx("span",{className:"font-comic text-lg",children:o?"Valid ":"Setup Required"})]}),r?a.jsx(xp,{size:20}):a.jsx(yp,{size:20})]}),r&&a.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[u.length===0&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 p-3 mb-3",children:[a.jsxs("div",{className:"font-bold text-blue-700 mb-2 flex items-center gap-2",children:[a.jsx(yv,{size:18}),"Quick Start"]}),a.jsxs("ol",{className:"text-sm space-y-1 text-gray-700",children:[a.jsx("li",{children:"1. Drag components from sidebar"}),a.jsx("li",{children:"2. Connect: Generator  Scheduler  CPU"}),a.jsx("li",{children:"3. Press Play"})]})]}),a.jsxs("div",{className:"mb-3 text-sm bg-gray-50 p-2 border-l-4 border-gray-400",children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{children:"Components:"}),a.jsx("span",{className:"font-mono font-bold",children:u.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Connections:"}),a.jsx("span",{className:"font-mono font-bold",children:d.length})]})]}),l.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"font-bold text-red-600 mb-2 text-sm",children:[" Errors (",l.length,")"]}),a.jsx("div",{className:"space-y-2",children:l.slice(0,3).map((f,m)=>a.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-2 text-xs",children:a.jsx("div",{className:"text-gray-700",children:f.message})},m))})]}),c.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"font-bold text-yellow-600 mb-2 text-sm",children:[" Warnings (",c.length,")"]}),a.jsx("div",{className:"space-y-2",children:c.slice(0,2).map((f,m)=>a.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-2 text-xs",children:a.jsx("div",{className:"text-gray-700",children:f.message})},m))})]}),!o&&u.length>0&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 p-2 text-xs",children:[a.jsx("div",{className:"font-bold text-blue-700 mb-1",children:" Fix:"}),a.jsx("div",{className:"text-gray-700",children:"Drag from node handle () to another node's handle"})]})]})]})}const aS=[],lS=[];let cS=0;const uS=()=>`dndnode_${cS++}`;function dS(){const e=N.useRef(null),[t,n,r]=ka(aS),[s,i,o]=Na(lS),{screenToFlowPosition:l}=gi(),c=lt(g=>g.registerNode),u=N.useMemo(()=>({cpu:ZN,scheduler:JN,process:eS,generator:tS,memory:nS,mutex:rS,iodevice:sS}),[]),d=N.useCallback(g=>i(v=>pi({...g,animated:!0,style:{stroke:"#000",strokeWidth:3},type:"default"},v)),[i]),f=N.useCallback(g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},[]),m=N.useCallback(g=>{g.preventDefault();const v=g.dataTransfer.getData("application/reactflow");if(typeof v>"u"||!v)return;const y=l({x:g.clientX,y:g.clientY}),k=uS();c(v,k);const h={id:k,type:v,position:y,data:{label:`${v}`,id:k}};n(p=>[...p,h])},[l,n,c]);return a.jsxs("div",{className:"w-full h-full bg-white border-4 border-black shadow-comic-lg relative",ref:e,"data-testid":"flow-canvas",children:[a.jsxs(yi,{nodes:t,edges:s,nodeTypes:u,onNodesChange:r,onEdgesChange:o,onConnect:d,onInit:console.log,onDrop:m,onDragOver:f,fitView:!0,children:[a.jsx(Ea,{color:"#aaa",gap:20,size:2,variant:"dots",className:"bg-comic-cream"}),a.jsx(Ca,{className:"border-2 border-black shadow-comic bg-white rounded-none p-1"}),a.jsx(Sa,{className:"border-2 border-black shadow-comic bg-white",maskColor:"rgba(240, 240, 240, 0.6)"})]}),a.jsx(oS,{}),a.jsx("div",{className:"absolute top-0 left-0 bg-comic-yellow border-b-4 border-r-4 border-black px-4 py-1 z-10",children:a.jsx("span",{className:"font-comic text-xl",children:"System Blueprint"})})]})}function fS(){return a.jsx(Gr,{children:a.jsx(dS,{})})}function mS(){const{isPlaying:e,togglePlay:t,reset:n,currentTime:r,tick:s,speed:i,setSpeed:o,step:l,scheduler:c,updateAlgorithm:u,updateQuantum:d}=lt();return N.useEffect(()=>{let f;return e&&(f=setInterval(()=>{s()},i)),()=>clearInterval(f)},[e,i,s]),a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic flex items-center gap-4 p-4 flex-wrap",children:[a.jsxs("div",{className:"bg-comic-dark text-white px-4 py-2 font-mono font-bold border-2 border-black min-w-[100px] text-center",children:["T: ",r]}),a.jsx("button",{onClick:t,className:`w-12 h-12 flex items-center justify-center border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all active:bg-pink-600 outline-none ${e?"bg-comic-pink text-white":"bg-green-400 hover:bg-green-300"}`,title:e?"Pause":"Play",children:e?a.jsx(Cu,{fill:"white"}):a.jsx(ca,{fill:"black"})}),a.jsx("button",{onClick:l,className:"w-10 h-10 flex items-center justify-center bg-white border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all outline-none",title:"Step Forward (1 tick)",children:a.jsx(kv,{size:20})}),a.jsx("button",{onClick:n,className:"w-10 h-10 flex items-center justify-center bg-comic-yellow border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all outline-none",title:"Reset",children:a.jsx(ua,{size:20})}),a.jsxs("div",{className:"flex items-center gap-2 border-l-2 border-black pl-4",children:[a.jsx(gv,{size:20}),a.jsx("input",{type:"range",min:"100",max:"2000",step:"100",value:2100-i,onChange:f=>o(2100-parseInt(f.target.value)),className:"w-24 accent-comic-blue h-4 bg-gray-200 rounded-lg appearance-none cursor-pointer border-2 border-black"})]}),a.jsxs("div",{className:"flex items-center gap-2 border-l-2 border-black pl-4",children:[a.jsx("label",{className:"font-bold text-sm",children:"Algorithm:"}),a.jsxs("select",{value:c?.algorithm||"RR",onChange:f=>u(f.target.value),className:"px-3 py-1 border-3 border-black bg-white font-comic font-bold text-sm shadow-comic-sm hover:shadow-comic transition-all cursor-pointer",disabled:e,children:[a.jsx("option",{value:"RR",children:"Round Robin"}),a.jsx("option",{value:"FCFS",children:"First Come First Served"}),a.jsx("option",{value:"SJF",children:"Shortest Job First"}),a.jsx("option",{value:"Priority",children:"Priority"})]})]}),c?.algorithm==="RR"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"font-bold text-sm",children:"Quantum:"}),a.jsx("input",{type:"number",min:"1",max:"10",value:c.quantum,onChange:f=>d(parseInt(f.target.value)),className:"w-16 px-2 py-1 border-3 border-black font-mono font-bold text-center",disabled:e})]})]})}function hS(){const e=lt(r=>r.metrics),[t,n]=R.useState(!1);return a.jsxs("div",{className:"absolute top-32 right-4 z-40",children:[!t&&a.jsxs("button",{onClick:()=>n(!0),className:"bg-comic-blue text-white px-4 py-3 border-4 border-black shadow-comic font-comic hover:shadow-none hover:translate-y-1 transition-all flex items-center gap-2",children:[a.jsx(pp,{size:20}),"METRICS"]}),t&&a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-3 w-56",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-black pb-1",children:[a.jsx("h3",{className:"font-comic text-lg bg-comic-blue text-white px-2",children:"Metrics"}),a.jsx("button",{onClick:()=>n(!1),className:"w-6 h-6 bg-black text-white font-bold hover:bg-gray-800",children:""})]}),a.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between border-b border-gray-200 pb-1",children:[a.jsx("span",{className:"font-bold",children:"Completed:"}),a.jsx("span",{className:"font-mono",children:e.completedProcesses})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-200 pb-1",children:[a.jsx("span",{className:"font-bold",children:"CPU Util:"}),a.jsxs("span",{className:"font-mono",children:[e.cpuUtilization,"%"]})]}),a.jsxs("div",{className:"flex justify-between border-b border-gray-200 pb-1",children:[a.jsx("span",{className:"font-bold",children:"Avg Wait:"}),a.jsxs("span",{className:"font-mono",children:[e.avgWaitTime,"ms"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-bold",children:"Avg Turn:"}),a.jsxs("span",{className:"font-mono",children:[e.avgTurnaroundTime,"ms"]})]})]})]})]})}function pS(){const e=lt(n=>n.history),t=R.useMemo(()=>{const n={};return e.forEach(r=>{n[r.cpuId]||(n[r.cpuId]=[]),n[r.cpuId].push(r)}),Object.entries(n).map(([r,s])=>({cpuId:r,logs:s}))},[e]);return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"bg-comic-yellow border-b-4 border-black p-2",children:[a.jsx("h3",{className:"font-comic text-sm uppercase",children:"Execution History"}),e.length>0&&a.jsxs("div",{className:"text-[10px] text-gray-700",children:["Last ",Math.min(e.length,100)," ticks"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:e.length===0?a.jsx("div",{className:"text-center text-gray-400 italic text-sm mt-4",children:"(Waiting for data...)"}):t.map(({cpuId:n,logs:r})=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-16 text-xs font-bold font-mono",children:n}),a.jsx("div",{className:"flex-1 flex gap-1",children:r.map((s,i)=>{const o=s.processId.includes("_")?s.processId.split("_")[1]:s.processId.replace("P","");return a.jsxs("div",{className:"h-6 border border-black text-[10px] flex items-center justify-center font-bold text-white",style:{backgroundColor:s.color,width:`${100/r.length}%`},title:`P${o} at T:${s.time}`,children:["P",o]},i)})})]},n))})]})}function gS(){const[e,t]=N.useState("level-select"),[n,r]=N.useState(null),[s,i]=N.useState(null),[o,l]=N.useState(null),c=lt(w=>w.isPlaying),u=lt(w=>w.currentTime),d=lt(w=>w.metrics),f=lt(w=>w.reset),m=wn(w=>w.completeLevel),g=wn(w=>w.setCurrentLevel),v=new fa;N.useEffect(()=>{if(!c&&n&&u>0){const w=setTimeout(()=>{p()},500);return()=>clearTimeout(w)}},[c,d,u]);const y=w=>{r(w),t("playing-level"),i(null),l(Date.now()),g(w.id),f(),w.initialSetup&&console.log("Initial setup:",w.initialSetup)},k=()=>{t("level-select"),r(null),i(null),f()},h=()=>{t("sandbox"),r(null),i(null),f()},p=()=>{if(!n)return;const w=lt.getState(),E={processCount:d.completedProcesses||0,processes:w.processes||[],scheduler:w.scheduler?.algorithm||"RR",metrics:{avgWaitTime:d.avgWaitTime||0,avgTurnaroundTime:d.avgTurnaroundTime||0,cpuUtilization:d.cpuUtilization||0,throughput:parseFloat(d.throughput)||0,contextSwitches:d.contextSwitches||0,completedProcesses:d.completedProcesses||0,deadlockCount:d.deadlockCount||0},components:[...w.cpus?.length>0?[{type:"cpu"}]:[],{type:"scheduler"},...w.resourceManager?.resources?.size>0?Array.from(w.resourceManager.resources.keys()).map(C=>({type:"mutex",id:C})):[]],deadlockDetected:d.deadlockDetected||!1,deadlockCount:d.deadlockCount||0};console.log(" Validation State:",E);const j=v.validate(n,E);if(i(j),j.passed){const C=(Date.now()-o)/1e3;m(n.id,{stars:j.stars,time:C,metrics:E.metrics,unlocks:n.unlocks})}return j},x=()=>{const w=p();w&&console.log(" Validation Result:",w)};return e==="level-select"?a.jsx(ma,{levels:c1,moduleTitle:"OS CHALLENGES",moduleSubtitle:"Master The Scheduler!",onSelectLevel:y,onSandboxMode:h,onBack:()=>window.location.reload()}):a.jsxs("div",{className:"w-full h-screen flex flex-col bg-comic-cream relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-5 pointer-events-none z-0"}),a.jsxs("div",{className:"bg-comic-yellow border-b-4 border-black px-6 py-2 flex items-center justify-between shadow-md z-30 relative",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-white border-3 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold",children:[a.jsx(oa,{size:20,className:"stroke-[3]"}),e==="sandbox"?"BACK":"EXIT LEVEL"]}),n&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ui,{className:"stroke-[3]",size:28}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-comic text-xl font-bold uppercase tracking-wide",children:n.title}),a.jsxs("p",{className:"text-sm font-comic uppercase tracking-wide",children:[n.difficulty,"  ",n.estimatedTime]})]})]}),e==="sandbox"&&a.jsx("h2",{className:"font-comic text-2xl font-bold uppercase tracking-wider",children:" SANDBOX MODE"})]}),n&&a.jsx("button",{onClick:x,className:"px-6 py-3 bg-comic-blue text-white border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-lg uppercase",children:" Check Solution"})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[a.jsx(u1,{}),a.jsxs("div",{className:"flex-1 flex flex-col relative",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(fS,{}),n&&a.jsx(ha,{level:n,validationResult:s}),a.jsx(hS,{}),a.jsx("div",{className:"absolute bottom-4 right-4 w-80 h-40 bg-white border-2 border-gray-300 rounded shadow-lg",children:a.jsx(pS,{})})]}),a.jsx("div",{className:"border-t-2 border-gray-200 bg-white",children:a.jsx(mS,{})})]})]})]})}class yS{constructor(t,n={}){this.type=t,this.operands=n,this.stage="FETCH",this.cyclesInStage=0}advance(){const t=["FETCH","DECODE","EXECUTE","MEMORY","WRITEBACK","COMPLETE"],n=t.indexOf(this.stage);return n<t.length-1&&(this.stage=t[n+1],this.cyclesInStage=0),this.stage==="COMPLETE"}}let xS=class{constructor(t,n=3,r=1){this.id=t,this.clockSpeed=n,this.cores=r,this.registers={PC:0,IR:null,ACC:0,MAR:0,MDR:0,R0:0,R1:0,R2:0,R3:0},this.pipeline=[],this.maxPipelineDepth=5,this.state="IDLE",this.currentInstruction=null,this.instructionsCompleted=0,this.cyclesExecuted=0,this.stallCycles=0}fetch(t){if(!t)return null;const n=this.registers.PC,r=t.read(n);return this.registers.IR=r.data,this.registers.PC++,new yS(r.data.type,r.data.operands)}decode(t){t&&(t.stage="DECODE")}execute(t,n){if(t){switch(t.type){case"LOAD":if(n){const r=n.read(t.operands.address);this.registers[t.operands.dest]=r.data}break;case"STORE":n&&n.write(t.operands.address,this.registers[t.operands.src]);break;case"ADD":this.registers[t.operands.dest]=this.registers[t.operands.src1]+this.registers[t.operands.src2];break;case"SUB":this.registers[t.operands.dest]=this.registers[t.operands.src1]-this.registers[t.operands.src2];break;case"JMP":this.registers.PC=t.operands.address;break;case"HALT":this.state="IDLE";break}t.stage="EXECUTE"}}tick(){this.cyclesExecuted++,this.currentInstruction&&(this.currentInstruction.cyclesInStage++,this.currentInstruction.cyclesInStage>=1&&this.currentInstruction.advance()&&(this.instructionsCompleted++,this.currentInstruction=null))}getIPC(){return this.cyclesExecuted>0?this.instructionsCompleted/this.cyclesExecuted:0}};class Zf{constructor(t,n="RAM"){this.size=t,this.type=n,this.data=new Map,this.accessTime=n==="RAM"?10:n==="CACHE"?1:100,this.reads=0,this.writes=0}read(t){return this.reads++,{data:this.data.has(t)?this.data.get(t):{type:"NOP",operands:{}},latency:this.accessTime}}write(t,n){return this.writes++,this.data.set(t,n),{latency:this.accessTime}}load(t,n){n.forEach((r,s)=>{this.data.set(t+s,r)})}getBandwidth(){return(this.reads+this.writes)*64/1e3}}const _a=di((e,t)=>({currentCycle:0,isRunning:!1,clockSpeed:1,cpus:[],memory:null,storage:null,buses:[],instructionQueue:[],metrics:{ipc:0,totalInstructions:0,completedInstructions:0,memoryAccesses:0,memoryBandwidth:0,cacheHitRate:0,powerConsumption:0,temperature:25,totalCost:0},addCPU:n=>e(r=>({cpus:[...r.cpus,n]})),setMemory:n=>e({memory:n}),setStorage:n=>e({storage:n}),addBus:n=>e(r=>({buses:[...r.buses,n]})),play:()=>e({isRunning:!0}),pause:()=>e({isRunning:!1}),reset:()=>e({currentCycle:0,isRunning:!1,instructionQueue:[],metrics:{ipc:0,totalInstructions:0,completedInstructions:0,memoryAccesses:0,memoryBandwidth:0,cacheHitRate:0,powerConsumption:0,temperature:25,totalCost:0}}),tick:()=>e(n=>{if(!n.isRunning)return n;const r=n.currentCycle+1;n.cpus.forEach(o=>{o.tick()});const s=n.cpus.reduce((o,l)=>o+(l.instructionsCompleted||0),0),i={...n.metrics,completedInstructions:n.metrics.completedInstructions+s,ipc:r>0?n.metrics.completedInstructions/r:0};return{currentCycle:r,metrics:i}}),updateFromNode:(n,r,s)=>{if(r==="cpu"){const i=new xS(n,s.clockSpeed||3);t().addCPU(i)}else if(r==="ram"){const i=new Zf(s.size||8192,"RAM");e({memory:i})}else if(r==="storage"){const i=new Zf(s.size||512e3,"SSD");e({storage:i})}}})),Ta=({children:e,className:t,label:n,icon:r,selected:s})=>a.jsxs("div",{className:`w-36 border-4 border-black shadow-comic transform transition-all ${s?"scale-110":""} ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-2 p-1 border-b-4 border-black bg-white/90",children:[a.jsx(r,{size:16}),a.jsx("div",{className:"font-comic text-xs uppercase",children:n})]}),e]}),vS=N.memo(({id:e,data:t,selected:n})=>{const s=_a(i=>i.cpus).find(i=>i.id===e);return a.jsxs(Ta,{label:"CPU",icon:aa,className:"bg-blue-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.clockSpeed||3," GHz"]}),a.jsxs("div",{className:"text-[10px]",children:["Cores: ",t?.cores||1]}),s&&a.jsxs("div",{className:"text-[10px] mt-1",children:[a.jsxs("div",{children:["State: ",s.state]}),a.jsxs("div",{children:["IPC: ",s.getIPC().toFixed(2)]})]})]})]})}),wS=N.memo(({id:e,data:t,selected:n})=>{const r=_a(s=>s.memory);return a.jsxs(Ta,{label:"RAM",icon:vp,className:"bg-green-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.size||8192," MB"]}),a.jsx("div",{className:"text-[10px]",children:t?.type||"DDR4"}),r&&a.jsxs("div",{className:"text-[10px] mt-1",children:[a.jsxs("div",{children:["Reads: ",r.reads]}),a.jsxs("div",{children:["Writes: ",r.writes]})]})]})]})}),bS=N.memo(({id:e,data:t,selected:n})=>a.jsxs(Ta,{label:"Storage",icon:la,className:"bg-purple-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.size||512," GB"]}),a.jsx("div",{className:"text-[10px]",children:t?.type||"SSD"}),a.jsxs("div",{className:"text-[10px]",children:["Read: ",t?.readSpeed||500," MB/s"]})]})]})),kS=N.memo(({id:e,data:t,selected:n})=>a.jsxs(Ta,{label:"System Bus",icon:cv,className:"bg-yellow-400 text-black",selected:n,children:[a.jsx(X,{type:"target",position:O.Top,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Bottom,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.width||64,"-bit"]}),a.jsxs("div",{className:"text-[10px]",children:[t?.speed||100," MHz"]})]})]})),NS=N.memo(({id:e,data:t,selected:n})=>a.jsxs("div",{className:`w-96 h-48 border-4 border-black shadow-comic bg-gradient-to-br from-gray-700 to-gray-900 ${n?"scale-105":""}`,children:[a.jsx("div",{className:"flex items-center gap-2 p-2 border-b-4 border-black bg-gray-800 text-white",children:a.jsx("div",{className:"font-comic text-sm uppercase",children:"Motherboard"})}),a.jsx(X,{type:"source",position:O.Top,style:{left:"25%"},className:"w-3 h-3 bg-green-500 border-2 border-white"}),a.jsx(X,{type:"source",position:O.Top,style:{left:"50%"},className:"w-3 h-3 bg-blue-500 border-2 border-white"}),a.jsx(X,{type:"source",position:O.Top,style:{left:"75%"},className:"w-3 h-3 bg-purple-500 border-2 border-white"}),a.jsx(X,{type:"source",position:O.Bottom,style:{left:"33%"},className:"w-3 h-3 bg-yellow-400 border-2 border-white"}),a.jsx(X,{type:"source",position:O.Bottom,style:{left:"66%"},className:"w-3 h-3 bg-red-500 border-2 border-white"}),a.jsx("div",{className:"p-4 text-white text-xs",children:a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"CPU Socket"}),a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"RAM Slots"}),a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"PCIe"}),a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"SATA"}),a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"M.2"}),a.jsx("div",{className:"bg-white/10 p-1 border border-white/30 rounded",children:"USB"})]})})]})),SS=[],CS=[];function ES(){const[e,t,n]=ka(SS),[r,s,i]=Na(CS),o=N.useMemo(()=>({cpu:vS,ram:wS,storage:bS,systembus:kS,motherboard:NS}),[]),l=N.useCallback(d=>s(f=>pi({...d,animated:!0,style:{stroke:"#000",strokeWidth:3},type:"default"},f)),[s]),c=N.useCallback(d=>{d.preventDefault(),d.dataTransfer.dropEffect="move"},[]),u=N.useCallback(d=>{d.preventDefault();const f=d.dataTransfer.getData("application/reactflow"),m=d.dataTransfer.getData("application/label");if(!f)return;const g=d.target.getBoundingClientRect(),v={x:d.clientX-g.left-75,y:d.clientY-g.top-40},y={id:`${f}_${Date.now()}`,type:f,position:v,data:{label:m,clockSpeed:3,size:8192,cores:1}};t(k=>[...k,y]),_a.getState().updateFromNode(y.id,f,y.data)},[t]);return a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 to-purple-50",children:a.jsxs(yi,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:i,onConnect:l,onDrop:u,onDragOver:c,nodeTypes:o,fitView:!0,children:[a.jsx(Ea,{color:"#aaa",gap:16}),a.jsx(Ca,{}),a.jsx(Sa,{nodeColor:d=>{switch(d.type){case"cpu":return"#3b82f6";case"ram":return"#22c55e";case"storage":return"#a855f7";case"systembus":return"#eab308";case"motherboard":return"#1f2937";case"l1cache":return"#22d3ee";case"l2cache":return"#3b82f6";case"l3cache":return"#4f46e5";default:return"#999"}},style:{background:"#f3f4f6",border:"2px solid black"}})]})})}function jS(){return a.jsx(Gr,{children:a.jsx(ES,{})})}function _S(){const e=_a(r=>r.metrics),[t,n]=R.useState(!1);return a.jsxs("div",{className:"absolute top-6 right-6 z-40",children:[!t&&a.jsxs("button",{onClick:()=>n(!0),className:"bg-comic-blue text-white px-4 py-3 border-4 border-black shadow-comic font-comic hover:shadow-none hover:translate-y-1 transition-all flex items-center gap-2",children:[a.jsx(pp,{size:20}),"METRICS"]}),t&&a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-3 w-64",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-black pb-1",children:[a.jsx("h3",{className:"font-comic text-lg bg-comic-blue text-white px-2",children:"Metrics"}),a.jsx("button",{onClick:()=>n(!1),className:"w-6 h-6 bg-black text-white font-bold hover:bg-gray-800",children:""})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-2 border-blue-200 p-2 bg-blue-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-blue-700 mb-1",children:"Performance"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"IPC:"}),a.jsx("span",{className:"font-mono font-bold",children:e.ipc.toFixed(2)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Instructions:"}),a.jsx("span",{className:"font-mono font-bold",children:e.completedInstructions})]})]})]}),a.jsxs("div",{className:"border-2 border-green-200 p-2 bg-green-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-green-700 mb-1",children:"Memory"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Bandwidth:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.memoryBandwidth.toFixed(1)," GB/s"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Cache Hit:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.cacheHitRate.toFixed(0),"%"]})]})]})]}),a.jsxs("div",{className:"border-2 border-yellow-200 p-2 bg-yellow-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-yellow-700 mb-1",children:"Power"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Consumption:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.powerConsumption,"W"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Temperature:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.temperature,"C"]})]})]})]}),a.jsxs("div",{className:"border-2 border-purple-200 p-2 bg-purple-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-purple-700 mb-1",children:"Cost"}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{className:"font-mono font-bold",children:["$",e.totalCost]})]})]})]})]})]})}let fe;function TS(e){Rs===Bt.length&&Bt.push(Bt.length+1);const t=Rs;return Rs=Bt[t],Bt[t]=e,t}function MS(e){e<132||(Bt[e]=Rs,Rs=e)}function RS(e,t){return e=e>>>0,PS().subarray(e/8,e/8+t)}let ws=null;function PS(){return(ws===null||ws.byteLength===0)&&(ws=new BigUint64Array(fe.memory.buffer)),ws}let In=null;function Jf(){return(In===null||In.buffer.detached===!0||In.buffer.detached===void 0&&In.buffer!==fe.memory.buffer)&&(In=new DataView(fe.memory.buffer)),In}function em(e,t){return e=e>>>0,IS(e,t)}let bs=null;function AS(){return(bs===null||bs.byteLength===0)&&(bs=new Uint8Array(fe.memory.buffer)),bs}function ao(e){return Bt[e]}let Bt=new Array(128).fill(void 0);Bt.push(void 0,null,!0,!1);let Rs=Bt.length;function zS(e){const t=ao(e);return MS(e),t}let lo=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});lo.decode();const LS=2146435072;let vl=0;function IS(e,t){return vl+=t,vl>=LS&&(lo=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),lo.decode(),vl=t),lo.decode(AS().subarray(e,e+t))}const tm=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>fe.__wbg_cpu_free(e>>>0,1));class Mc{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,tm.unregister(this),t}free(){const t=this.__destroy_into_raw();fe.__wbg_cpu_free(t,0)}constructor(){const t=fe.cpu_new();return this.__wbg_ptr=t>>>0,tm.register(this,this.__wbg_ptr,this),this}get pc(){const t=fe.cpu_pc(this.__wbg_ptr);return BigInt.asUintN(64,t)}set pc(t){fe.cpu_set_pc(this.__wbg_ptr,t)}get_register(t){const n=fe.cpu_get_register(this.__wbg_ptr,t);return BigInt.asUintN(64,n)}set_register(t,n){fe.cpu_set_register(this.__wbg_ptr,t,n)}get_all_registers(){try{const s=fe.__wbindgen_add_to_stack_pointer(-16);fe.cpu_get_all_registers(s,this.__wbg_ptr);var t=Jf().getInt32(s+4*0,!0),n=Jf().getInt32(s+4*1,!0),r=RS(t,n).slice();return fe.__wbindgen_export(t,n*8,8),r}finally{fe.__wbindgen_add_to_stack_pointer(16)}}get cycle_count(){const t=fe.cpu_cycle_count(this.__wbg_ptr);return BigInt.asUintN(64,t)}execute(t){return fe.cpu_execute(this.__wbg_ptr,t)>>>0}reset(){fe.cpu_reset(this.__wbg_ptr)}}Symbol.dispose&&(Mc.prototype[Symbol.dispose]=Mc.prototype.free);const DS=new Set(["basic","cors","default"]);async function FS(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.ok&&DS.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function OS(){const e={};return e.wbg={},e.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(t,n){throw new Error(em(t,n))},e.wbg.__wbg_error_7bc7d576a6aaf855=function(t){console.error(ao(t))},e.wbg.__wbg_log_1d990106d99dacb7=function(t){console.log(ao(t))},e.wbg.__wbg_warn_6e567d0d926ff881=function(t){console.warn(ao(t))},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,n){const r=em(t,n);return TS(r)},e.wbg.__wbindgen_object_drop_ref=function(t){zS(t)},e}function $S(e,t){return fe=e.exports,e0.__wbindgen_wasm_module=t,ws=null,In=null,bs=null,fe.__wbindgen_start(),fe}async function e0(e){if(fe!==void 0)return fe;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/System-Playground/assets/simulation_engine_bg-CkpHUk39.wasm",import.meta.url));const t=OS();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await FS(await e,t);return $S(n,r)}class BS{constructor(){this.cpu=null,this.initialized=!1}async initialize(){if(!this.initialized)try{await e0(),this.cpu=new Mc,this.initialized=!0,console.log(" Rust CPU Emulator initialized!")}catch(t){throw console.error("Failed to initialize Rust CPU:",t),t}}execute(t){if(!this.cpu)throw new Error("CPU not initialized. Call initialize() first.");return this.cpu.execute(t)}getRegister(t){if(!this.cpu)throw new Error("CPU not initialized");return this.cpu.get_register(t)}setRegister(t,n){if(!this.cpu)throw new Error("CPU not initialized");this.cpu.set_register(t,n)}getAllRegisters(){if(!this.cpu)throw new Error("CPU not initialized");return this.cpu.get_all_registers()}getPC(){if(!this.cpu)throw new Error("CPU not initialized");return this.cpu.pc}setPC(t){if(!this.cpu)throw new Error("CPU not initialized");this.cpu.set_pc(t)}getCycleCount(){if(!this.cpu)throw new Error("CPU not initialized");return this.cpu.cycle_count}reset(){if(!this.cpu)throw new Error("CPU not initialized");this.cpu.reset()}runProgram(t){if(!this.cpu)throw new Error("CPU not initialized");let n=0;for(const r of t)n+=this.execute(r);return n}}function fs(e,t,n,r,s,i){return i<<25|s<<20|r<<15|n<<12|t<<7|e}function Vi(e,t,n,r,s){return s<<20|r<<15|n<<12|t<<7|e}const wl={ADD:(e,t,n)=>fs(51,e,0,t,n,0),SUB:(e,t,n)=>fs(51,e,0,t,n,32),XOR:(e,t,n)=>fs(51,e,4,t,n,0),OR:(e,t,n)=>fs(51,e,6,t,n,0),AND:(e,t,n)=>fs(51,e,7,t,n,0),ADDI:(e,t,n)=>Vi(19,e,0,t,n),XORI:(e,t,n)=>Vi(19,e,4,t,n),ORI:(e,t,n)=>Vi(19,e,6,t,n),ANDI:(e,t,n)=>Vi(19,e,7,t,n)};function HS({operation:e,inputA:t,inputB:n,result:r,flags:s,active:i}){const o={ADD:"+",SUB:"-",AND:"&",OR:"|",XOR:"^",SLL:"<<",SRL:">>",SLT:"<"};return a.jsxs("div",{className:`
            bg-white border-4 border-black shadow-comic
            p-4 min-w-[280px]
            ${i?"animate-pulse bg-comic-yellow":""}
        `,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-black",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aa,{size:24,className:"text-comic-pink"}),a.jsx("h3",{className:"font-comic font-bold text-lg uppercase",children:"ALU"})]}),i&&a.jsx(ia,{size:20,className:"text-comic-pink animate-pulse"})]}),a.jsx("div",{className:"bg-gray-100 border-2 border-black p-3 mb-3",children:a.jsxs("div",{className:"text-center font-mono",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Operation"}),a.jsx("div",{className:"text-2xl font-bold text-comic-pink",children:e||"IDLE"})]})}),a.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between bg-comic-blue bg-opacity-10 border-2 border-black p-2",children:[a.jsx("span",{className:"font-bold",children:"Input A:"}),a.jsx("span",{className:"font-mono bg-white px-2 py-1 border border-black",children:t!==void 0?t.toString():"--"})]}),a.jsx("div",{className:"text-center text-2xl text-comic-pink",children:o[e]||"?"}),a.jsxs("div",{className:"flex items-center justify-between bg-comic-blue bg-opacity-10 border-2 border-black p-2",children:[a.jsx("span",{className:"font-bold",children:"Input B:"}),a.jsx("span",{className:"font-mono bg-white px-2 py-1 border border-black",children:n!==void 0?n.toString():"--"})]}),a.jsx("div",{className:"text-center text-2xl font-bold",children:"="}),a.jsxs("div",{className:"flex items-center justify-between bg-green-100 border-3 border-black p-2",children:[a.jsx("span",{className:"font-bold",children:"Result:"}),a.jsx("span",{className:"font-mono font-bold bg-white px-2 py-1 border-2 border-black text-lg",children:r!==void 0?r.toString():"--"})]})]}),s&&a.jsxs("div",{className:"mt-3 pt-3 border-t-2 border-dashed border-gray-400",children:[a.jsx("div",{className:"text-xs font-bold mb-2",children:"FLAGS:"}),a.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[a.jsx("div",{className:`text-center p-1 border-2 border-black text-xs font-bold ${s.zero?"bg-comic-yellow":"bg-gray-200"}`,children:"Z"}),a.jsx("div",{className:`text-center p-1 border-2 border-black text-xs font-bold ${s.carry?"bg-comic-yellow":"bg-gray-200"}`,children:"C"}),a.jsx("div",{className:`text-center p-1 border-2 border-black text-xs font-bold ${s.overflow?"bg-comic-yellow":"bg-gray-200"}`,children:"V"}),a.jsx("div",{className:`text-center p-1 border-2 border-black text-xs font-bold ${s.negative?"bg-comic-yellow":"bg-gray-200"}`,children:"N"})]})]})]})}function US({registers:e,highlightedRegister:t,specialRegisters:n}){const r={0:"zero",1:"ra",2:"sp",3:"gp",4:"tp",5:"t0",6:"t1",7:"t2",8:"s0/fp",9:"s1",10:"a0",11:"a1",12:"a2",13:"a3",14:"a4",15:"a5",16:"a6",17:"a7",18:"s2",19:"s3",20:"s4",21:"s5",22:"s6",23:"s7",24:"s8",25:"s9",26:"s10",27:"s11",28:"t3",29:"t4",30:"t5",31:"t6"},s=i=>e?Array.isArray(e)?Number(e[i]||0n):Number(e[i]||0):0;return a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-4 min-w-[320px] max-h-[600px] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b-2 border-black sticky top-0 bg-white",children:[a.jsx(vp,{size:24,className:"text-comic-blue"}),a.jsx("h3",{className:"font-comic font-bold text-lg uppercase",children:"Register Bank"})]}),a.jsx("div",{className:"space-y-1",children:Array.from({length:32},(i,o)=>o).map(i=>{const o=s(i),l=t===i,c=n?.includes(i),u=o!==0;return a.jsxs("div",{className:`
                                flex items-center justify-between p-2 border-2 border-black
                                transition-all duration-200
                                ${l?"bg-comic-yellow scale-105 shadow-comic":""}
                                ${!l&&u?"bg-green-50":""}
                                ${!l&&!u?"bg-gray-50":""}
                                ${c?"border-comic-pink border-3":""}
                            `,children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-[80px]",children:[a.jsxs("span",{className:"font-mono font-bold text-xs text-gray-600",children:["x",i]}),a.jsx("span",{className:"text-xs text-gray-500 font-mono",children:r[i]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"font-mono text-sm bg-white px-2 py-1 border border-black min-w-[80px] text-right",children:o.toString().padStart(8,"0")}),a.jsxs("div",{className:"text-xs text-gray-500 font-mono w-16 text-right",children:["0x",o.toString(16).toUpperCase().padStart(8,"0")]})]})]},i)})}),n&&n.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-gray-400",children:[a.jsx("div",{className:"text-xs font-bold mb-2 text-comic-pink",children:"SPECIAL REGISTERS:"}),a.jsx("div",{className:"text-xs text-gray-600 space-y-1",children:n.map(i=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-4 h-4 bg-comic-pink border border-black inline-block"}),a.jsxs("span",{className:"font-mono",children:["x",i," (",r[i],")"]})]},i))})]})]})}function VS(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(!1);N.useEffect(()=>{d()},[]);const d=async()=>{try{const y=new BS;await y.initialize(),t(y),f(y),r(!1),m(" CPU Ready")}catch(y){r(!1),m(` ${y.message}`)}},f=y=>{const k=Array.from(y.getAllRegisters());i(k)},m=y=>{l(k=>[...k.slice(-3),y])},g=()=>{if(!e||c)return;u(!0),e.reset(),m(" Running...");const y=[{inst:wl.ADDI(1,0,10),desc:"x1 = 10"},{inst:wl.ADDI(2,0,20),desc:"x2 = 20"},{inst:wl.ADD(3,1,2),desc:"x3 = x1 + x2"}];let k=0;const h=setInterval(()=>{if(k>=y.length){clearInterval(h),u(!1),m(" Done! x3 = 30");return}const{inst:p,desc:x}=y[k];m(x),e.execute(p),f(e),k++},800)},v=()=>{e&&(e.reset(),f(e),l([" Reset"]))};return n?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"font-comic text-xl",children:"Loading CPU..."})}):a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("button",{onClick:g,disabled:c,className:`px-4 py-2 border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold flex items-center gap-2 ${c?"bg-gray-300":"bg-green-400"}`,children:[a.jsx(ca,{size:16}),"Run"]}),a.jsxs("button",{onClick:v,className:"px-4 py-2 bg-comic-yellow border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold flex items-center gap-2",children:[a.jsx(ua,{size:16}),"Reset"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(US,{registers:s,specialRegisters:[1,2,3]}),a.jsx(HS,{operation:"ADD",inputA:10,inputB:20,result:30})]}),a.jsx("div",{className:"bg-black text-green-400 border-4 border-black p-3 font-mono text-sm h-24",children:o.map((y,k)=>a.jsx("div",{children:y},k))})]})}const qS=[{id:"pc-1-intro",title:"First CPU Build",difficulty:"beginner",estimatedTime:"5 min",module:"pc-architecture",objective:{description:"Build a simple CPU with ALU and registers",requirements:["Add 1 ALU component","Add 2 register components","Connect them with edges","Run simulation for 10 cycles"]},constraints:{minComponents:3,maxComponents:5,allowedComponents:["alu","register","bus"],requiredMetrics:{cyclesCompleted:{min:10}}},initialSetup:{nodes:[],edges:[]},starRating:{3:{hint:" Connect all components efficiently"},2:{hint:" Create basic connections"},1:{hint:" Complete the objective"}},hints:["Drag ALU from sidebar","Add registers to store data","Connect components with edges","Click play to run"],tutorialSteps:["Drag an ALU component onto the canvas","Add two Register components","Connect them by dragging edges","Press Play button","Watch the simulation run for 10 cycles"],unlocks:"pc-2-cache-intro"},{id:"pc-2-cache-intro",title:"Cache Memory Basics",difficulty:"beginner",estimatedTime:"7 min",module:"pc-architecture",objective:{description:"Add L1 cache to improve memory access speed",requirements:["Add L1 Cache component","Connect to CPU","Achieve cache hit rate > 60%"]},constraints:{minComponents:4,allowedComponents:["alu","register","cache-l1","memory","bus"],requiredMetrics:{cacheHitRate:{min:60}}},starRating:{3:{cacheHitRate:{min:80}},2:{cacheHitRate:{min:70}},1:{cacheHitRate:{min:60}}},hints:["L1 cache is closest to CPU","Hit rate improves with locality of reference","Connect cache between CPU and memory"],unlocks:"pc-3-pipeline-intro"},{id:"pc-3-pipeline-intro",title:"Introduction to Pipelining",difficulty:"beginner",estimatedTime:"8 min",module:"pc-architecture",objective:{description:"Build a 3-stage pipeline (Fetch, Decode, Execute)",requirements:["Create 3 pipeline stages","Process 5 instructions","Achieve throughput > 0.8 IPC"]},constraints:{minComponents:5,allowedComponents:["fetch-unit","decode-unit","execute-unit","register","bus"],requiredMetrics:{ipc:{min:.8},instructionsCompleted:{min:5}}},starRating:{3:{ipc:{min:1.2}},2:{ipc:{min:1}},1:{ipc:{min:.8}}},hints:["Pipeline stages work in parallel","Each stage processes different instruction","IPC = Instructions Per Cycle"],unlocks:"pc-4-hazards"},{id:"pc-4-hazards",title:"Dealing with Hazards",difficulty:"beginner",estimatedTime:"10 min",module:"pc-architecture",objective:{description:"Handle data hazards in pipeline using forwarding",challenge:"Minimize pipeline stalls!",requirements:["Add forwarding unit","Process 10 instructions","Keep stalls < 3"]},constraints:{minComponents:6,allowedComponents:["fetch-unit","decode-unit","execute-unit","forwarding-unit","register","bus"],requiredMetrics:{pipelineStalls:{max:3},instructionsCompleted:{min:10}}},starRating:{3:{pipelineStalls:{max:0}},2:{pipelineStalls:{max:1}},1:{pipelineStalls:{max:3}}},hints:["Forwarding bypasses register write-back","RAW hazards are most common","Add forwarding paths between stages"],unlocks:"pc-5-branch-prediction"},{id:"pc-5-branch-prediction",title:"Branch Prediction 101",difficulty:"beginner",estimatedTime:"12 min",module:"pc-architecture",objective:{description:"Add branch predictor to reduce control hazards",requirements:["Add branch predictor","Achieve prediction accuracy > 70%","Process 15 instructions"]},constraints:{minComponents:7,allowedComponents:["fetch-unit","decode-unit","execute-unit","branch-predictor","register","bus"],requiredMetrics:{branchAccuracy:{min:70},instructionsCompleted:{min:15}}},starRating:{3:{branchAccuracy:{min:90}},2:{branchAccuracy:{min:80}},1:{branchAccuracy:{min:70}}},hints:["Static prediction always predicts same","Dynamic prediction learns from history","1-bit predictor is simplest"],unlocks:"pc-6-cache-hierarchy"},{id:"pc-6-cache-hierarchy",title:"Multi-Level Cache",difficulty:"intermediate",estimatedTime:"15 min",module:"pc-architecture",objective:{description:"Build L1, L2, L3 cache hierarchy",challenge:"Balance speed and capacity!",requirements:["Add L1, L2, and L3 caches","Configure sizes correctly","Overall hit rate > 85%"]},constraints:{minComponents:8,requiredComponents:["cache-l1","cache-l2","cache-l3"],allowedComponents:["alu","register","cache-l1","cache-l2","cache-l3","memory","bus"],requiredMetrics:{overallHitRate:{min:85}}},starRating:{3:{overallHitRate:{min:95}},2:{overallHitRate:{min:90}},1:{overallHitRate:{min:85}}},hints:["L1: Small but fast (4 cycles)","L2: Medium size (12 cycles)","L3: Large but slower (40 cycles)","Inclusive hierarchy is common"],unlocks:"pc-7-superscalar"},{id:"pc-7-superscalar",title:"Superscalar Execution",difficulty:"intermediate",estimatedTime:"18 min",module:"pc-architecture",objective:{description:"Build dual-issue superscalar CPU",challenge:"Execute 2 instructions per cycle!",requirements:["Add 2 ALU units","Add 2 execution pipelines","Achieve IPC > 1.5"]},constraints:{minComponents:10,requiredMetrics:{ipc:{min:1.5},instructionsCompleted:{min:20}}},starRating:{3:{ipc:{min:1.9}},2:{ipc:{min:1.7}},1:{ipc:{min:1.5}}},hints:["Superscalar = multiple instructions/cycle","Need multiple execution units","Instruction-level parallelism (ILP)","Dependency checking is critical"],unlocks:"pc-8-out-of-order"},{id:"pc-8-out-of-order",title:"Out-of-Order Execution",difficulty:"intermediate",estimatedTime:"20 min",module:"pc-architecture",objective:{description:"Implement OOO execution with Tomasulo algorithm",challenge:"Maximize instruction throughput!",requirements:["Add reservation stations","Add reorder buffer","IPC > 2.0"]},constraints:{minComponents:12,requiredComponents:["reservation-station","reorder-buffer"],requiredMetrics:{ipc:{min:2},instructionsCompleted:{min:25}}},starRating:{3:{ipc:{min:2.5}},2:{ipc:{min:2.2}},1:{ipc:{min:2}}},hints:["OOO = execute when ready, not in order","Reservation stations hold pending ops","ROB ensures in-order commit","Eliminates false dependencies"],unlocks:"pc-9-speculative"},{id:"pc-9-speculative",title:"Speculative Execution",difficulty:"intermediate",estimatedTime:"22 min",module:"pc-architecture",objective:{description:"Add speculative execution with rollback",challenge:"Predict and execute ahead!",requirements:["Add branch predictor","Add speculation buffer","Misprediction recovery < 5 cycles"]},constraints:{minComponents:13,requiredComponents:["branch-predictor","speculation-buffer"],requiredMetrics:{branchAccuracy:{min:85},mispredictionPenalty:{max:5}}},starRating:{3:{branchAccuracy:{min:95},mispredictionPenalty:{max:3}},2:{branchAccuracy:{min:90},mispredictionPenalty:{max:4}},1:{branchAccuracy:{min:85},mispredictionPenalty:{max:5}}},hints:["Speculate on branch outcomes","Execute speculatively down predicted path","Rollback if mispredicted","2-bit predictors more accurate"],unlocks:"pc-10-prefetching"},{id:"pc-10-prefetching",title:"Hardware Prefetching",difficulty:"intermediate",estimatedTime:"20 min",module:"pc-architecture",objective:{description:"Add hardware prefetcher to reduce cache misses",challenge:"Predict future memory accesses!",requirements:["Add prefetch unit","Cache miss rate < 10%","Prefetch accuracy > 70%"]},constraints:{minComponents:10,requiredComponents:["prefetch-unit","cache-l1"],requiredMetrics:{cacheMissRate:{max:10},prefetchAccuracy:{min:70}}},starRating:{3:{cacheMissRate:{max:5},prefetchAccuracy:{min:85}},2:{cacheMissRate:{max:7},prefetchAccuracy:{min:75}},1:{cacheMissRate:{max:10},prefetchAccuracy:{min:70}}},hints:["Stride prefetching detects patterns","Stream buffers for sequential access","Balance coverage and accuracy","Prefetch too early = cache pollution"],unlocks:"pc-11-simd"},{id:"pc-11-simd",title:"SIMD Vector Processing",difficulty:"advanced",estimatedTime:"25 min",module:"pc-architecture",objective:{description:"Add SIMD (Single Instruction Multiple Data) units",challenge:"Process 4 data elements in parallel!",requirements:["Add vector ALU unit","Add vector registers","Process 16 vector operations","Achieve 4x speedup"]},constraints:{minComponents:11,requiredComponents:["vector-alu","vector-register"],requiredMetrics:{vectorOpsCompleted:{min:16},speedup:{min:4}}},starRating:{3:{speedup:{min:3.8}},2:{speedup:{min:3.5}},1:{speedup:{min:3}}},hints:["SIMD = data parallelism","Example: SSE, AVX on x86","Great for multimedia, ML","Need aligned data"],unlocks:"pc-12-multi-core"},{id:"pc-12-multi-core",title:"Dual-Core Architecture",difficulty:"advanced",estimatedTime:"30 min",module:"pc-architecture",objective:{description:"Build 2-core system with shared cache",challenge:"Coordinate multiple cores!",requirements:["2 complete CPU cores","Shared L3 cache","Total IPC > 3.0"]},constraints:{minComponents:16,requiredComponents:["cache-l3"],requiredMetrics:{totalIPC:{min:3},coreCount:{min:2}}},starRating:{3:{totalIPC:{min:3.8}},2:{totalIPC:{min:3.4}},1:{totalIPC:{min:3}}},hints:["Each core needs own L1/L2","Share L3 cache between cores","Cache coherence is critical","Independent execution streams"],unlocks:"pc-13-cache-coherence"},{id:"pc-13-cache-coherence",title:"Cache Coherence Protocol",difficulty:"advanced",estimatedTime:"35 min",module:"pc-architecture",objective:{description:"Implement MESI coherence protocol",challenge:"Keep caches consistent!",requirements:["Add coherence controller","2+ cores with private caches","Zero data races","Coherence traffic < 20%"]},constraints:{minComponents:18,requiredComponents:["coherence-controller"],requiredMetrics:{dataRaces:{max:0},coherenceOverhead:{max:20}}},starRating:{3:{coherenceOverhead:{max:10}},2:{coherenceOverhead:{max:15}},1:{coherenceOverhead:{max:20}}},hints:["MESI: Modified, Exclusive, Shared, Invalid","Snooping vs directory-based","Invalidate or update?","False sharing hurts performance"],unlocks:"pc-14-power-aware"},{id:"pc-14-power-aware",title:"Power-Aware Architecture",difficulty:"advanced",estimatedTime:"30 min",module:"pc-architecture",objective:{description:"Implement DVFS and clock gating",challenge:"Minimize power while meeting performance!",requirements:["Add power controller","Dynamic voltage/frequency scaling","Power consumption < 50W","Performance within 90% of max"]},constraints:{minComponents:14,requiredComponents:["power-controller"],requiredMetrics:{powerConsumption:{max:50},performanceRatio:{min:.9}}},starRating:{3:{powerConsumption:{max:40},performanceRatio:{min:.95}},2:{powerConsumption:{max:45},performanceRatio:{min:.92}},1:{powerConsumption:{max:50},performanceRatio:{min:.9}}},hints:["DVFS = dynamic voltage/frequency scaling","Lower freq = lower power but slower","Clock gating disables unused units","Power gating for deeper sleep"],unlocks:"pc-15-memory-controller"},{id:"pc-15-memory-controller",title:"Advanced Memory Controller",difficulty:"advanced",estimatedTime:"28 min",module:"pc-architecture",objective:{description:"Optimize memory controller for bandwidth and latency",challenge:"Schedule memory requests efficiently!",requirements:["Add memory controller","Support row buffer hits","Memory latency < 60ns","Bandwidth > 20 GB/s"]},constraints:{minComponents:12,requiredComponents:["memory-controller"],requiredMetrics:{memoryLatency:{max:60},memoryBandwidth:{min:20}}},starRating:{3:{memoryLatency:{max:50},memoryBandwidth:{min:25}},2:{memoryLatency:{max:55},memoryBandwidth:{min:22}},1:{memoryLatency:{max:60},memoryBandwidth:{min:20}}},hints:["Row buffer locality is key","FR-FCFS scheduling common","Bank-level parallelism","Refresh overhead is real"],unlocks:"pc-16-heterogeneous"},{id:"pc-16-heterogeneous",title:"Heterogeneous Computing",difficulty:"expert",estimatedTime:"40 min",module:"pc-architecture",objective:{description:"Build big.LITTLE-style heterogeneous system",challenge:"Mix performance and efficiency cores!",requirements:["2 high-performance cores","4 efficiency cores","Dynamic task migration","Total power < 80W","Performance within 95% of all-big"]},constraints:{minComponents:20,requiredMetrics:{powerConsumption:{max:80},performanceRatio:{min:.95}}},starRating:{3:{powerConsumption:{max:65},performanceRatio:{min:.97}},2:{powerConsumption:{max:72},performanceRatio:{min:.96}},1:{powerConsumption:{max:80},performanceRatio:{min:.95}}},hints:["Big cores: high performance, high power","Little cores: low performance, low power","Migrate tasks based on workload","ARM big.LITTLE is example"],unlocks:"pc-17-noc"},{id:"pc-17-noc",title:"Network-on-Chip",difficulty:"expert",estimatedTime:"45 min",module:"pc-architecture",objective:{description:"Design mesh NoC for 16-core system",challenge:"Scalable interconnect!",requirements:["4x4 mesh topology","Routers at each node","Average latency < 10 hops","Network utilization > 70%"]},constraints:{minComponents:25,requiredComponents:["noc-router"],requiredMetrics:{avgNetworkLatency:{max:10},networkUtilization:{min:70}}},starRating:{3:{avgNetworkLatency:{max:7},networkUtilization:{min:80}},2:{avgNetworkLatency:{max:8},networkUtilization:{min:75}},1:{avgNetworkLatency:{max:10},networkUtilization:{min:70}}},hints:["NoC scales better than shared bus","XY routing is simple","Virtual channels reduce blocking","Wormhole routing common"],unlocks:"pc-18-gpu-basics"},{id:"pc-18-gpu-basics",title:"GPU-Style SIMT",difficulty:"expert",estimatedTime:"50 min",module:"pc-architecture",objective:{description:"Build simple GPU with SIMT execution",challenge:"Thousands of threads!",requirements:["Add SIMT core (warp scheduler)","32-wide SIMD units","Process 1024 threads","Throughput > 100 GFLOPs"]},constraints:{minComponents:18,requiredComponents:["simt-core","warp-scheduler"],requiredMetrics:{threadsProcessed:{min:1024},throughput:{min:100}}},starRating:{3:{throughput:{min:150}},2:{throughput:{min:125}},1:{throughput:{min:100}}},hints:["SIMT = Single Instruction Multiple Thread","Warps execute in lockstep","Branch divergence is costly","High thread count hides latency"],unlocks:"pc-19-quantum"},{id:"pc-19-quantum",title:"Quantum-Inspired Computing",difficulty:"expert",estimatedTime:"55 min",module:"pc-architecture",objective:{description:"Simulate quantum-inspired optimization accelerator",challenge:"Solve optimization problems fast!",requirements:["Add quantum annealer unit","Solve 100-variable problem","Speedup > 10x vs classical","Energy efficiency > 100 GOPS/W"]},constraints:{minComponents:15,requiredComponents:["quantum-annealer"],requiredMetrics:{speedup:{min:10},energyEfficiency:{min:100}}},starRating:{3:{speedup:{min:20},energyEfficiency:{min:150}},2:{speedup:{min:15},energyEfficiency:{min:125}},1:{speedup:{min:10},energyEfficiency:{min:100}}},hints:["Quantum annealing finds global minima","Use superposition and tunneling","Good for combinatorial optimization","Not universal quantum computer"],unlocks:"pc-20-ultimate"},{id:"pc-20-ultimate",title:"The Ultimate PC Architecture",difficulty:"expert",estimatedTime:"60 min",module:"pc-architecture",objective:{description:"Build a complete modern PC architecture",challenge:"ALL CONSTRAINTS MUST BE MET!",requirements:["Multi-core with cache hierarchy","OOO superscalar execution","SIMD vector units","Advanced branch prediction","Power management","Hardware prefetching","Cache coherence"]},constraints:{minComponents:30,requiredComponents:["cache-l1","cache-l2","cache-l3","reorder-buffer","reservation-station","vector-alu","branch-predictor","power-controller","prefetch-unit","coherence-controller"],requiredMetrics:{totalIPC:{min:4},powerConsumption:{max:150},overallHitRate:{min:92},branchAccuracy:{min:90},energyEfficiency:{min:50}}},starRating:{3:{totalIPC:{min:5},powerConsumption:{max:120},overallHitRate:{min:95},branchAccuracy:{min:95},energyEfficiency:{min:70},hint:" PERFECT! Elite PC architect!"},2:{totalIPC:{min:4.5},powerConsumption:{max:135},overallHitRate:{min:93},branchAccuracy:{min:92},hint:" Great! Almost perfect balance!"},1:{totalIPC:{min:4},powerConsumption:{max:150},overallHitRate:{min:92},branchAccuracy:{min:90},hint:" Good! Met all requirements!"}},hints:["Balance performance, power, and area","All modern features required","This is the final boss!","Think like Intel/AMD engineers"],unlocks:null}];function WS(){const[e,t]=N.useState("level-select"),[n,r]=N.useState(null),[s,i]=N.useState(null),{updateLevelProgress:o,unlockLevel:l}=wn(),c=m=>{r(m),t("playing"),i(null)},u=()=>{r(null),t("sandbox"),i(null)},d=()=>{t("level-select"),r(null),i(null)},f=()=>{if(!n)return;const m=new fa(n),g={metrics:{},components:[],running:!1},v=m.validate(g);i(v),v.passed&&(o("pc-architecture",n.id,{completed:!0,stars:v.stars,attempts:1,bestTime:v.completionTime||0}),n.unlocks&&l(n.unlocks))};return e==="level-select"?a.jsx(ma,{levels:qS,moduleTitle:"PC ARCHITECTURE",moduleSubtitle:"Build Epic Computer Systems!",onSelectLevel:c,onSandboxMode:u,onBack:()=>window.location.reload()}):a.jsxs("div",{className:"w-full h-screen flex flex-col bg-comic-cream relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-5 pointer-events-none z-0"}),a.jsxs("div",{className:"bg-comic-yellow border-b-4 border-black px-6 py-2 flex items-center justify-between shadow-md z-30 relative",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white border-3 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold",children:[a.jsx(oa,{size:20,className:"stroke-[3]"}),e==="sandbox"?"BACK":"EXIT LEVEL"]}),n&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ui,{className:"stroke-[3]",size:28}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-comic text-xl font-bold uppercase tracking-wide",children:n.title}),a.jsxs("p",{className:"text-sm font-comic uppercase tracking-wide",children:[n.difficulty,"  ",n.estimatedTime]})]})]}),e==="sandbox"&&a.jsx("h2",{className:"font-comic text-2xl font-bold uppercase tracking-wider",children:" SANDBOX MODE"})]}),n&&a.jsx("button",{onClick:f,className:"px-6 py-3 bg-comic-blue text-white border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-lg uppercase",children:" Check Solution"})]}),a.jsx("div",{className:"flex-1 flex overflow-hidden relative",children:a.jsx("div",{className:"flex-1 flex flex-col relative",children:a.jsxs("div",{className:"flex-1 relative bg-comic-cream",children:[n?a.jsx(VS,{}):a.jsx(jS,{}),n&&a.jsx(ha,{level:n,validationResult:s}),a.jsx("div",{className:"absolute top-4 right-4 z-40",children:a.jsx(_S,{})})]})})})]})}function QS(){const e=(t,n,r)=>{t.dataTransfer.setData("application/reactflow",n),t.dataTransfer.setData("application/label",r),t.dataTransfer.effectAllowed="move"};return a.jsxs("div",{className:"w-48 bg-comic-cream border-r-4 border-black p-4 overflow-y-auto h-full",children:[a.jsx("h2",{className:"font-comic text-2xl mb-4 bg-comic-yellow border-4 border-black p-2 text-center transform -rotate-1",children:"Components"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-blue-500 text-white px-2 py-1 border-2 border-black",children:"MEMORY"}),a.jsxs("div",{className:"bg-blue-500 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"physicalram","Physical RAM"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Physical RAM"}),a.jsx("div",{className:"text-[10px]",children:"Main Memory"})]}),a.jsxs("div",{className:"bg-purple-500 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"virtualmemory","Virtual Memory"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Virtual Memory"}),a.jsx("div",{className:"text-[10px]",children:"Address Space"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-green-500 text-white px-2 py-1 border-2 border-black",children:"TRANSLATION"}),a.jsxs("div",{className:"bg-green-500 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"pagetable","Page Table"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"Page Table"}),a.jsx("div",{className:"text-[10px]",children:"Virtual  Physical"})]}),a.jsxs("div",{className:"bg-yellow-400 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"tlb","TLB"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:"TLB"}),a.jsx("div",{className:"text-[10px]",children:"Fast Lookup"})]})]})]})}class GS{constructor(t,n=4096){this.size=t,this.pageSize=n,this.frames=Math.floor(t/n),this.frameTable=new Array(this.frames).fill(null),this.freeFrames=this.frames}allocateFrame(){for(let t=0;t<this.frames;t++)if(this.frameTable[t]===null)return this.frameTable[t]={allocated:!0,pid:null},this.freeFrames--,t;return-1}freeFrame(t){t>=0&&t<this.frames&&(this.frameTable[t]=null,this.freeFrames++)}getUtilization(){return(this.frames-this.freeFrames)/this.frames*100}}class YS{constructor(){this.frameNumber=-1,this.valid=!1,this.dirty=!1,this.referenced=!1,this.timestamp=0}}class XS{constructor(t){this.pages=t,this.entries=new Array(t).fill(null).map(()=>new YS),this.accessCounter=0}translate(t){if(t<0||t>=this.pages)return{pageFault:!0,reason:"INVALID_ADDRESS"};const n=this.entries[t];return n.valid?(n.referenced=!0,n.timestamp=this.accessCounter++,{pageFault:!1,frameNumber:n.frameNumber,physicalAddress:n.frameNumber}):{pageFault:!0,reason:"PAGE_NOT_IN_MEMORY"}}map(t,n){if(t>=0&&t<this.pages){const r=this.entries[t];r.frameNumber=n,r.valid=!0,r.dirty=!1,r.referenced=!0,r.timestamp=this.accessCounter++}}unmap(t){if(t>=0&&t<this.pages){const n=this.entries[t];n.frameNumber=-1,n.valid=!1}}setDirty(t){t>=0&&t<this.pages&&(this.entries[t].dirty=!0)}}class KS{constructor(t=64,n=4){this.maxEntries=t,this.associativity=n,this.cache=new Map,this.accessOrder=[],this.hits=0,this.misses=0}lookup(t){if(this.cache.has(t)){this.hits++;const n=this.accessOrder.indexOf(t);return n>-1&&this.accessOrder.splice(n,1),this.accessOrder.push(t),{hit:!0,frameNumber:this.cache.get(t)}}return this.misses++,{hit:!1}}insert(t,n){if(this.cache.size>=this.maxEntries){const r=this.accessOrder.shift();this.cache.delete(r)}this.cache.set(t,n),this.accessOrder.push(t)}flush(){this.cache.clear(),this.accessOrder=[]}getHitRate(){const t=this.hits+this.misses;return t>0?this.hits/t*100:0}}const He=di((e,t)=>({currentTick:0,isRunning:!1,physicalRAM:null,pageTable:null,tlb:null,processes:[],accessHistory:[],metrics:{totalRAM:0,usedRAM:0,freeRAM:0,pageFaults:0,pageHits:0,pageFaultRate:0,tlbHits:0,tlbMisses:0,tlbHitRate:0,avgAccessTime:0,effectiveAccessTime:0,evictions:0,diskWrites:0},initializeMemory:(n=16*1024*1024,r=4096)=>{const s=new GS(n,r),i=Math.floor(n/r)*4,o=new XS(i),l=new KS(64,4);e({physicalRAM:s,pageTable:o,tlb:l,metrics:{...t().metrics,totalRAM:n,freeRAM:n}})},accessMemory:n=>{const r=t();if(!r.physicalRAM||!r.pageTable||!r.tlb)return;const s=r.physicalRAM.pageSize,i=Math.floor(n/s);let o=0;if(r.tlb.lookup(i).hit)o=11,e(d=>({metrics:{...d.metrics,tlbHits:d.metrics.tlbHits+1,pageHits:d.metrics.pageHits+1}}));else{o=21;const d=r.pageTable.translate(i);if(d.pageFault){o+=1e6;const f=r.physicalRAM.allocateFrame();f>=0&&(r.pageTable.map(i,f),r.tlb.insert(i,f)),e(m=>({metrics:{...m.metrics,tlbMisses:m.metrics.tlbMisses+1,pageFaults:m.metrics.pageFaults+1}}))}else r.tlb.insert(i,d.frameNumber),e(f=>({metrics:{...f.metrics,tlbMisses:f.metrics.tlbMisses+1,pageHits:f.metrics.pageHits+1}}))}const c=t().metrics.pageHits+t().metrics.pageFaults,u=t().metrics.tlbHits+t().metrics.tlbMisses;e(d=>({accessHistory:[...d.accessHistory.slice(-99),{virtualAddress:n,accessTime:o}],metrics:{...d.metrics,pageFaultRate:c>0?d.metrics.pageFaults/c*100:0,tlbHitRate:u>0?d.metrics.tlbHits/u*100:0,avgAccessTime:o}}))},play:()=>e({isRunning:!0}),pause:()=>e({isRunning:!1}),reset:()=>{t().initializeMemory(),e({currentTick:0,isRunning:!1,processes:[],accessHistory:[],metrics:{totalRAM:t().physicalRAM?.size||0,usedRAM:0,freeRAM:t().physicalRAM?.size||0,pageFaults:0,pageHits:0,pageFaultRate:0,tlbHits:0,tlbMisses:0,tlbHitRate:0,avgAccessTime:0,effectiveAccessTime:0,evictions:0,diskWrites:0}})},tick:()=>{if(!t().isRunning)return;const n=Math.floor(Math.random()*(16*1024*1024));t().accessMemory(n),e(r=>({currentTick:r.currentTick+1}))}})),Ma=({children:e,className:t,label:n,icon:r,selected:s})=>a.jsxs("div",{className:`w-40 border-4 border-black shadow-comic transform transition-all ${s?"scale-110":""} ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-2 p-1 border-b-4 border-black bg-white/90",children:[a.jsx(r,{size:16}),a.jsx("div",{className:"font-comic text-xs uppercase",children:n})]}),e]}),ZS=N.memo(({id:e,data:t,selected:n})=>{const r=He(i=>i.physicalRAM),s=He(i=>i.metrics);return a.jsxs(Ma,{label:"Physical RAM",icon:vv,className:"bg-blue-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.size||"16"," MB"]}),a.jsxs("div",{className:"text-[10px]",children:["Page: ",t?.pageSize||4,"KB"]}),r&&a.jsxs("div",{className:"text-[10px] mt-1",children:[a.jsxs("div",{children:["Frames: ",r.frames]}),a.jsxs("div",{children:["Free: ",r.freeFrames]}),a.jsxs("div",{children:["Used: ",(s.usedRAM/s.totalRAM*100).toFixed(1),"%"]})]})]})]})}),JS=N.memo(({id:e,data:t,selected:n})=>{const r=He(s=>s.metrics);return a.jsxs(Ma,{label:"Virtual Memory",icon:la,className:"bg-purple-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.size||"64"," MB"]}),a.jsx("div",{className:"text-[10px]",children:"Address Space"}),a.jsxs("div",{className:"text-[10px] mt-1",children:[a.jsxs("div",{children:["Faults: ",r.pageFaults]}),a.jsxs("div",{children:["Rate: ",r.pageFaultRate.toFixed(2),"%"]})]})]})]})}),eC=N.memo(({id:e,data:t,selected:n})=>{const r=He(o=>o.pageTable),s=r?.entries.filter(o=>o.valid).length||0,i=r?.entries.length||0;return a.jsxs(Ma,{label:"Page Table",icon:Nv,className:"bg-green-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Top,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Bottom,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:["Entries: ",i]}),a.jsxs("div",{className:"text-[10px]",children:["Valid: ",s]}),a.jsx("div",{className:"text-[10px] mt-1",children:a.jsxs("div",{children:["Hit Rate: ",(s/i*100).toFixed(1),"%"]})})]})]})}),tC=N.memo(({id:e,data:t,selected:n})=>{const r=He(i=>i.tlb),s=He(i=>i.metrics);return a.jsxs(Ma,{label:"TLB",icon:ju,className:"bg-yellow-400 text-black",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2 border-2 border-black",children:[a.jsxs("div",{className:"font-bold",children:[t?.entries||64," Entries"]}),a.jsxs("div",{className:"text-[10px]",children:[t?.assoc||4,"-way"]}),r&&a.jsxs("div",{className:"text-[10px] mt-1",children:[a.jsxs("div",{children:["Hits: ",r.hits]}),a.jsxs("div",{children:["Rate: ",s.tlbHitRate.toFixed(1),"%"]})]})]})]})}),nC=[],rC=[];function sC(){const[e,t,n]=ka(nC),[r,s,i]=Na(rC),o=He(f=>f.initializeMemory),l=N.useMemo(()=>({physicalram:ZS,virtualmemory:JS,pagetable:eC,tlb:tC}),[]),c=N.useCallback(f=>s(m=>pi({...f,animated:!0,style:{stroke:"#000",strokeWidth:3},type:"default"},m)),[s]),u=N.useCallback(f=>{f.preventDefault(),f.dataTransfer.dropEffect="move"},[]),d=N.useCallback(f=>{f.preventDefault();const m=f.dataTransfer.getData("application/reactflow"),g=f.dataTransfer.getData("application/label");if(!m)return;const v=f.target.getBoundingClientRect(),y={x:f.clientX-v.left-75,y:f.clientY-v.top-40},k={id:`${m}_${Date.now()}`,type:m,position:y,data:{label:g,size:16,pageSize:4,entries:64,assoc:4}};t(h=>[...h,k]),m==="physicalram"&&!He.getState().physicalRAM&&o()},[t,o]);return a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 to-green-50",children:a.jsxs(yi,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:i,onConnect:c,onDrop:d,onDragOver:u,nodeTypes:l,fitView:!0,children:[a.jsx(Ea,{color:"#aaa",gap:16}),a.jsx(Ca,{}),a.jsx(Sa,{nodeColor:f=>{switch(f.type){case"physicalram":return"#3b82f6";case"virtualmemory":return"#a855f7";case"pagetable":return"#22c55e";case"tlb":return"#eab308";default:return"#999"}},style:{background:"#f3f4f6",border:"2px solid black"}})]})})}function iC(){return a.jsx(Gr,{children:a.jsx(sC,{})})}function oC(){const e=He(r=>r.metrics),[t,n]=R.useState(!1);return a.jsxs("div",{className:"absolute top-6 right-6 z-40",children:[!t&&a.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-500 text-white px-4 py-3 border-4 border-black shadow-comic font-comic hover:shadow-none hover:translate-y-1 transition-all flex items-center gap-2",children:[a.jsx(ia,{size:20}),"METRICS"]}),t&&a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-3 w-64",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-black pb-1",children:[a.jsx("h3",{className:"font-comic text-lg bg-blue-500 text-white px-2",children:"Metrics"}),a.jsx("button",{onClick:()=>n(!1),className:"w-6 h-6 bg-black text-white font-bold hover:bg-gray-800",children:""})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-2 border-blue-200 p-2 bg-blue-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-blue-700 mb-1",children:"Memory"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{className:"font-mono font-bold",children:[(e.totalRAM/1024/1024).toFixed(0)," MB"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Free:"}),a.jsxs("span",{className:"font-mono font-bold",children:[(e.freeRAM/1024/1024).toFixed(0)," MB"]})]})]})]}),a.jsxs("div",{className:"border-2 border-green-200 p-2 bg-green-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-green-700 mb-1",children:"Paging"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Page Faults:"}),a.jsx("span",{className:"font-mono font-bold",children:e.pageFaults})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Page Hits:"}),a.jsx("span",{className:"font-mono font-bold",children:e.pageHits})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Fault Rate:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.pageFaultRate.toFixed(2),"%"]})]})]})]}),a.jsxs("div",{className:"border-2 border-yellow-200 p-2 bg-yellow-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-yellow-700 mb-1",children:"TLB"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Hits:"}),a.jsx("span",{className:"font-mono font-bold",children:e.tlbHits})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Misses:"}),a.jsx("span",{className:"font-mono font-bold",children:e.tlbMisses})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Hit Rate:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.tlbHitRate.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"border-2 border-purple-200 p-2 bg-purple-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-purple-700 mb-1",children:"Performance"}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{children:"Avg Access:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.avgAccessTime.toFixed(0),"ns"]})]})]})]})]})]})}function aC(){const e=He(c=>c.isRunning),t=He(c=>c.currentTick),n=He(c=>c.play),r=He(c=>c.pause),s=He(c=>c.reset),i=He(c=>c.tick),[o,l]=R.useState(500);return R.useEffect(()=>{if(e){const c=setInterval(()=>{i()},o);return()=>clearInterval(c)}},[e,o,i]),a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-4 flex flex-col gap-3 min-w-[300px]",children:[a.jsxs("div",{className:"flex items-center justify-between border-b-2 border-black pb-2",children:[a.jsx("span",{className:"font-comic text-lg",children:"Controls"}),a.jsxs("span",{className:"font-mono bg-black text-white px-2 py-1 text-sm",children:["Tick: ",t]})]}),a.jsxs("div",{className:"flex gap-2",children:[e?a.jsxs("button",{onClick:r,className:"flex-1 bg-yellow-400 text-black font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all flex items-center justify-center gap-2",children:[a.jsx(Cu,{size:20}),"Pause"]}):a.jsxs("button",{onClick:n,className:"flex-1 bg-green-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all flex items-center justify-center gap-2",children:[a.jsx(ca,{size:20,fill:"white"}),"Run"]}),a.jsx("button",{onClick:()=>{r(),i()},className:"bg-blue-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all",title:"Step",children:a.jsx(bp,{size:20})}),a.jsx("button",{onClick:s,className:"bg-red-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all",title:"Reset",children:a.jsx(ua,{size:20})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"font-bold text-xs uppercase text-gray-600 mb-1 block flex justify-between",children:[a.jsx("span",{children:"Speed"}),a.jsxs("span",{className:"bg-black text-white px-2",children:[o,"ms"]})]}),a.jsx("input",{type:"range",min:"100",max:"2000",step:"100",value:o,onChange:c=>l(parseInt(c.target.value)),className:"w-full h-3 bg-gray-200 rounded appearance-none cursor-pointer border-2 border-black"}),a.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mt-1",children:[a.jsx("span",{children:"Fast"}),a.jsx("span",{children:"Slow"})]})]})]})}const lC=[{id:"ram-1-intro",title:"First Virtual Memory System",difficulty:"beginner",estimatedTime:"5 min",module:"ram-simulator",objective:{description:"Set up basic virtual memory with paging",requirements:["Create page table","Map 4 virtual pages","Perform 10 memory accesses","Hit rate > 60%"]},constraints:{minComponents:3,allowedComponents:["page-table","physical-memory","mmu"],requiredMetrics:{memoryAccesses:{min:10},hitRate:{min:60}}},starRating:{3:{hitRate:{min:80}},2:{hitRate:{min:70}},1:{hitRate:{min:60}}},hints:["Page table maps virtual to physical","Each page is fixed size (4KB typical)","MMU translates addresses","TLB will help later"],tutorialSteps:["Drag Page Table component","Add Physical Memory","Connect MMU (Memory Management Unit)","Run simulation"],unlocks:"ram-2-tlb-intro"},{id:"ram-2-tlb-intro",title:"TLB Basics",difficulty:"beginner",estimatedTime:"7 min",module:"ram-simulator",objective:{description:"Add TLB to speed up address translation",requirements:["Add TLB component","Configure 16 entries","TLB hit rate > 85%"]},constraints:{minComponents:4,requiredComponents:["tlb"],allowedComponents:["page-table","physical-memory","mmu","tlb"],requiredMetrics:{tlbHitRate:{min:85}}},starRating:{3:{tlbHitRate:{min:95}},2:{tlbHitRate:{min:90}},1:{tlbHitRate:{min:85}}},hints:["TLB = Translation Lookaside Buffer","Caches page table entries","Fully associative is common","Locality improves hit rate"],unlocks:"ram-3-page-faults"},{id:"ram-3-page-faults",title:"Handling Page Faults",difficulty:"beginner",estimatedTime:"10 min",module:"ram-simulator",objective:{description:"Set up demand paging with page fault handling",requirements:["Limited physical memory (8 pages)","Handle 5 page faults","Page fault rate < 20%"]},constraints:{physicalPages:{max:8},requiredMetrics:{pageFaults:{min:5},pageFaultRate:{max:20}}},starRating:{3:{pageFaultRate:{max:10}},2:{pageFaultRate:{max:15}},1:{pageFaultRate:{max:20}}},hints:["Page fault = requested page not in memory","OS loads page from disk","Demand paging = load on-demand","Thrashing happens if too many faults"],unlocks:"ram-4-fifo"},{id:"ram-4-fifo",title:"FIFO Page Replacement",difficulty:"beginner",estimatedTime:"12 min",module:"ram-simulator",objective:{description:"Implement FIFO (First-In-First-Out) replacement",requirements:["Use FIFO algorithm","4 physical page frames","Process 20 page references","Page faults < 12"]},constraints:{physicalPages:4,replacementAlgorithm:"fifo",requiredMetrics:{pageReferences:{min:20},pageFaults:{max:12}}},starRating:{3:{pageFaults:{max:8}},2:{pageFaults:{max:10}},1:{pageFaults:{max:12}}},hints:["FIFO = replace oldest page","Simple but suffers from Belady's anomaly","Queue-based implementation","Not always optimal"],unlocks:"ram-5-lru"},{id:"ram-5-lru",title:"LRU Page Replacement",difficulty:"beginner",estimatedTime:"15 min",module:"ram-simulator",objective:{description:"Implement LRU (Least Recently Used) replacement",requirements:["Use LRU algorithm","4 physical frames","Same reference string as FIFO","Fewer page faults than FIFO"]},constraints:{physicalPages:4,replacementAlgorithm:"lru",requiredMetrics:{pageReferences:{min:20},pageFaults:{max:10}}},starRating:{3:{pageFaults:{max:6}},2:{pageFaults:{max:8}},1:{pageFaults:{max:10}}},hints:["LRU = replace least recently used","Better than FIFO in practice","Approximates optimal","Stack-based or timestamps"],unlocks:"ram-6-clock"},{id:"ram-6-clock",title:"Clock (Second Chance) Algorithm",difficulty:"intermediate",estimatedTime:"18 min",module:"ram-simulator",objective:{description:"Implement Clock algorithm (approximates LRU)",challenge:"Use reference bits efficiently!",requirements:["Implement Clock algorithm","Use reference bits","Page faults between FIFO and LRU"]},constraints:{physicalPages:4,replacementAlgorithm:"clock",requiredMetrics:{pageFaults:{max:11}}},starRating:{3:{pageFaults:{max:7}},2:{pageFaults:{max:9}},1:{pageFaults:{max:11}}},hints:["Also called Second Chance","Uses reference bit per page","Circular list (like clock hand)","Clear bit before eviction"],unlocks:"ram-7-multi-level"},{id:"ram-7-multi-level",title:"Multi-Level Page Tables",difficulty:"intermediate",estimatedTime:"20 min",module:"ram-simulator",objective:{description:"Implement 2-level page table for large address space",challenge:"Save memory with sparse addressing!",requirements:["Create 2-level page table","Support 32-bit virtual address","Memory overhead < 1MB"]},constraints:{requiredComponents:["page-directory","page-table-2nd-level"],requiredMetrics:{addressSpace:{min:4294967296},memoryOverhead:{max:1e6}}},starRating:{3:{memoryOverhead:{max:512e3}},2:{memoryOverhead:{max:75e4}},1:{memoryOverhead:{max:1e6}}},hints:["Divide virtual address into parts","Page directory points topage tables","Saves space for sparse memory","x86 uses this approach"],unlocks:"ram-8-inverted"},{id:"ram-8-inverted",title:"Inverted Page Table",difficulty:"intermediate",estimatedTime:"22 min",module:"ram-simulator",objective:{description:"Implement inverted page table (one entry per frame)",challenge:"Minimize table size!",requirements:["Create inverted page table","Hash table for lookups","Table size = # physical frames"]},constraints:{requiredComponents:["inverted-page-table","hash-anchor"],requiredMetrics:{lookupTime:{max:5},tableSize:{max:1024}}},starRating:{3:{lookupTime:{max:3}},2:{lookupTime:{max:4}},1:{lookupTime:{max:5}}},hints:["One entry per physical frame, not page","Saves memory for large address spaces","Hashing required for lookup","PowerPC uses this"],unlocks:"ram-9-working-set"},{id:"ram-9-working-set",title:"Working Set Model",difficulty:"intermediate",estimatedTime:"25 min",module:"ram-simulator",objective:{description:"Implement working set based memory management",challenge:"Prevent thrashing!",requirements:["Track working set size","Working set window = 10 references","Detect thrashing","Total page faults < 15"]},constraints:{requiredMetrics:{workingSetSize:{min:1},pageFaults:{max:15},thrashingDetected:!1}},starRating:{3:{pageFaults:{max:8},workingSetSize:{min:3}},2:{pageFaults:{max:12},workingSetSize:{min:2}},1:{pageFaults:{max:15},workingSetSize:{min:1}}},hints:["Working set = pages used recently","Defined by window ","Thrashing if WS > total frames","Suspend processes if thrashing"],unlocks:"ram-10-page-buffering"},{id:"ram-10-page-buffering",title:"Page Frame Buffering",difficulty:"intermediate",estimatedTime:"20 min",module:"ram-simulator",objective:{description:"Implement free and modified page buffers",challenge:"Reduce page fault latency!",requirements:["Free page buffer (5 frames)","Modified page buffer (5 frames)","Average page fault latency < 50ms"]},constraints:{requiredComponents:["free-buffer","modified-buffer"],requiredMetrics:{avgPageFaultLatency:{max:50}}},starRating:{3:{avgPageFaultLatency:{max:30}},2:{avgPageFaultLatency:{max:40}},1:{avgPageFaultLatency:{max:50}}},hints:["Keep pool of free frames ready","Write modified pages in background","Reduces I/O wait time","Unix uses this technique"],unlocks:"ram-11-segmentation"},{id:"ram-11-segmentation",title:"Segmentation",difficulty:"advanced",estimatedTime:"28 min",module:"ram-simulator",objective:{description:"Implement segmentation (code, data, stack segments)",challenge:"Logical memory protection!",requirements:["Create 3 segments (code, data, stack)","Segment table with base/limit","Protection bits (r/w/x)","Detect protection violations"]},constraints:{requiredComponents:["segment-table"],segmentCount:{min:3},requiredMetrics:{protectionViolations:{max:0}}},starRating:{3:{segmentCount:{min:5}},2:{segmentCount:{min:4}},1:{segmentCount:{min:3}}},hints:["Segment = logical memory unit","Each has base address and limit","Protection: read/write/execute","Intel x86 supports this"],unlocks:"ram-12-paged-segmentation"},{id:"ram-12-paged-segmentation",title:"Paged Segmentation",difficulty:"advanced",estimatedTime:"30 min",module:"ram-simulator",objective:{description:"Combine paging and segmentation",challenge:"Best of both worlds!",requirements:["Segment table","Page table per segment","Handle both segment and page faults","Total translation time < 100ns"]},constraints:{requiredComponents:["segment-table","page-table"],requiredMetrics:{translationTime:{max:100}}},starRating:{3:{translationTime:{max:60}},2:{translationTime:{max:80}},1:{translationTime:{max:100}}},hints:["Each segment is paged","Two-step translation","Combines advantages","Multics used this"],unlocks:"ram-13-huge-pages"},{id:"ram-13-huge-pages",title:"Huge Pages (2MB)",difficulty:"advanced",estimatedTime:"25 min",module:"ram-simulator",objective:{description:"Implement huge page support for large datasets",challenge:"Reduce TLB pressure!",requirements:["Support 4KB and 2MB pages","TLB with huge page entries","TLB coverage > 100MB","TLB miss rate < 1%"]},constraints:{requiredComponents:["tlb-huge"],pageSizes:[4096,2097152],requiredMetrics:{tlbCoverage:{min:1e8},tlbMissRate:{max:1}}},starRating:{3:{tlbMissRate:{max:.5},tlbCoverage:{min:2e8}},2:{tlbMissRate:{max:.75},tlbCoverage:{min:15e7}},1:{tlbMissRate:{max:1},tlbCoverage:{min:1e8}}},hints:["Huge pages reduce TLB entries needed","2MB page covers 512x more than 4KB","Less page table memory","Databases love huge pages"],unlocks:"ram-14-numa"},{id:"ram-14-numa",title:"NUMA Memory",difficulty:"advanced",estimatedTime:"35 min",module:"ram-simulator",objective:{description:"Build NUMA (Non-Uniform Memory Access) system",challenge:"Minimize remote memory access!",requirements:["2 NUMA nodes","Local and remote memory","Remote access latency > local","Local memory ratio > 80%"]},constraints:{numaNodes:{min:2},requiredMetrics:{localMemoryRatio:{min:80}}},starRating:{3:{localMemoryRatio:{min:95}},2:{localMemoryRatio:{min:90}},1:{localMemoryRatio:{min:80}}},hints:["Each CPU has local memory","Remote access slower","NUMA-aware allocation critical","Modern servers are NUMA"],unlocks:"ram-15-memory-compression"},{id:"ram-15-memory-compression",title:"Memory Compression",difficulty:"advanced",estimatedTime:"30 min",module:"ram-simulator",objective:{description:"Implement transparent memory compression",challenge:"Fit more in RAM!",requirements:["Add compression engine","Compress inactive pages","Compression ratio > 2:1","Decompression latency < 1s"]},constraints:{requiredComponents:["compression-engine"],requiredMetrics:{compressionRatio:{min:2},decompressionLatency:{max:1}}},starRating:{3:{compressionRatio:{min:3},decompressionLatency:{max:.5}},2:{compressionRatio:{min:2.5},decompressionLatency:{max:.75}},1:{compressionRatio:{min:2},decompressionLatency:{max:1}}},hints:["Compress cold pages","LZ4 is fast algorithm","Transparent to applications","macOS uses this"],unlocks:"ram-16-copy-on-write"},{id:"ram-16-copy-on-write",title:"Copy-on-Write (COW)",difficulty:"expert",estimatedTime:"35 min",module:"ram-simulator",objective:{description:"Implement COW for fork() system call",challenge:"Share pages until modification!",requirements:["Shared pages after fork","Copy pages on write","Write fault handling","Memory savings > 70%"]},constraints:{requiredMetrics:{memorySavings:{min:70},writeFaults:{min:1}}},starRating:{3:{memorySavings:{min:90}},2:{memorySavings:{min:80}},1:{memorySavings:{min:70}}},hints:["Share pages between parent/child","Mark pages read-only","Copy on first write","Unix fork uses COW"],unlocks:"ram-17-ksm"},{id:"ram-17-ksm",title:"Kernel Samepage Merging",difficulty:"expert",estimatedTime:"40 min",module:"ram-simulator",objective:{description:"Implement KSM to deduplicate identical pages",challenge:"Find and merge duplicate pages!",requirements:["Scan pages for duplicates","Merge identical pages","Handle writes to merged pages","Memory savings > 30%"]},constraints:{requiredComponents:["ksm-scanner"],requiredMetrics:{memorySavings:{min:30},duplicatesFound:{min:10}}},starRating:{3:{memorySavings:{min:50},duplicatesFound:{min:20}},2:{memorySavings:{min:40},duplicatesFound:{min:15}},1:{memorySavings:{min:30},duplicatesFound:{min:10}}},hints:["VMs often have identical pages","Hash pages to find duplicates","Use COW for merged pages","Linux KVM uses this"],unlocks:"ram-18-balloon"},{id:"ram-18-balloon",title:"Memory Ballooning",difficulty:"expert",estimatedTime:"40 min",module:"ram-simulator",objective:{description:"Implement VM memory ballooning",challenge:"Reclaim memory from VMs dynamically!",requirements:["Balloon driver in guest","Inflate to reclaim 20% memory","Deflate on demand","No guest performance drop > 10%"]},constraints:{requiredComponents:["balloon-driver"],requiredMetrics:{memoryReclaimed:{min:20},performanceDrop:{max:10}}},starRating:{3:{memoryReclaimed:{min:40},performanceDrop:{max:5}},2:{memoryReclaimed:{min:30},performanceDrop:{max:7}},1:{memoryReclaimed:{min:20},performanceDrop:{max:10}}},hints:["Balloon inflates to claim pages","Guest thinks it has less RAM","Hypervisor reclaims pages","VMware uses this"],unlocks:"ram-19-persistent-memory"},{id:"ram-19-persistent-memory",title:"Persistent Memory (PMEM)",difficulty:"expert",estimatedTime:"45 min",module:"ram-simulator",objective:{description:"Integrate persistent memory (Intel Optane)",challenge:"Byte-addressable persistent storage!",requirements:["Add PMEM device","DAX (Direct Access) mode","Flush/fence for durability","Persistent data structures"]},constraints:{requiredComponents:["pmem-device","dax-mapping"],requiredMetrics:{persistentOps:{min:100},flushLatency:{max:300}}},starRating:{3:{flushLatency:{max:200}},2:{flushLatency:{max:250}},1:{flushLatency:{max:300}}},hints:["PMEM = non-volatile + byte-addressable","DAX bypasses page cache","Need explicit flush/fence","Databases love PMEM"],unlocks:"ram-20-ultimate"},{id:"ram-20-ultimate",title:"The Ultimate Memory System",difficulty:"expert",estimatedTime:"60 min",module:"ram-simulator",objective:{description:"Build comprehensive modern memory system",challenge:"MASTER ALL MEMORY MANAGEMENT!",requirements:["Multi-level paging","TLB with huge pages","LRU page replacement","NUMA awareness","Memory compression","Copy-on-write","Page buffering"]},constraints:{minComponents:15,requiredComponents:["page-table","tlb-huge","lru-engine","numa-allocator","compression-engine","cow-handler","page-buffer"],requiredMetrics:{tlbHitRate:{min:95},pageFaultRate:{max:5},localMemoryRatio:{min:85},memoryUtilization:{min:90},compressionRatio:{min:2}}},starRating:{3:{tlbHitRate:{min:98},pageFaultRate:{max:2},localMemoryRatio:{min:95},memoryUtilization:{min:95},compressionRatio:{min:3},hint:" PERFECT! Memory wizard!"},2:{tlbHitRate:{min:96},pageFaultRate:{max:3},localMemoryRatio:{min:90},memoryUtilization:{min:92},compressionRatio:{min:2.5},hint:" Excellent! Nearly perfect!"},1:{tlbHitRate:{min:95},pageFaultRate:{max:5},localMemoryRatio:{min:85},memoryUtilization:{min:90},compressionRatio:{min:2},hint:" Great! All systems go!"}},hints:["Integrate all techniques","Balance performance and overhead","Real OS does all of this","You are a memory expert now!"],unlocks:null}];function cC(){const[e,t]=N.useState("level-select"),[n,r]=N.useState(null),[s,i]=N.useState(null),{updateLevelProgress:o,unlockLevel:l}=wn(),c=m=>{r(m),t("playing"),i(null)},u=()=>{r(null),t("sandbox"),i(null)},d=()=>{t("level-select"),r(null),i(null)},f=()=>{if(!n)return;const m=new fa(n),g={metrics:{},components:[],running:!1},v=m.validate(g);i(v),v.passed&&(o("ram-simulator",n.id,{completed:!0,stars:v.stars,attempts:1,bestTime:v.completionTime||0}),n.unlocks&&l(n.unlocks))};return e==="level-select"?a.jsx(ma,{levels:lC,moduleTitle:"MEMORY MASTER",moduleSubtitle:"Conquer Virtual Memory!",onSelectLevel:c,onSandboxMode:u,onBack:()=>window.location.reload()}):a.jsxs("div",{className:"w-full h-screen flex flex-col bg-comic-cream relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-5 pointer-events-none z-0"}),a.jsxs("div",{className:"bg-comic-yellow border-b-4 border-black px-6 py-2 flex items-center justify-between shadow-md z-30 relative",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white border-3 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold",children:[a.jsx(oa,{size:20,className:"stroke-[3]"}),e==="sandbox"?"BACK":"EXIT LEVEL"]}),n&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ui,{className:"stroke-[3]",size:28}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-comic text-xl font-bold uppercase tracking-wide",children:n.title}),a.jsxs("p",{className:"text-sm font-comic uppercase tracking-wide",children:[n.difficulty,"  ",n.estimatedTime]})]})]}),e==="sandbox"&&a.jsx("h2",{className:"font-comic text-2xl font-bold uppercase tracking-wider",children:" SANDBOX MODE"})]}),n&&a.jsx("button",{onClick:f,className:"px-6 py-3 bg-comic-blue text-white border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-lg uppercase",children:" Check Solution"})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[a.jsx("div",{className:"z-20 h-full relative",children:a.jsx(QS,{})}),a.jsxs("div",{className:"flex-1 flex flex-col relative",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(iC,{}),n&&a.jsx(ha,{level:n,validationResult:s}),a.jsx("div",{className:"absolute top-32 right-4 z-40",children:a.jsx(oC,{})})]}),a.jsx("div",{className:"absolute bottom-8 left-[40%] transform -translate-x-1/2 z-50",children:a.jsx(aC,{})})]})]})]})}function uC(){const e=(t,n,r)=>{t.dataTransfer.setData("application/reactflow",n),t.dataTransfer.setData("application/label",r),t.dataTransfer.effectAllowed="move"};return a.jsxs("div",{className:"w-48 bg-comic-cream border-r-4 border-black p-4 overflow-y-auto h-full",children:[a.jsx("h2",{className:"font-comic text-2xl mb-4 bg-comic-yellow border-4 border-black p-2 text-center transform -rotate-1",children:"Devices"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-red-400 text-white px-2 py-1 border-2 border-black",children:"SENSORS"}),a.jsxs("div",{className:"bg-red-400 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"temperature","Temperature"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Temperature"}),a.jsx("div",{className:"text-[10px]",children:"Temp Sensor"})]}),a.jsxs("div",{className:"bg-blue-400 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"humidity","Humidity"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Humidity"}),a.jsx("div",{className:"text-[10px]",children:"Humidity Sensor"})]}),a.jsxs("div",{className:"bg-purple-500 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"motion","Motion"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Motion"}),a.jsx("div",{className:"text-[10px]",children:"Motion Sensor"})]}),a.jsxs("div",{className:"bg-yellow-300 text-black border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"light","Light"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Light"}),a.jsx("div",{className:"text-[10px]",children:"Light Sensor"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-comic text-sm mb-2 bg-green-500 text-white px-2 py-1 border-2 border-black",children:"INFRASTRUCTURE"}),a.jsxs("div",{className:"bg-green-500 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"gateway","Gateway"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Gateway"}),a.jsx("div",{className:"text-[10px]",children:"MQTT Broker"})]}),a.jsxs("div",{className:"bg-indigo-600 text-white border-4 border-black mb-2 p-3 cursor-grab hover:shadow-comic-lg transition-all active:cursor-grabbing",draggable:!0,onDragStart:t=>e(t,"cloud","Cloud"),children:[a.jsx("div",{className:"font-bold text-xs uppercase",children:" Cloud"}),a.jsx("div",{className:"text-[10px]",children:"Server"})]})]})]})}const Yr=({children:e,className:t,label:n,icon:r,selected:s})=>a.jsxs("div",{className:`w-32 border-4 border-black shadow-comic transform transition-all ${s?"scale-110":""} ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-2 p-1 border-b-4 border-black bg-white/90",children:[a.jsx(r,{size:12}),a.jsx("div",{className:"font-comic text-[10px] uppercase",children:n})]}),e]}),Ra=({percentage:e})=>{const t=e>50?"bg-green-500":e>20?"bg-yellow-400":"bg-red-500";return a.jsx("div",{className:"w-full h-2 bg-gray-200 border border-black mt-1",children:a.jsx("div",{className:`h-full ${t}`,style:{width:`${e}%`}})})},dC=N.memo(({id:e,data:t,selected:n})=>{const r=t?.battery||100,s=t?.state||"ACTIVE";return a.jsxs(Yr,{label:"Temp Sensor",icon:Sv,className:"bg-red-400 text-white",selected:n,children:[a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsxs("div",{className:"font-bold",children:[t?.lastReading?.value?.toFixed(1)||"--","C"]}),a.jsxs("div",{className:"text-[9px]",children:["State: ",s]}),a.jsxs("div",{className:"text-[9px]",children:["Batt: ",r.toFixed(0),"%"]}),a.jsx(Ra,{percentage:r})]})]})}),fC=N.memo(({id:e,data:t,selected:n})=>{const r=t?.battery||100,s=t?.state||"ACTIVE";return a.jsxs(Yr,{label:"Humidity",icon:hv,className:"bg-blue-400 text-white",selected:n,children:[a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsxs("div",{className:"font-bold",children:[t?.lastReading?.value?.toFixed(0)||"--","%"]}),a.jsxs("div",{className:"text-[9px]",children:["State: ",s]}),a.jsxs("div",{className:"text-[9px]",children:["Batt: ",r.toFixed(0),"%"]}),a.jsx(Ra,{percentage:r})]})]})}),mC=N.memo(({id:e,data:t,selected:n})=>{const r=t?.battery||100,s=t?.state||"ACTIVE",i=t?.lastReading?.value||0;return a.jsxs(Yr,{label:"Motion",icon:pv,className:"bg-purple-500 text-white",selected:n,children:[a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsx("div",{className:"font-bold",children:i?" Detected":" None"}),a.jsxs("div",{className:"text-[9px]",children:["State: ",s]}),a.jsxs("div",{className:"text-[9px]",children:["Batt: ",r.toFixed(0),"%"]}),a.jsx(Ra,{percentage:r})]})]})}),hC=N.memo(({id:e,data:t,selected:n})=>{const r=t?.battery||100,s=t?.state||"ACTIVE";return a.jsxs(Yr,{label:"Light",icon:xv,className:"bg-yellow-300 text-black",selected:n,children:[a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsxs("div",{className:"font-bold",children:[t?.lastReading?.value?.toFixed(0)||"--"," lux"]}),a.jsxs("div",{className:"text-[9px]",children:["State: ",s]}),a.jsxs("div",{className:"text-[9px]",children:["Batt: ",r.toFixed(0),"%"]}),a.jsx(Ra,{percentage:r})]})]})}),pC=N.memo(({id:e,data:t,selected:n})=>{const r=t?.connected||0,s=t?.protocol||"MQTT";return a.jsxs(Yr,{label:"Gateway",icon:Eu,className:"bg-green-500 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsx(X,{type:"source",position:O.Right,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsx("div",{className:"font-bold",children:s}),a.jsxs("div",{className:"text-[9px]",children:["Devices: ",r]}),a.jsxs("div",{className:"text-[9px]",children:["Msgs: ",t?.messages||0]}),a.jsxs("div",{className:"text-[9px]",children:["Util: ",t?.utilization?.toFixed(1)||0,"%"]})]})]})}),gC=N.memo(({id:e,data:t,selected:n})=>a.jsxs(Yr,{label:"Cloud",icon:mv,className:"bg-indigo-600 text-white",selected:n,children:[a.jsx(X,{type:"target",position:O.Left,className:"w-3 h-3 bg-black border-2 border-white"}),a.jsxs("div",{className:"text-xs bg-white text-black p-2",children:[a.jsx("div",{className:"font-bold",children:" Server"}),a.jsxs("div",{className:"text-[9px]",children:["Messages: ",t?.messages||0]}),a.jsxs("div",{className:"text-[9px]",children:["Storage: ",t?.storage?.toFixed(2)||0," GB"]})]})]}));class yC{constructor(t,n,r={}){this.id=t,this.type=n,this.readingInterval=r.interval||60,this.batteryCapacity=r.battery||3e3,this.currentBattery=this.batteryCapacity,this.powerConsumption=r.power||50,this.transmitPower=r.transmitPower||100,this.range=r.range||100,this.position=r.position||{x:0,y:0},this.state="ACTIVE",this.lastReading=null,this.readingsCount=0,this.transmissionsCount=0,this.lastTransmitTime=0}tick(t){if(this.state==="DEAD")return null;const r=(this.state==="ACTIVE"?this.powerConsumption:this.powerConsumption*.1)/1e3*(t/3600);return this.currentBattery-=r,this.currentBattery<=0?(this.state="DEAD",this.currentBattery=0,null):(this.lastTransmitTime+=t,this.lastTransmitTime>=this.readingInterval&&this.state==="ACTIVE"?(this.lastTransmitTime=0,this.lastReading=this.generateReading(),this.readingsCount++,this.lastReading):null)}generateReading(){const t={temperature:{value:20+Math.random()*15,unit:"C",icon:""},humidity:{value:40+Math.random()*40,unit:"%",icon:""},motion:{value:Math.random()>.7?1:0,unit:"detected",icon:""},light:{value:Math.random()*1e3,unit:"lux",icon:""}};return{sensorId:this.id,type:this.type,timestamp:Date.now(),...t[this.type]}}transmit(t){if(this.state==="DEAD"||Math.sqrt(Math.pow(t.position.x-this.position.x,2)+Math.pow(t.position.y-this.position.y,2))>this.range)return!1;const r=this.transmitPower/1e3*(.1/3600);return this.currentBattery-=r,this.transmissionsCount++,!0}getBatteryPercentage(){return this.currentBattery/this.batteryCapacity*100}getEstimatedLifetime(){if(this.state==="DEAD")return 0;const t=this.powerConsumption*.7;return this.currentBattery/(t/1e3)/24}}class xC{constructor(t,n={}){this.id=t,this.protocol=n.protocol||"MQTT",this.maxDevices=n.maxDevices||50,this.processingPower=n.cpu||1e3,this.bufferSize=n.buffer||1024,this.currentBuffer=0,this.uplinkBandwidth=n.uplink||1e3,this.position=n.position||{x:0,y:0},this.connectedDevices=new Set,this.messagesReceived=0,this.messagesForwarded=0,this.droppedMessages=0,this.messageQueue=[]}receiveMessage(t){this.messagesReceived++;const n=t.size||.1;return this.currentBuffer+n>this.bufferSize?(this.droppedMessages++,!1):(this.currentBuffer+=n,this.messageQueue.push(t),!0)}tick(t){const r=this.uplinkBandwidth/8*t;let s=0;for(;this.messageQueue.length>0&&s<r;){const o=this.messageQueue.shift().size||.1;s+=o,this.currentBuffer-=o,this.messagesForwarded++}}connectDevice(t){return this.connectedDevices.size<this.maxDevices?(this.connectedDevices.add(t),!0):!1}getUtilization(){return this.currentBuffer/this.bufferSize*100}getConnectedCount(){return this.connectedDevices.size}}class vC{constructor(t,n={}){this.id=t,this.storageCapacity=n.storage||1e4,this.currentStorage=0,this.messagesReceived=0,this.dataPoints=[]}receiveMessage(t){this.messagesReceived++;const n=(t.size||.1)/1024/1024;this.currentStorage+=n,this.dataPoints.push({timestamp:Date.now(),source:t.source,type:t.payload?.type,value:t.payload?.value}),this.dataPoints.length>1e3&&this.dataPoints.shift()}getStoragePercentage(){return this.currentStorage/this.storageCapacity*100}}class wC{constructor(t,n,r,s="MQTT"){this.id=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.source=t,this.destination=n,this.payload=r,this.protocol=s,this.timestamp=Date.now(),this.hops=0,this.delivered=!1,this.size=this.calculateSize()}calculateSize(){return JSON.stringify(this.payload).length/1024+({MQTT:.02,CoAP:.01,HTTP:.1}[this.protocol]||.02)}}const Mt=di((e,t)=>({currentTime:0,isRunning:!1,timeScale:1,sensors:[],gateways:[],cloud:null,activeMessages:[],metrics:{totalDevices:0,activeDevices:0,deadDevices:0,messagesGenerated:0,messagesDelivered:0,messagesDropped:0,deliveryRate:100,avgBatteryLevel:100,totalPowerConsumed:0,estimatedLifetime:0,avgLatency:0,throughput:0,networkUtilization:0,uptime:100,packetLoss:0},initializeCloud:()=>{const n=new vC("cloud-1",{storage:1e4});e({cloud:n})},addSensor:(n,r)=>{const s=`sensor_${n}_${Date.now()}`,i=new yC(s,n,{interval:60,battery:3e3,power:50,transmitPower:100,range:150,position:r});e(o=>({sensors:[...o.sensors,i],metrics:{...o.metrics,totalDevices:o.metrics.totalDevices+1,activeDevices:o.metrics.activeDevices+1}}))},addGateway:(n,r)=>{const s=`gateway_${n}_${Date.now()}`,i=new xC(s,{protocol:n,maxDevices:50,buffer:1024,uplink:1e3,position:r});e(o=>({gateways:[...o.gateways,i]}))},play:()=>e({isRunning:!0}),pause:()=>e({isRunning:!1}),reset:()=>e({currentTime:0,isRunning:!1,sensors:[],gateways:[],activeMessages:[],metrics:{totalDevices:0,activeDevices:0,deadDevices:0,messagesGenerated:0,messagesDelivered:0,messagesDropped:0,deliveryRate:100,avgBatteryLevel:100,totalPowerConsumed:0,estimatedLifetime:0,avgLatency:0,throughput:0,networkUtilization:0,uptime:100,packetLoss:0}}),tick:()=>{if(!t().isRunning)return;const n=t(),r=n.timeScale,s=[];n.sensors.forEach(m=>{const g=m.tick(r);if(g&&n.gateways.length>0){const v=n.gateways[0];if(m.transmit(v)){const y=new wC(m.id,v.id,g,v.protocol);s.push(y),v.receiveMessage(y)}}}),n.gateways.forEach(m=>{m.tick(r),n.cloud&&m.messagesForwarded>0&&n.cloud.receiveMessage({source:m.id,size:.1,payload:{}})});const i=n.sensors.filter(m=>m.state==="ACTIVE"||m.state==="SLEEP").length,o=n.sensors.filter(m=>m.state==="DEAD").length,l=n.sensors.reduce((m,g)=>m+g.getBatteryPercentage(),0)/(n.sensors.length||1),c=n.sensors.reduce((m,g)=>m+g.readingsCount,0),u=n.gateways.reduce((m,g)=>m+g.messagesForwarded,0),d=n.gateways.reduce((m,g)=>m+g.droppedMessages,0),f=c>0?u/c*100:100;e({currentTime:n.currentTime+r,activeMessages:[...n.activeMessages,...s].slice(-50),metrics:{...n.metrics,activeDevices:i,deadDevices:o,avgBatteryLevel:l,messagesGenerated:c,messagesDelivered:u,messagesDropped:d,deliveryRate:f,packetLoss:c>0?d/c*100:0,throughput:u/Math.max(n.currentTime,1)}})}})),bC=[],kC=[];function NC(){const[e,t,n]=ka(bC),[r,s,i]=Na(kC),o=Mt(g=>g.addSensor),l=Mt(g=>g.addGateway),c=Mt(g=>g.initializeCloud),u=N.useMemo(()=>({temperature:dC,humidity:fC,motion:mC,light:hC,gateway:pC,cloud:gC}),[]),d=N.useCallback(g=>s(v=>pi({...g,animated:!0,style:{stroke:"#22c55e",strokeWidth:3},type:"smoothstep"},v)),[s]),f=N.useCallback(g=>{g.preventDefault(),g.dataTransfer.dropEffect="move"},[]),m=N.useCallback(g=>{g.preventDefault();const v=g.dataTransfer.getData("application/reactflow"),y=g.dataTransfer.getData("application/label");if(!v)return;const k=g.target.getBoundingClientRect(),h={x:g.clientX-k.left-65,y:g.clientY-k.top-40},p={id:`${v}_${Date.now()}`,type:v,position:h,data:{label:y,battery:100,state:"ACTIVE"}};t(x=>[...x,p]),v==="temperature"||v==="humidity"||v==="motion"||v==="light"?o(v,h):v==="gateway"?l("MQTT",h):v==="cloud"&&c()},[t,o,l,c]);return a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-50 to-blue-50",children:a.jsxs(yi,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:i,onConnect:d,onDrop:m,onDragOver:f,nodeTypes:u,fitView:!0,children:[a.jsx(Ea,{color:"#aaa",gap:16}),a.jsx(Ca,{}),a.jsx(Sa,{nodeColor:g=>({temperature:"#f87171",humidity:"#60a5fa",motion:"#a78bfa",light:"#fbbf24",gateway:"#22c55e",cloud:"#4f46e5"})[g.type]||"#999",style:{background:"#f3f4f6",border:"2px solid black"}})]})})}function SC(){return a.jsx(Gr,{children:a.jsx(NC,{})})}function CC(){const e=Mt(r=>r.metrics),[t,n]=R.useState(!1);return a.jsxs("div",{className:"absolute top-6 right-6 z-40",children:[!t&&a.jsxs("button",{onClick:()=>n(!0),className:"bg-green-500 text-white px-4 py-3 border-4 border-black shadow-comic font-comic hover:shadow-none hover:translate-y-1 transition-all flex items-center gap-2",children:[a.jsx(ia,{size:20}),"METRICS"]}),t&&a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-3 w-64",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-black pb-1",children:[a.jsx("h3",{className:"font-comic text-lg bg-green-500 text-white px-2",children:"Metrics"}),a.jsx("button",{onClick:()=>n(!1),className:"w-6 h-6 bg-black text-white font-bold hover:bg-gray-800",children:""})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-2 border-green-200 p-2 bg-green-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-green-700 mb-1",children:"Network"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Active:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.activeDevices,"/",e.totalDevices]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Dead:"}),a.jsx("span",{className:"font-mono font-bold text-red-600",children:e.deadDevices})]})]})]}),a.jsxs("div",{className:"border-2 border-blue-200 p-2 bg-blue-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-blue-700 mb-1",children:"Data Flow"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Generated:"}),a.jsx("span",{className:"font-mono font-bold",children:e.messagesGenerated})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Delivered:"}),a.jsx("span",{className:"font-mono font-bold",children:e.messagesDelivered})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Delivery Rate:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.deliveryRate.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"border-2 border-yellow-200 p-2 bg-yellow-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-yellow-700 mb-1",children:"Power"}),a.jsx("div",{className:"space-y-1 text-xs",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Avg Battery:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.avgBatteryLevel.toFixed(1),"%"]})]})})]}),a.jsxs("div",{className:"border-2 border-purple-200 p-2 bg-purple-50",children:[a.jsx("div",{className:"font-bold text-xs uppercase text-purple-700 mb-1",children:"Performance"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Throughput:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.throughput.toFixed(2)," msg/s"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Packet Loss:"}),a.jsxs("span",{className:"font-mono font-bold",children:[e.packetLoss.toFixed(2),"%"]})]})]})]})]})]})]})}function EC(){const e=Mt(u=>u.isRunning),t=Mt(u=>u.currentTime),n=Mt(u=>u.play),r=Mt(u=>u.pause),s=Mt(u=>u.reset),i=Mt(u=>u.tick),[o,l]=R.useState(1e3);R.useEffect(()=>{if(e){const u=setInterval(()=>{i()},o);return()=>clearInterval(u)}},[e,o,i]);const c=u=>{const d=Math.floor(u/60),f=Math.floor(u%60);return`${d}:${f.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"bg-white border-4 border-black shadow-comic p-4 flex flex-col gap-3 min-w-[300px]",children:[a.jsxs("div",{className:"flex items-center justify-between border-b-2 border-black pb-2",children:[a.jsx("span",{className:"font-comic text-lg",children:"Controls"}),a.jsxs("span",{className:"font-mono bg-black text-white px-2 py-1 text-sm",children:["Time: ",c(t)]})]}),a.jsxs("div",{className:"flex gap-2",children:[e?a.jsxs("button",{onClick:r,className:"flex-1 bg-yellow-400 text-black font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all flex items-center justify-center gap-2",children:[a.jsx(Cu,{size:20}),"Pause"]}):a.jsxs("button",{onClick:n,className:"flex-1 bg-green-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all flex items-center justify-center gap-2",children:[a.jsx(ca,{size:20,fill:"white"}),"Run"]}),a.jsx("button",{onClick:()=>{r(),i()},className:"bg-blue-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all",title:"Step",children:a.jsx(bp,{size:20})}),a.jsx("button",{onClick:s,className:"bg-red-500 text-white font-bold py-2 px-4 border-4 border-black shadow-comic hover:translate-y-1 hover:shadow-none transition-all",title:"Reset",children:a.jsx(ua,{size:20})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"font-bold text-xs uppercase text-gray-600 mb-1 block flex justify-between",children:[a.jsx("span",{children:"Speed"}),a.jsxs("span",{className:"bg-black text-white px-2",children:[o,"ms"]})]}),a.jsx("input",{type:"range",min:"100",max:"2000",step:"100",value:o,onChange:u=>l(parseInt(u.target.value)),className:"w-full h-3 bg-gray-200 rounded appearance-none cursor-pointer border-2 border-black"}),a.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mt-1",children:[a.jsx("span",{children:"Fast"}),a.jsx("span",{children:"Slow"})]})]})]})}const jC=[{id:"iot-1-first-sensor",title:"First Sensor Network",difficulty:"beginner",estimatedTime:"5 min",module:"iot-network",objective:{description:"Deploy your first IoT sensor network",requirements:["Add 3 temperature sensors","Add 1 gateway","Connect sensors to gateway","Collect 100 readings"]},constraints:{minComponents:4,allowedComponents:["temp-sensor","gateway","mqtt-broker"],requiredMetrics:{readingsCollected:{min:100}}},starRating:{3:{deliveryRate:{min:98}},2:{deliveryRate:{min:95}},1:{readingsCollected:{min:100}}},hints:["Temperature sensors measure ambient temp","Gateway aggregates sensor data","Wireless communication","Check battery levels"],tutorialSteps:["Drag 3 temperature sensors","Add a gateway node","Connect sensors to gateway","Press play to collect data","Watch readings accumulate"],unlocks:"iot-2-mqtt"},{id:"iot-2-mqtt",title:"MQTT Protocol Basics",difficulty:"beginner",estimatedTime:"7 min",module:"iot-network",objective:{description:"Set up MQTT pub/sub communication",requirements:["Add MQTT broker","Sensors publish to topics","Gateway subscribes","Message delivery rate > 95%"]},constraints:{minComponents:5,requiredComponents:["mqtt-broker"],requiredMetrics:{deliveryRate:{min:95}}},starRating:{3:{deliveryRate:{min:99}},2:{deliveryRate:{min:97}},1:{deliveryRate:{min:95}}},hints:["MQTT = lightweight pub/sub protocol","Broker handles message routing","Topics organize messages","QoS levels affect reliability"],unlocks:"iot-3-battery-life"},{id:"iot-3-battery-life",title:"Battery Life Optimization",difficulty:"beginner",estimatedTime:"10 min",module:"iot-network",objective:{description:"Maximize sensor battery life",challenge:"Keep sensors alive!",requirements:["Use sleep mode","Reduce transmission frequency","Battery life > 7 days","Still collect 50+ readings/day"]},constraints:{requiredMetrics:{batteryLifeDays:{min:7},readingsPerDay:{min:50}}},starRating:{3:{batteryLifeDays:{min:30}},2:{batteryLifeDays:{min:14}},1:{batteryLifeDays:{min:7}}},hints:["Sleep mode saves power","Duty cycle = active time ratio","Transmission is most power-hungry","Aggregate before sending"],unlocks:"iot-4-multiple-sensors"},{id:"iot-4-multiple-sensors",title:"Multi-Sensor Network",difficulty:"beginner",estimatedTime:"12 min",module:"iot-network",objective:{description:"Deploy network with multiple sensor types",requirements:["Add temperature, humidity, and light sensors","Each type on separate MQTT topic","Collect 50 readings per sensor type","Network uptime > 90%"]},constraints:{minComponents:8,sensorTypes:["temp-sensor","humidity-sensor","light-sensor"],requiredMetrics:{networkUptime:{min:90},readingsPerType:{min:50}}},starRating:{3:{networkUptime:{min:98},readingsPerType:{min:100}},2:{networkUptime:{min:95},readingsPerType:{min:75}},1:{networkUptime:{min:90},readingsPerType:{min:50}}},hints:["Different sensors, different topics","Temperature: /sensors/temp","Humidity: /sensors/humidity","Light: /sensors/light"],unlocks:"iot-5-mesh-network"},{id:"iot-5-mesh-network",title:"Mesh Network Topology",difficulty:"beginner",estimatedTime:"15 min",module:"iot-network",objective:{description:"Build mesh network for redundancy",challenge:"Self-healing network!",requirements:["6 sensors in mesh topology","Multiple paths to gateway","Handle 1 node failure","Delivery rate > 90%"]},constraints:{minComponents:7,topology:"mesh",requiredMetrics:{deliveryRate:{min:90},pathRedundancy:{min:2}}},starRating:{3:{deliveryRate:{min:95},nodeFailuresTolerated:{min:2}},2:{deliveryRate:{min:92},nodeFailuresTolerated:{min:1}},1:{deliveryRate:{min:90},nodeFailuresTolerated:{min:1}}},hints:["Mesh = nodes relay for each other","Multiple routes increase reliability","Zigbee uses mesh","More hops = more latency"],unlocks:"iot-6-data-aggregation"},{id:"iot-6-data-aggregation",title:"Edge Data Aggregation",difficulty:"intermediate",estimatedTime:"18 min",module:"iot-network",objective:{description:"Aggregate data at edge before cloud upload",challenge:"Reduce bandwidth usage!",requirements:["Add edge aggregator node","Compute averages locally","Bandwidth reduction > 70%","Data quality maintained"]},constraints:{minComponents:8,requiredComponents:["edge-aggregator"],requiredMetrics:{bandwidthReduction:{min:70},dataAccuracy:{min:95}}},starRating:{3:{bandwidthReduction:{min:90},dataAccuracy:{min:99}},2:{bandwidthReduction:{min:80},dataAccuracy:{min:97}},1:{bandwidthReduction:{min:70},dataAccuracy:{min:95}}},hints:["Edge computing = process at source","Send summaries, not raw data","Average, min, max, count","Reduces cloud costs"],unlocks:"iot-7-qos"},{id:"iot-7-qos",title:"MQTT Quality of Service",difficulty:"intermediate",estimatedTime:"20 min",module:"iot-network",objective:{description:"Implement MQTT QoS levels correctly",challenge:"Balance reliability and overhead!",requirements:["Critical alerts: QoS 2 (exactly once)","Regular data: QoS 1 (at least once)","Status updates: QoS 0 (at most once)","Zero critical message loss"]},constraints:{requiredMetrics:{qos2Delivery:{min:100},qos1Delivery:{min:98},networkOverhead:{max:30}}},starRating:{3:{networkOverhead:{max:20}},2:{networkOverhead:{max:25}},1:{networkOverhead:{max:30}}},hints:["QoS 0: Fire and forget","QoS 1: At least once (ACK)","QoS 2: Exactly once (handshake)","Higher QoS = more overhead"],unlocks:"iot-8-lorawan"},{id:"iot-8-lorawan",title:"LoRaWAN Long Range",difficulty:"intermediate",estimatedTime:"22 min",module:"iot-network",objective:{description:"Deploy LoRaWAN for long-range communication",challenge:"Cover 5km radius!",requirements:["Add LoRa gateway","LoRa sensors (low data rate)","Communication range > 5km","Battery life > 6 months"]},constraints:{requiredComponents:["lora-gateway","lora-sensor"],requiredMetrics:{communicationRange:{min:5e3},batteryLifeDays:{min:180}}},starRating:{3:{communicationRange:{min:1e4},batteryLifeDays:{min:365}},2:{communicationRange:{min:7e3},batteryLifeDays:{min:270}},1:{communicationRange:{min:5e3},batteryLifeDays:{min:180}}},hints:["LoRa = Long Range, low power","Sub-GHz frequencies","Spread spectrum modulation","Good for rural deployments"],unlocks:"iot-9-nbiot"},{id:"iot-9-nbiot",title:"NB-IoT Cellular",difficulty:"intermediate",estimatedTime:"25 min",module:"iot-network",objective:{description:"Use NB-IoT (Narrowband IoT) cellular network",challenge:"Deep indoor penetration!",requirements:["Add NB-IoT module","Connect to cellular network","Indoor coverage > 90%","Power consumption < 5mW idle"]},constraints:{requiredComponents:["nbiot-module"],requiredMetrics:{indoorCoverage:{min:90},idlePower:{max:5}}},starRating:{3:{indoorCoverage:{min:98},idlePower:{max:3}},2:{indoorCoverage:{min:95},idlePower:{max:4}},1:{indoorCoverage:{min:90},idlePower:{max:5}}},hints:["NB-IoT uses existing cellular infra","Great penetration through walls","Licensed spectrum","PSM mode for power saving"],unlocks:"iot-10-security"},{id:"iot-10-security",title:"IoT Security Basics",difficulty:"intermediate",estimatedTime:"25 min",module:"iot-network",objective:{description:"Secure IoT network with encryption and auth",challenge:"Prevent unauthorized access!",requirements:["Enable TLS/SSL encryption","Add device authentication","Detect intrusion attempts","Zero successful attacks"]},constraints:{requiredComponents:["security-module"],requiredMetrics:{encryptedTraffic:{min:100},successfulAttacks:{max:0},authFailures:{min:1}}},starRating:{3:{encryptionStrength:{min:256}},2:{encryptionStrength:{min:128}},1:{successfulAttacks:{max:0}}},hints:["MQTT over TLS = MQTTS","Certificate-based auth","Anomaly detection","Update certificates regularly"],unlocks:"iot-11-edge-ai"},{id:"iot-11-edge-ai",title:"Edge AI Inference",difficulty:"advanced",estimatedTime:"30 min",module:"iot-network",objective:{description:"Run ML model inference at the edge",challenge:"Classify data locally!",requirements:["Add edge AI processor","Deploy classification model","Local inference accuracy > 90%","Latency < 100ms"]},constraints:{requiredComponents:["edge-ai-processor"],requiredMetrics:{inferenceAccuracy:{min:90},inferenceLatency:{max:100}}},starRating:{3:{inferenceAccuracy:{min:95},inferenceLatency:{max:50}},2:{inferenceAccuracy:{min:92},inferenceLatency:{max:75}},1:{inferenceAccuracy:{min:90},inferenceLatency:{max:100}}},hints:["TinyML for edge devices","Quantized models","TensorFlow Lite","Classify anomalies locally"],unlocks:"iot-12-digital-twin"},{id:"iot-12-digital-twin",title:"Digital Twin",difficulty:"advanced",estimatedTime:"35 min",module:"iot-network",objective:{description:"Create digital twin of physical IoT device",challenge:"Virtual mirror of reality!",requirements:["Add digital twin service","Real-time state synchronization","Predictive maintenance alerts","Sync latency < 5 seconds"]},constraints:{requiredComponents:["digital-twin-service"],requiredMetrics:{syncLatency:{max:5},stateAccuracy:{min:95},predictiveAlerts:{min:3}}},starRating:{3:{syncLatency:{max:2},stateAccuracy:{min:99}},2:{syncLatency:{max:3},stateAccuracy:{min:97}},1:{syncLatency:{max:5},stateAccuracy:{min:95}}},hints:["Digital twin = virtual replica","Cloud-based simulation","Predict failures before they happen","Azure Digital Twins, AWS IoT TwinMaker"],unlocks:"iot-13-swarm"},{id:"iot-13-swarm",title:"Swarm Intelligence",difficulty:"advanced",estimatedTime:"40 min",module:"iot-network",objective:{description:"Coordinate swarm of IoT devices",challenge:"Emergent collective behavior!",requirements:["20+ autonomous devices","Swarm coordination algorithm","Task completion via collaboration","No central controller"]},constraints:{minComponents:20,topology:"decentralized",requiredMetrics:{taskCompletion:{min:95},coordinationOverhead:{max:15}}},starRating:{3:{taskCompletion:{min:99},coordinationOverhead:{max:10}},2:{taskCompletion:{min:97},coordinationOverhead:{max:12}},1:{taskCompletion:{min:95},coordinationOverhead:{max:15}}},hints:["Swarm = collective intelligence","Boid algorithm for flocking","Ant colony optimization","Drones often use swarm"],unlocks:"iot-14-5g"},{id:"iot-14-5g",title:"5G IoT Network Slicing",difficulty:"advanced",estimatedTime:"35 min",module:"iot-network",objective:{description:"5G network slicing for different IoT use cases",challenge:"Tailor network for each app!",requirements:["Create 3 network slices","Ultra-reliable slice (99.999% uptime)","Low-latency slice (<10ms)","Massive IoT slice (10000+ devices)"]},constraints:{requiredComponents:["5g-network-slicer"],sliceCount:{min:3},requiredMetrics:{urlllcUptime:{min:99.999},urlllcLatency:{max:10},massiveIoTCapacity:{min:1e4}}},starRating:{3:{urlllcLatency:{max:5},massiveIoTCapacity:{min:2e4}},2:{urlllcLatency:{max:7},massiveIoTCapacity:{min:15e3}},1:{urlllcLatency:{max:10},massiveIoTCapacity:{min:1e4}}},hints:["Network slicing = virtual networks","URLLC = ultra-reliable low-latency","eMBB = enhanced mobile broadband","mMTC = massive machine-type comms"],unlocks:"iot-15-energy-harvesting"},{id:"iot-15-energy-harvesting",title:"Energy Harvesting",difficulty:"advanced",estimatedTime:"30 min",module:"iot-network",objective:{description:"Power sensors with harvested energy",challenge:"Battery-free operation!",requirements:["Add energy harvesting modules","Solar, RF, or kinetic harvesting","Self-sustaining operation > 30 days","Zero battery replacements"]},constraints:{requiredComponents:["energy-harvester"],harvestingTypes:["solar","rf","kinetic"],requiredMetrics:{selfSustainDays:{min:30},batteryReplacements:{max:0}}},starRating:{3:{selfSustainDays:{min:365}},2:{selfSustainDays:{min:180}},1:{selfSustainDays:{min:30}}},hints:["Solar panels for outdoor","RF harvesting from wireless signals","Kinetic from vibration","Supercapacitors for storage"],unlocks:"iot-16-fog-computing"},{id:"iot-16-fog-computing",title:"Fog Computing Architecture",difficulty:"expert",estimatedTime:"40 min",module:"iot-network",objective:{description:"Build multi-tier fog computing system",challenge:"Edge, fog, and cloud layers!",requirements:["Edge nodes (local processing)","Fog nodes (regional aggregation)","Cloud (central analytics)","Latency-aware task placement"]},constraints:{minComponents:15,requiredComponents:["edge-node","fog-node","cloud-backend"],requiredMetrics:{avgLatency:{max:50},cloudBandwidth:{reduction:80}}},starRating:{3:{avgLatency:{max:30},cloudBandwidth:{reduction:90}},2:{avgLatency:{max:40},cloudBandwidth:{reduction:85}},1:{avgLatency:{max:50},cloudBandwidth:{reduction:80}}},hints:["Fog = between edge and cloud","Cisco fog computing","Process latency-sensitive at edge","Analytics and ML in cloud"],unlocks:"iot-17-blockchain"},{id:"iot-17-blockchain",title:"Blockchain for IoT",difficulty:"expert",estimatedTime:"45 min",module:"iot-network",objective:{description:"Use blockchain for IoT data integrity",challenge:"Immutable sensor data!",requirements:["Add blockchain ledger","Record sensor data on chain","Prevent data tampering","Consensus among nodes"]},constraints:{requiredComponents:["blockchain-node"],minComponents:10,requiredMetrics:{dataIntegrity:{min:100},consensusTime:{max:10},energyPerTransaction:{max:100}}},starRating:{3:{consensusTime:{max:5},energyPerTransaction:{max:50}},2:{consensusTime:{max:7},energyPerTransaction:{max:75}},1:{consensusTime:{max:10},energyPerTransaction:{max:100}}},hints:["Immutable ledger","IOTA for IoT","Lightweight consensus (PoS)","Avoid Bitcoin-level energy cost"],unlocks:"iot-18-satellite"},{id:"iot-18-satellite",title:"Satellite IoT",difficulty:"expert",estimatedTime:"45 min",module:"iot-network",objective:{description:"Connect remote IoT devices via satellite",challenge:"Global coverage!",requirements:["Add satellite gateway","LEO satellite constellation","Global coverage > 95%","Latency < 500ms"]},constraints:{requiredComponents:["satellite-gateway"],requiredMetrics:{globalCoverage:{min:95},satLatency:{max:500},linkAvailability:{min:99}}},starRating:{3:{globalCoverage:{min:99},satLatency:{max:200}},2:{globalCoverage:{min:97},satLatency:{max:350}},1:{globalCoverage:{min:95},satLatency:{max:500}}},hints:["LEO = low earth orbit","Starlink, Iridium","For remote agriculture, maritime","Lower orbit = lower latency"],unlocks:"iot-19-autonomous"},{id:"iot-19-autonomous",title:"Autonomous Vehicle Network",difficulty:"expert",estimatedTime:"50 min",module:"iot-network",objective:{description:"V2X (Vehicle-to-Everything) network",challenge:"Connected autonomous vehicles!",requirements:["V2V (vehicle-to-vehicle) communication","V2I (vehicle-to-infrastructure)","Ultra-low latency < 5ms","Safety message delivery > 99.99%"]},constraints:{minComponents:20,requiredComponents:["v2v-module","rsu-roadside-unit"],requiredMetrics:{v2xLatency:{max:5},safetyMessageDelivery:{min:99.99}}},starRating:{3:{v2xLatency:{max:2},safetyMessageDelivery:{min:99.999}},2:{v2xLatency:{max:3},safetyMessageDelivery:{min:99.995}},1:{v2xLatency:{max:5},safetyMessageDelivery:{min:99.99}}},hints:["DSRC or C-V2X protocols","Cooperative awareness messages","Safety critical","Edge computing for real-time decisions"],unlocks:"iot-20-ultimate"},{id:"iot-20-ultimate",title:"The Ultimate IoT System",difficulty:"expert",estimatedTime:"60 min",module:"iot-network",objective:{description:"Build comprehensive IoT ecosystem",challenge:"MASTER ALL IoT TECHNOLOGIES!",requirements:["Multi-protocol network (MQTT, LoRa, NB-IoT)","Edge AI processing","Fog computing architecture","Security and encryption","Energy harvesting","Digital twin integration","Blockchain data integrity"]},constraints:{minComponents:30,requiredComponents:["mqtt-broker","lora-gateway","nbiot-module","edge-ai-processor","fog-node","security-module","energy-harvester","digital-twin-service","blockchain-node"],requiredMetrics:{networkUptime:{min:99.9},avgLatency:{max:50},batteryLifeDays:{min:180},dataIntegrity:{min:100},securityLevel:{min:95},energyEfficiency:{min:90}}},starRating:{3:{networkUptime:{min:99.99},avgLatency:{max:30},batteryLifeDays:{min:365},dataIntegrity:{min:100},securityLevel:{min:99},energyEfficiency:{min:95},hint:" PERFECT! IoT mastermind!"},2:{networkUptime:{min:99.95},avgLatency:{max:40},batteryLifeDays:{min:270},securityLevel:{min:97},energyEfficiency:{min:92},hint:" Excellent! Enterprise-ready!"},1:{networkUptime:{min:99.9},avgLatency:{max:50},batteryLifeDays:{min:180},securityLevel:{min:95},energyEfficiency:{min:90},hint:" Great! Production-ready IoT!"}},hints:["Integrate all IoT technologies","Real-world IoT is this complex","Balance power, latency, and security","You are now an IoT architect!"],unlocks:null}];function _C(){const[e,t]=N.useState("level-select"),[n,r]=N.useState(null),[s,i]=N.useState(null),{updateLevelProgress:o,unlockLevel:l}=wn(),c=m=>{r(m),t("playing"),i(null)},u=()=>{r(null),t("sandbox"),i(null)},d=()=>{t("level-select"),r(null),i(null)},f=()=>{if(!n)return;const m=new fa(n),g={metrics:{},components:[],running:!1},v=m.validate(g);i(v),v.passed&&(o("iot-network",n.id,{completed:!0,stars:v.stars,attempts:1,bestTime:v.completionTime||0}),n.unlocks&&l(n.unlocks))};return e==="level-select"?a.jsx(ma,{levels:jC,moduleTitle:"IoT NETWORK",moduleSubtitle:"Connect The World!",onSelectLevel:c,onSandboxMode:u,onBack:()=>window.location.reload()}):a.jsxs("div",{className:"w-full h-screen flex flex-col bg-comic-cream relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-5 pointer-events-none z-0"}),a.jsxs("div",{className:"bg-comic-yellow border-b-4 border-black px-6 py-2 flex items-center justify-between shadow-md z-30 relative",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white border-3 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold",children:[a.jsx(oa,{size:20,className:"stroke-[3]"}),e==="sandbox"?"BACK":"EXIT LEVEL"]}),n&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ui,{className:"stroke-[3]",size:28}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-comic text-xl font-bold uppercase tracking-wide",children:n.title}),a.jsxs("p",{className:"text-sm font-comic uppercase tracking-wide",children:[n.difficulty,"  ",n.estimatedTime]})]})]}),e==="sandbox"&&a.jsx("h2",{className:"font-comic text-2xl font-bold uppercase tracking-wider",children:" SANDBOX MODE"})]}),n&&a.jsx("button",{onClick:f,className:"px-6 py-3 bg-comic-blue text-white border-4 border-black shadow-comic hover:shadow-none hover:translate-y-1 transition-all font-comic font-bold text-lg uppercase",children:" Check Solution"})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[a.jsx("div",{className:"z-20 h-full relative",children:a.jsx(uC,{})}),a.jsxs("div",{className:"flex-1 flex flex-col relative",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(SC,{}),n&&a.jsx(ha,{level:n,validationResult:s}),a.jsx("div",{className:"absolute top-32 right-4 z-40",children:a.jsx(CC,{})})]}),a.jsx("div",{className:"absolute bottom-8 left-[40%] transform -translate-x-1/2 z-50",children:a.jsx(EC,{})})]})]})]})}function TC(){const[e,t]=N.useState("home"),[n,r]=N.useState(null),s=()=>t("module-selection"),i=l=>{r(l),t("builder")},o=()=>{t("home"),r(null)};return e==="home"?a.jsx(jv,{onStart:s}):e==="module-selection"?a.jsx(Tv,{onSelect:i,onBack:o}):a.jsxs("div",{className:"h-screen w-screen bg-comic-cream flex flex-col overflow-hidden font-body relative",children:[a.jsx("div",{className:"absolute inset-0 bg-halftone-dots opacity-5 pointer-events-none z-0"}),a.jsxs("div",{className:"flex-1 flex min-h-0 relative z-10",children:[n==="os-scheduler"&&a.jsx(gS,{}),n==="pc-architecture"&&a.jsx(WS,{}),n==="ram"&&a.jsx(cC,{}),n==="iot"&&a.jsx(_C,{})]})]})}bl.createRoot(document.getElementById("root")).render(a.jsx(R.StrictMode,{children:a.jsx(TC,{})}));
